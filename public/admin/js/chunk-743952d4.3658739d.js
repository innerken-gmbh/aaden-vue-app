(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-743952d4"],{"0421":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("633c");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t,n,r,i,a,o){try{var u=e[a](o),l=u.value}catch(s){return void n(s)}u.done?t(l):Promise.resolve(l).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,l,"next",e)}function l(e){u(a,r,i,o,l,"throw",e)}o(void 0)}))}}var s={id:{type:r.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{displayName:"allergName"},icon:{displayName:"icon"},shortName:{displayName:"shortName"},displayText:{displayName:"displayText"}},c={add:function(e){return r.hillo.postWithUploadFile("Dishes.php?op=addAllergen",e,{showLoading:!0})},edit:function(e){return r.hillo.postWithUploadFile("Dishes.php?op=updateAllergen",e,{showLoading:!0})},remove:function(e){return r.hillo.post("Dishes.php?op=deleteAllergen",{id:e})},load:function(){var e=l((function*(e){return(yield r.hillo.get("Dishes.php",a({op:"showAllAllergen"},e))).content}));function t(t){return e.apply(this,arguments)}return t}()},p=r.IKDataEntity.ModelFactory(s,c);t.default=p},"07bf":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openTable=c,t.getCurrentStatus=p,t.rearrangeDish=f,t.addDishesToTable=y,t.getOrderInfo=h,t.requireCheckOut=m,t.submitBill=v,t.callServant=D,t.fetchConfig=O,t.resolveBestIP=w,t.getActiveTables=E,t.getTableList=x,t.getOneBusyTable=A,t.findConsumeTypeById=G;var r=n("633c"),i=o(n("4eed")),a=o(n("ee60"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,i,a,o){try{var u=e[a](o),l=u.value}catch(s){return void n(s)}u.done?t(l):Promise.resolve(l).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,l,"next",e)}function l(e){u(a,r,i,o,l,"throw",e)}o(void 0)}))}}var s={noDebug:!0};function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return r.hillo.post("Complex.php?op=openTableWithScanQR",{tableId:e,consumeTypeId:t})}function p(e){return r.hillo.silentGet("Tables.php",{name:e})}var d=[9,10,11,"9","10","11"];function f(e,t,n){return console.log(n),e=e.map(e=>(e.dishes=t.filter(t=>t.categoryId===e.id).map(e=>(e.count=0,e.note="",e)),e)),n.map(t=>(t.categories=e.filter(e=>parseInt(t.id)===parseInt(e.dishesCategoryTypeId)),t)).filter(e=>d.includes(e.id)).sort((e,t)=>9===parseInt(t.id)?-1:9===parseInt(e.id)?1:parseInt(e.id)<parseInt(t.id)?-1:parseInt(e.id)>parseInt(t.id)?1:0)}function y(e,t){return r.hillo.post("Complex.php?op=addDishesToTable",{tableId:e,params:JSON.stringify(t)})}function h(e){return g.apply(this,arguments)}function g(){return g=l((function*(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(yield r.hillo.get("Complex.php",{op:"dishesInTable",tableId:e,lang:i.default.lang(),usePrintModAsName:0|t},s)).content})),g.apply(this,arguments)}function m(e,t){return b.apply(this,arguments)}function b(){return b=l((function*(e,t){return(yield r.hillo.post("Complex.php?op=requireCheckOut",{op:"requireCheckOut",tableId:e,payMethod:t,lang:i.default.lang()})).content})),b.apply(this,arguments)}function v(e,t){return I.apply(this,arguments)}function I(){return I=l((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(yield r.hillo.post("Complex.php?op=checkOut",{op:"checkOut",tableId:e,payMethod:t,tipIncome:n,personCount:i})).content})),I.apply(this,arguments)}function D(e){return r.hillo.get("Complex.php",{op:"callServant",lang:i.default.lang(),tableId:e})}function O(){return C.apply(this,arguments)}function C(){return C=l((function*(){try{var e=yield fetch("/"+(i.default.Dir?i.default.Dir+"/":"")+"Resource/config/config.json");return yield e.json()}catch(t){return console.warn("no Config found"),{}}})),C.apply(this,arguments)}function w(e){return N.apply(this,arguments)}function N(){return N=l((function*(e){var t=yield r.hillo.get("https://innerken.com/iplogger/",{op:"findBestIp",deviceId:null!==e&&void 0!==e?e:i.default.DeviceId});return t.content})),N.apply(this,arguments)}var j=null;function E(){return T.apply(this,arguments)}function T(){return T=l((function*(){var e=yield r.hillo.get("Tables.php",{op:"showAllTableWithSection"},s);return j=K(e.content),j})),T.apply(this,arguments)}function x(){return P.apply(this,arguments)}function P(){return P=l((function*(){return null==j||0===j.length?yield E():j})),P.apply(this,arguments)}function A(){return S.apply(this,arguments)}function S(){return S=l((function*(){var e=(yield x()).reduce((e,t)=>e.concat(t.tables),[]).find(e=>0!==parseInt(e.usageStatus));return e})),S.apply(this,arguments)}function K(e){for(var t in j=[],e){var n={};for(var r of(n.areaName=t,n.tables=e[t],n.tables))r.consumeType?r.consumeTypeName=G(r.consumeType).name:r.consumeTypeName="AVL";j.push(n)}return j}var k=[];function G(e){return L.apply(this,arguments)}function L(){return L=l((function*(e){for(var t of(0===k.length&&(k=yield a.default.getList()),k))if(parseInt(t.id)===parseInt(e))return t;return null})),L.apply(this,arguments)}},"194c":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("4eed")),i=n("633c");function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n,r,i,a,o){try{var u=e[a](o),l=u.value}catch(s){return void n(s)}u.done?t(l):Promise.resolve(l).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}var p={id:{type:i.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{},lang:{}},d={load:function(){var e=c((function*(e){return(yield i.hillo.get("CategoryType.php",u({lang:r.default.lang()},e))).content}));function t(t){return e.apply(this,arguments)}return t}()},f=i.IKDataEntity.ModelFactory(p,d);t.default=f},"2e88":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("633c"),i=l(n("194c")),a=l(n("85e4")),o=l(n("c5e4")),u=l(n("4eed"));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,i,a,o){try{var u=e[a](o),l=u.value}catch(s){return void n(s)}u.done?t(l):Promise.resolve(l).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={id:{type:r.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},langs:{displayName:"labelName",type:r.IKDataEntity.Types.Group,formConfig:{groupName:"labelName",default:u.default.supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:e=>e.lang.toUpperCase()===u.default.lang(),displayChild:e=>"name"===e},childKey:["name","desc"],labelKey:"lang",children:[o.default,o.default,o.default]},dishesCategoryTypeId:{displayName:"labelType",type:r.IKDataEntity.Types.Option,formConfig:{type:{selectItems:i.default.getList}}},attributeGroupId:{displayName:"attributeGroupNames",type:r.IKDataEntity.Types.Option,formConfig:{required:!1,type:{selectItems:a.default.getList,multiple:!0}}}},h={add:function(e){return e.appliedAttributeGroup=e.attributeGroupId.join(","),e.catTypeId=e.dishesCategoryTypeId,r.hillo.post("Category.php?op=add",d(d({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},edit:function(e){return e.appliedAttributeGroup=e.attributeGroupId.join(","),e.catTypeId=e.dishesCategoryTypeId,r.hillo.postWithUploadFile("Category.php?op=update",d(d({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},remove:function(e){return r.hillo.post("Category.php?op=delete",{id:e})},load:function(){var e=c((function*(e){return(yield r.hillo.get("Category.php",d({},e))).content.map((function(e){return r.IKDataEntity.parseDataForEntity(e,y)}))}));function t(t){return e.apply(this,arguments)}return t}()},g=r.IKDataEntity.ModelFactory(y,h);t.default=g},"2f69":function(e,t,n){"use strict";var r=n("5530"),i=(n("96cf"),n("1da1")),a=n("3405"),o=n("633c"),u=n("b0d9"),l=n("ebc9"),s={id:{type:o["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"name"},attributeGroupId:{displayName:"groupName",type:o["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:u["a"].forceGetList}}},isMultiChosen:{type:o["IKDataEntity"].Types.Boolean},value:{displayName:"value"},printMod:{displayName:"printMod"},priceMod:{type:o["IKDataEntity"].Types.Float,displayName:"priceMod",formConfig:{overwriteRule:!0,rule:[function(e){return/^(-)?[0-9]+\.{0,1}[0-9]{0,2}$/.test(e)||"please enter the correct price"}]}},dishesCategoryTypeId:{displayName:"labelType",type:o["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:l["a"].getList}}}},c={add:function(e){return o["hillo"].postWithUploadFile("Category.php?op=addAttribute",e,{showLoading:!0})},edit:function(e){return o["hillo"].postWithUploadFile("Category.php?op=updateAttribute",e,{showLoading:!0})},remove:function(e){return o["hillo"].post("Category.php?op=deleteAttribute",{id:e})},load:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["hillo"].get("Category.php",Object(r["a"])({op:"showAttribute",lang:a["a"].lang()},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()};t["a"]=o["IKDataEntity"].ModelFactory(s,c)},"30c8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("633c"),i=s(n("4eed")),a=s(n("2e88")),o=s(n("0421")),u=s(n("c5e4")),l=s(n("85e4"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,r,i,a,o){try{var u=e[a](o),l=u.value}catch(s){return void n(s)}u.done?t(l):Promise.resolve(l).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){c(a,r,i,o,u,"next",e)}function u(e){c(a,r,i,o,u,"throw",e)}o(void 0)}))}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={id:{type:r.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},code:{formConfig:{required:!1}},image:{type:r.IKDataEntity.Types.Image,formConfig:{type:{root:()=>i.default.rootUrl()+i.default.dishImageRoot},required:!1},displayName:"image"},langs:{displayName:"name",type:r.IKDataEntity.Types.Group,formConfig:{groupName:"name",default:i.default.supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:e=>e.lang.toUpperCase()===i.default.lang(),displayChild:e=>"name"===e},childKey:["name","desc"],children:[u.default,u.default,u.default]},price:{type:r.IKDataEntity.Types.Float,formConfig:{default:"",required:!1,rule:[e=>/^[0-9]+\.{0,1}[0-9]{0,2}$/.test(e)||"please enter the correct price"]}},categoryId:{displayName:"dishCatName",type:r.IKDataEntity.Types.Option,formConfig:{type:{selectItems:a.default.getList,itemText:"_langsname"}}},AllergenId:{type:r.IKDataEntity.Types.Option,formConfig:{type:{selectItems:o.default.getList,multiple:!0},required:!1},displayName:"过敏源"},attributeGroupId:{displayName:"attributeGroupNames",type:r.IKDataEntity.Types.Option,formConfig:{merge:!1,type:{selectItems:l.default.getList,multiple:!0,disabledItem:(e,t)=>t.inheritAttributeGroupId?f(f({},e),{},{disabled:t.inheritAttributeGroupId.includes(e.id)}):e}}},localAttributeGroupId:{type:r.IKDataEntity.Types.Option,formConfig:{type:{selectItems:l.default.getList,multiple:!0},inNew:!1,inEdit:!1},header:!1},inheritAttributeGroupId:{displayName:"AttributeGroupName",type:r.IKDataEntity.Types.Option,formConfig:{type:{selectItems:l.default.getList,multiple:!0},inNew:!1,inEdit:!1},header:!1},isActive:{type:r.IKDataEntity.Types.Boolean,displayName:"isActive",formConfig:{default:1}}},g={add:function(e){return e.attributeGroup=e.attributeGroupId.filter(t=>!e.inheritAttributeGroupId.includes(t)).join(","),e.allergenGroup=e.AllergenId.join(","),r.hillo.postWithUploadFile("Dishes.php?op=add",f(f({},e),{},{params:JSON.stringify(e)}),{showLoading:!0})},edit:function(e){return e.attributeGroup=e.attributeGroupId.filter(t=>!e.inheritAttributeGroupId.includes(t)).join(","),e.allergenGroup=e.AllergenId.join(","),e.file&&(e.imageExt=e.file.name.split(".")[1]),r.hillo.postWithUploadFile("Dishes.php?op=update",f(f({},e),{},{params:JSON.stringify(e)}),{showLoading:!0})},remove:function(e){return r.hillo.post("Dishes.php?op=delete",{id:e})},load:function(){var e=p((function*(e){return(yield r.hillo.get("Dishes.php",f({},e))).content.map((function(e){return e.id=e.dishId,e.attributeGroupId=[e.inheritAttributeGroupId?e.inheritAttributeGroupId.split(","):[],e.localAttributeGroupId?e.localAttributeGroupId.split(","):[]].flat().join(","),e.langs=e.langs.map(e=>f(f({},e),{},{desc:e.description})),e}))}));function t(t){return e.apply(this,arguments)}return t}()},m=r.IKDataEntity.ModelFactory(h,g);m.getBuffet=p((function*(){return(yield m.getList()).filter(e=>"8"===e.dishesCategoryTypeId)}));var b=m;t.default=b},"32f5":function(e,t,n){"use strict";var r=n("4649"),i=n.n(r);i.a},4649:function(e,t,n){},"4c03":function(e,t,n){"use strict";n("a15b"),n("96cf");var r=n("1da1"),i=n("5530"),a=n("633c"),o=n("ebc9"),u=n("b0d9"),l=n("a86d"),s=n("3405"),c=n("6f56"),p={load:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["hillo"].get("Category.php",Object(i["a"])({},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},d={id:{type:a["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},_langsname:{displayName:"labelName",form:!1},langs:{displayName:"labelName",type:a["IKDataEntity"].Types.Group,formConfig:{groupName:"labelName",default:s["a"].supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:function(e){return e.lang.toUpperCase()===s["a"].lang()},displayChild:function(e){return"name"===e}},childKey:["name","desc"],labelKey:"lang",children:[l["a"],l["a"],l["a"]],header:!1}},f=a["IKDataEntity"].ModelFactory(d,p),y={add:function(e){return e.appliedAttributeGroup=e.attributeGroupId.join(","),e.catTypeId=e.dishesCategoryTypeId,e.appliedConsumeTypeIds=e.consumeTypeIds.join(","),e.appliedFreeInConsumeTypeIds=e.freeInConsumeTypeIds.join(","),a["hillo"].post("Category.php?op=add",Object(i["a"])(Object(i["a"])({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},edit:function(e){return e.appliedAttributeGroup=e.attributeGroupId.join(","),e.catTypeId=e.dishesCategoryTypeId,e.appliedConsumeTypeIds=e.consumeTypeIds.join(","),e.appliedFreeInConsumeTypeIds=e.freeInConsumeTypeIds.join(","),a["hillo"].postWithUploadFile("Category.php?op=update",Object(i["a"])(Object(i["a"])({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},remove:function(e){return a["hillo"].post("Category.php?op=delete",{id:e})},load:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["hillo"].get("Category.php",Object(i["a"])({},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},h={id:{type:a["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},categorySort:{type:a["IKDataEntity"].Types.Integer,displayName:"sectionSort",formConfig:{default:50,required:!1}},_langsname:{displayName:"labelName",form:!1},langs:{displayName:"labelName",type:a["IKDataEntity"].Types.Group,formConfig:{groupName:"labelName",default:s["a"].supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:function(e){return e.lang.toUpperCase()===s["a"].lang()},displayChild:function(e){return"name"===e}},childKey:["name","desc"],labelKey:"lang",children:[l["a"],l["a"],l["a"]],header:!1},dishesCategoryTypeId:{displayName:"labelType",type:a["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:o["a"].getList}}},attributeGroupId:{displayName:"attributeGroupNames",type:a["IKDataEntity"].Types.Option,formConfig:{required:!1,type:{selectItems:u["a"].getList,multiple:!0}}},consumeTypeIds:{type:a["IKDataEntity"].Types.Option,formConfig:{required:!1,type:{selectItems:c["a"].getList,multiple:!0}}},freeInConsumeTypeIds:{type:a["IKDataEntity"].Types.Option,formConfig:{required:!1,type:{selectItems:c["a"].getList,multiple:!0}}},color:{type:a["IKDataEntity"].Types.Color,formConfig:{required:!1}},printOrder:{type:a["IKDataEntity"].Types.Integer,required:!1,formConfig:{default:50,requiredNew:!1,requiredEdit:!1,rule:[function(e){return/^[0-9]\d*$/.test(e)||"Bitte geben Sie die ganze Zahl ein"}]}},parentId:{type:a["IKDataEntity"].Types.Option,formConfig:{required:!1,type:{selectItems:f.getList,itemText:"_langsname"}}}};t["a"]=a["IKDataEntity"].ModelFactory(h,y)},"4eed":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initSettings=l,t.initialAadenBase=c,t.default=void 0;var r=n("07bf"),i=n("633c");function a(e,t,n,r,i,a,o){try{var u=e[a](o),l=u.value}catch(s){return void n(s)}u.done?t(l):Promise.resolve(l).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){a(o,r,i,u,l,"next",e)}function l(e){a(o,r,i,u,l,"throw",e)}u(void 0)}))}}var u={name:"GlobalSetting",DeviceId:-1,Base:"localhost",initialed:!1,SQR:"https://qr.topscan.com/api.php?text=",genSQUrl:"web/ScanToOrder/Orders/ConfirmPage/?",endPoint:"PHP/",Dir:"",Protocol:"http://",Port:"",dishImageRoot:"Resource/dishImg/",servantRoot:"Resource/servantImg/",DefaultLocale:"de",supportLang:[{lang:"zh",id:"1",name:""},{lang:"en",id:"2",name:""},{lang:"de",id:"3",name:""}],ServantImgRoot:"Resource/servantImg/",companyRoot:"https://innerken.com/iplogger/"};function l(e){return s.apply(this,arguments)}function s(){return s=o((function*(e){Object.assign(u,e),u.Base&&"localhost"!==u.Base||-1!==u.DeviceId&&(u.Base=yield(0,r.resolveBestIP)()),u.lang||(u.lang=function(){return u.DefaultLocale.toUpperCase()}),u.getBase=function(){return u.Protocol+u.Base+"/"},u.getEndPoint=function(){return u.getBase()+u.endPoint}})),s.apply(this,arguments)}function c(e){return p.apply(this,arguments)}function p(){return p=o((function*(e){return yield l(e),i.ego.initial(u.getEndPoint()),u})),p.apply(this,arguments)}var d=u;t.default=d},"591e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardDishesListFactory=g,t.getDishesInfo=C,t.getDishes=N;var r=u(n("30c8")),i=u(n("194c")),a=n("633c"),o=u(n("2e88"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,r,i,a,o){try{var u=e[a](o),l=u.value}catch(s){return void n(s)}u.done?t(l):Promise.resolve(l).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,u,"next",e)}function u(e){l(a,r,i,o,u,"throw",e)}o(void 0)}))}}var c={note:"",apply:[],modShow:!1,forceFormat:!1};function p(e){var t,n,r=[];return e.apply||e.agName?((null===e||void 0===e||null===(t=e.apply)||void 0===t?void 0:t.length)>0?e.apply.forEach(t=>{var n=e.modInfo.find(e=>e.id===t.groupId),i=n.name,a=[t.selectId].flat().reduce((e,t)=>{if(!t)return e;var r=n.selectValue.indexOf(t),a="".concat(n.selectName[r]),o=n.priceInfo[r];return e.push({groupName:i,value:a,priceInfo:o,hash:i+":"+a+"p"+o}),e},[]);r=r.concat(a)}):(null===e||void 0===e||null===(n=e.agName)||void 0===n?void 0:n.length)>0&&([e.agNameArr,e.aNameArr,e.priceInfoArr,e.agIdArr,e.aIdArr]=[e.agName,e.aName,e.priceInfo,e.agId,e.aId].map(e=>e.split(",")),e.agNameArr.forEach((t,n)=>{r.push({agId:e.agIdArr[n],aId:e.aIdArr[n],groupName:t,value:e.aNameArr[n],priceInfo:e.priceInfoArr[n],hash:t+":"+e.aNameArr[n]+"p"+e.priceInfoArr[n]+"g"+e.agIdArr[n]})})),r):r}function d(e){var t=0;return e.displayApply.forEach(e=>{var n;t+=parseFloat(null!==(n=e.priceInfo)&&void 0!==n?n:0)}),t}function f(e){return e.reduce((e,t)=>(e.push(t.hash),e),[]).join("/")}function y(e,t,n,r,i){return e+"&"+f(t)+"-&-"+n+"-&-"+r+"-&-"+i}function h(e){var t,n,r,i,a;e.note=null!==(t=e.note)&&void 0!==t?t:"",e.displayApply=p(e),e.addPrice=d(e),e.originPrice=parseFloat(0===parseFloat(e.price)?0:null!==(n=null!==(r=e.originPrice)&&void 0!==r?r:e.price)&&void 0!==n?n:0),e.realPrice=parseFloat(e.originPrice)+parseFloat(e.addPrice)+parseFloat(null!==(i=e.tempDiscountMod)&&void 0!==i?i:0),e.code.includes("ea")&&(e.realPrice=e.price),e.identity=y(e.code,e.displayApply,e.note,e.tempDiscountStr,null!==(a=e.price)&&void 0!==a?a:e.realPrice)}function g(){var e=[],t={},n={},r=0,i=function(t,i){var o=a.IKUtils.deepCopy(t);o.count=null!==i&&void 0!==i?i:t.count,o.sumCount=o.count,o.hash=r,h(o),r++,n[o.identity]=o,o.change=function(e){p(o,e)},e.push(o)};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(null===e||void 0===e?void 0:e.length)>0&&Object.assign(t,e.reduce((e,t)=>(e[t.code]=t,e),{}))}function u(e){return l(e,!1)}function l(e){var t,n,r,i,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],u=o?a.IKUtils.deepCopy(e):e;return u.count=parseInt(null!==(t=null!==(n=u.count)&&void 0!==n?n:u.sumCount)&&void 0!==t?t:0),u.name=null!==(r=null!==(i=u.name)&&void 0!==i?i:u.dishName)&&void 0!==r?r:u._langsname,h(u),u.wellFormat=!0,Object.assign({},c,u)}function s(){return Object.keys(t).reduce((e,n)=>(e.push(t[n]),e),[])}var p=function(r,a){var o=t[r.code];o&&(parseInt(o.count)+parseInt(a)>0?o.count+=a:o.count=0),r.wellFormat&&!r.forceFormat||(r.forceFormat=!1,r=l(r));var u=n[r.identity];u?u.count+a>0?(u.count+=a,u.sumCount=u.count):(e.splice(e.indexOf(u),1),delete n[r.identity]):(a>=0||r.count>=0)&&i(r,a)},d=function(e){return e.map(u)},f=function(e,t){p(e,t)},y=function(e,t){p(e,t)},g=function(){return e.reduce((e,t)=>e+parseFloat(t.realPrice*t.count),0)},m=function(){return parseInt(e.reduce((e,t)=>e+parseInt(t.count),0))},b=function(e){v(e)},v=function(e){for(var t of(I(),e))f(t)},I=function(){for(var r of Object.keys(t))t[r].count=0;for(var i of Object.keys(n))delete n[i];e.splice(0,e.length)};return{orderDictionary:n,setDishList:o,dishDictionary:t,list:e,getDishList:s,add:f,remove:y,total:g,count:m,loadTTDishList:b,formatList:d,loadList:v,clear:I}}var m=[],b=[],v=[],I=[];function D(e,t,n){return e=e.map(e=>(e.dishes=t.filter(t=>t.categoryId===e.id).map(e=>(e.count=0,e.note="",e)),e)).filter(e=>e.dishes.length>0),n.map(t=>(t.categories=e.filter(e=>parseInt(t.id)===parseInt(e.dishesCategoryTypeId)),t)).sort((e,t)=>9===parseInt(t.id)?-1:9===parseInt(e.id)?1:parseInt(e.id)<parseInt(t.id)?-1:parseInt(e.id)>parseInt(t.id)?1:0)}var O=g();function C(){return w.apply(this,arguments)}function w(){return w=s((function*(){return 0===I.length&&([v,b,m]=yield Promise.all([N(),o.default.getList(),i.default.getList()]),I=D(b,v,m)),I})),w.apply(this,arguments)}function N(){return j.apply(this,arguments)}function j(){return j=s((function*(){return 0===v.length&&(v=O.formatList(yield r.default.getList())),v})),j.apply(this,arguments)}},6306:function(e,t,n){"use strict";var r=n("5530"),i=(n("96cf"),n("1da1")),a=n("633c"),o={id:{type:a["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"sectionName"},isSingleLinePrint:{type:a["IKDataEntity"].Types.Boolean,displayName:"isSingleLinePrint"},isSingleOrderPrint:{type:a["IKDataEntity"].Types.Boolean,displayName:"isSingleOrderPrint"},printerCount:{displayName:"printerCount",formConfig:{inEdit:!1,inNew:!1}},defaultRetryCount:{formConfig:{default:"0"}},totalDishesCount:{formConfig:{inEdit:!1,inNew:!1}}},u={load:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["hillo"].get("Printer.php",Object(r["a"])({op:"showPrinterGroups"},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),add:function(e){return a["hillo"].postWithUploadFile("Printer.php?op=addPrinterGroups",e,{showLoading:!0})},edit:function(e){return a["hillo"].postWithUploadFile("Printer.php?op=updatePrinterGroups",e,{showLoading:!0})},remove:function(e){return a["hillo"].post("Printer.php?op=deletePrinterGroup",{id:e})}};t["a"]=a["IKDataEntity"].ModelFactory(o,u)},"6e35":function(e,t,n){"use strict";var r=n("5530"),i=(n("96cf"),n("1da1")),a=n("633c"),o={id:{type:a["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"allergName"},icon:{displayName:"icon"},shortName:{displayName:"shortName"},displayText:{displayName:"displayText"}},u={add:function(e){return a["hillo"].postWithUploadFile("Dishes.php?op=addAllergen",e,{showLoading:!0})},edit:function(e){return a["hillo"].postWithUploadFile("Dishes.php?op=updateAllergen",e,{showLoading:!0})},remove:function(e){return a["hillo"].post("Dishes.php?op=deleteAllergen",{id:e})},load:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["hillo"].get("Dishes.php",Object(r["a"])({op:"showAllAllergen"},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()};t["a"]=a["IKDataEntity"].ModelFactory(o,u)},"6f56":function(e,t,n){"use strict";var r=n("5530"),i=(n("96cf"),n("1da1")),a=n("633c"),o={id:{type:a["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{displayName:"staffName"},printName:{displayName:"printTitle"},zbonGroup:{displayName:"zbonGroup"},color:{type:a["IKDataEntity"].Types.Color,formConfig:{required:!1}}},u={load:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["hillo"].get("Complex.php",Object(r["a"])({op:"showAllConsumeTypeInfo"},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),add:function(e){return a["hillo"].post("ConsumeType.php?op=add",Object(r["a"])(Object(r["a"])({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},edit:function(e){return a["hillo"].postWithUploadFile("ConsumeType.php?op=update",Object(r["a"])(Object(r["a"])({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},remove:function(e){return a["hillo"].post("ConsumeType.php?op=delete",{id:e})}};t["a"]=a["IKDataEntity"].ModelFactory(o,u)},"85e4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("4eed")),i=n("633c");function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n,r,i,a,o){try{var u=e[a](o),l=u.value}catch(s){return void n(s)}u.done?t(l):Promise.resolve(l).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}var p={id:{type:i.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{},required:{type:i.IKDataEntity.Types.Boolean},multiSelect:{type:i.IKDataEntity.Types.Boolean},printTitle:{}},d={load:function(){var e=c((function*(e){return(yield i.hillo.get("Category.php",u({op:"showAttributeGroup",lang:r.default.lang()},e))).content}));function t(t){return e.apply(this,arguments)}return t}(),add:function(e){return i.hillo.postWithUploadFile("Category.php?op=addAttributeGroup",e,{showLoading:!0})},edit:function(e){return i.hillo.postWithUploadFile("Category.php?op=updateAttributeGroup",e,{showLoading:!0})},remove:function(e){return i.hillo.post("Category.php?op=deleteAttributeGroup",{id:e})}},f=i.IKDataEntity.ModelFactory(p,d);t.default=f},a86d:function(e,t,n){"use strict";var r=n("633c"),i={id:{type:r["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{displayName:"Name"},lang:{},desc:{displayName:"Beschreibung",formConfig:{required:!1}}};t["a"]=r["IKDataEntity"].ModelFactory(i,{})},b0d9:function(e,t,n){"use strict";var r=n("5530"),i=(n("96cf"),n("1da1")),a=n("3405"),o=n("633c"),u={id:{type:o["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{},printTitle:{},required:{type:o["IKDataEntity"].Types.Boolean},multiSelect:{type:o["IKDataEntity"].Types.Boolean},attrubuteCount:{type:o["IKDataEntity"].Types.Integer,form:!1}},l={load:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["hillo"].get("Category.php",Object(r["a"])({op:"showAttributeGroup",lang:a["a"].lang()},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),add:function(e){return o["hillo"].postWithUploadFile("Category.php?op=addAttributeGroup",e,{showLoading:!0})},edit:function(e){return o["hillo"].postWithUploadFile("Category.php?op=updateAttributeGroup",e,{showLoading:!0})},remove:function(e){return o["hillo"].post("Category.php?op=deleteAttributeGroup",{id:e})}};t["a"]=o["IKDataEntity"].ModelFactory(u,l)},c5e4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("633c"),i={id:{type:r.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{displayName:"Name"},lang:{},desc:{displayName:"Beschreibung",formConfig:{required:!1}}},a=r.IKDataEntity.ModelFactory(i,{});t.default=a},c791:function(e,t,n){"use strict";n("a4d3"),n("e01a"),n("4de4"),n("0481"),n("caad"),n("a15b"),n("d81d"),n("4069"),n("b0c0"),n("ac1f"),n("2532"),n("1276"),n("96cf");var r=n("1da1"),i=n("5530"),a=n("633c"),o=n("3405"),u=n("c0d6"),l=n("4c03"),s=n("6306"),c=n("6e35"),p=n("a86d"),d=n("b0d9"),f=Boolean("0"===o["a"].isShowOnTable),y={id:{type:a["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},code:{},image:{type:a["IKDataEntity"].Types.Image,formConfig:{type:{root:function(){return u["a"].getters.rootUrl+o["a"].dishImageRoot}},required:!1},displayName:"image",header:f},dishName:{displayName:"name",form:!1},price:{type:a["IKDataEntity"].Types.Float,formConfig:{default:"",overwriteRule:!0,rule:[function(e){return/^[0-9]+\.{0,1}[0-9]{0,2}$/.test(e)||"Bitte geben Sie den richtigen Preis ein"}]}},langs:{displayName:"name",type:a["IKDataEntity"].Types.Group,formConfig:{groupName:"name",default:o["a"].supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:function(e){return e.lang.toUpperCase()===o["a"].lang()},displayChild:function(e){return"name"===e}},childKey:["name","desc"],labelKey:"lang",children:[p["a"],p["a"],p["a"]],header:!1},printGroupId:{displayName:"printCatName",type:a["IKDataEntity"].Types.Option,formConfig:{default:1,type:{selectItems:s["a"].getList}}},categoryId:{displayName:"labelName",type:a["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:l["a"].getList,itemText:"_langsname"}}},AllergenId:{type:a["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:c["a"].getList,multiple:!0},required:!1},displayName:"过敏源"},attributeGroupId:{displayName:"attributeGroupNames",type:a["IKDataEntity"].Types.Option,formConfig:{merge:!1,required:!1,type:{selectItems:d["a"].getList,multiple:!0,disabledItem:function(e,t){return t.inheritAttributeGroupId?Object(i["a"])(Object(i["a"])({},e),{},{disabled:t.inheritAttributeGroupId.includes(e.id)}):e}}}},localAttributeGroupId:{type:a["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:d["a"].getList,multiple:!0},inNew:!1,inEdit:!1},header:!1},inheritAttributeGroupId:{displayName:"AttributeGroupName",type:a["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:d["a"].getList,multiple:!0},inNew:!1,inEdit:!1},header:!1},dishWeight:{displayName:"DishWeight",type:a["IKDataEntity"].Types.Integer,formConfig:{default:1,required:!1,rule:[function(e){return/^[0-9]\d*$/.test(e)||"Bitte geben Sie die ganze Zahl ein"}]}},isActive:{type:a["IKDataEntity"].Types.Boolean,displayName:"isActive",formConfig:{default:1,required:!1}},dishAlias:{required:!1,formConfig:{requiredNew:!1,requiredEdit:!1}},printText:{displayName:"printTitle",required:!1,formConfig:{requiredNew:!1,requiredEdit:!1}}},h={add:function(e){return e.attributeGroup=e.attributeGroupId.filter((function(t){return!e.inheritAttributeGroupId.includes(t)})).join(","),e.allergenGroup=e.AllergenId.join(","),a["hillo"].postWithUploadFile("Dishes.php?op=add",Object(i["a"])(Object(i["a"])({},e),{},{params:JSON.stringify(e)}),{showLoading:!0})},edit:function(e){return e.attributeGroup=e.attributeGroupId.filter((function(t){return!e.inheritAttributeGroupId.includes(t)})).join(","),e.allergenGroup=e.AllergenId.join(","),e.file&&(e.imageExt=e.file.name.split(".")[1]),a["hillo"].postWithUploadFile("Dishes.php?op=update",Object(i["a"])(Object(i["a"])({},e),{},{params:JSON.stringify(e)}),{showLoading:!0})},remove:function(e){return a["hillo"].post("Dishes.php?op=delete",{id:e})},load:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["hillo"].get("Dishes.php",Object(i["a"])({lang:o["a"].lang()},t));case 2:return e.abrupt("return",e.sent.content.map((function(e){return e.id=e.dishId,e.attributeGroupId=[e.inheritAttributeGroupId?e.inheritAttributeGroupId.split(","):[],e.localAttributeGroupId?e.localAttributeGroupId.split(","):[]].flat().join(","),e.langs=e.langs.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{desc:e.description})})),e})));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},g=a["IKDataEntity"].ModelFactory(y,h);g.getBuffet=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.getList();case 2:return e.abrupt("return",e.sent.filter((function(e){return"8"===e.dishesCategoryTypeId})));case 3:case"end":return e.stop()}}),e)}))),t["a"]=g},ccdd:function(e,t,n){"use strict";var r=n("5530"),i=n("633c");t["a"]=Object(r["a"])({},i["IKUtils"])},ebc9:function(e,t,n){"use strict";var r=n("5530"),i=(n("96cf"),n("1da1")),a=n("3405"),o=n("633c"),u={id:{type:o["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{},lang:{}},l={load:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["hillo"].get("CategoryType.php",Object(r["a"])({lang:a["a"].lang()},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()};t["a"]=o["IKDataEntity"].ModelFactory(u,l)},ed28:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-card",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("v-dialog",{ref:"dialog",attrs:{"return-value":e.dates,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.dates=t},"update:return-value":function(t){e.dates=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:e.$t("日期筛选"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}},"v-text-field",i,!1),r))]}}]),model:{value:e.datePickerDialog,callback:function(t){e.datePickerDialog=t},expression:"datePickerDialog"}},[n("v-date-picker",{attrs:{range:"",scrollable:""},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.datePickerDialog=!1}}},[e._v(" Cancel ")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.dates)}}},[e._v(" OK ")])],1)],1)],1),n("v-col",{attrs:{cols:"4"}},[n("v-dialog",{ref:"timeDialog",attrs:{"return-value":e.hourStart,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.hourStart=t},"update:return-value":function(t){e.hourStart=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:e.$t("startTime"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.hourStart,callback:function(t){e.hourStart=t},expression:"hourStart"}},"v-text-field",i,!1),r))]}}]),model:{value:e.timeStartPickerDialog,callback:function(t){e.timeStartPickerDialog=t},expression:"timeStartPickerDialog"}},[n("v-time-picker",{attrs:{range:"",scrollable:""},model:{value:e.hourStart,callback:function(t){e.hourStart=t},expression:"hourStart"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.timeStartPickerDialog=!1}}},[e._v(" Cancel ")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.timeDialog.save(e.hourStart)}}},[e._v(" OK ")])],1)],1)],1),n("v-col",{attrs:{cols:"4"}},[n("v-dialog",{ref:"timeEndDialog",attrs:{"return-value":e.hourEnd,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.hourEnd=t},"update:return-value":function(t){e.hourEnd=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:e.$t("endTime"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.hourEnd,callback:function(t){e.hourEnd=t},expression:"hourEnd"}},"v-text-field",i,!1),r))]}}]),model:{value:e.timeEndPickerDialog,callback:function(t){e.timeEndPickerDialog=t},expression:"timeEndPickerDialog"}},[n("v-time-picker",{attrs:{range:"",scrollable:""},model:{value:e.hourEnd,callback:function(t){e.hourEnd=t},expression:"hourEnd"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.timeEndPickerDialog=!1}}},[e._v(" Cancel ")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.timeEndDialog.save(e.hourEnd)}}},[e._v(" OK ")])],1)],1)],1),n("v-col",{attrs:{cols:"4"}},[n("v-select",{attrs:{label:e.$t("永久隐藏属性"),"item-text":"name","item-value":"id",multiple:"",clearable:"",items:e.realAttributes},on:{change:function(t){return e.selectAttributes(e.fixedHideAttributes)},"click:clear":e.clearFixedHideAttribute},model:{value:e.fixedHideAttributes,callback:function(t){e.fixedHideAttributes=t},expression:"fixedHideAttributes"}})],1),n("v-col",{attrs:{cols:"4"}},[n("v-select",{attrs:{label:e.$t("隐藏属性"),"item-text":"name","item-value":"id",multiple:"",clearable:"",items:e.realAttributes},model:{value:e.hideAttributes,callback:function(t){e.hideAttributes=t},expression:"hideAttributes"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("v-select",{attrs:{label:e.$t("永久隐藏菜品"),"item-text":"dishName","item-value":"dishName",multiple:"",clearable:"",items:e.allFixedDishesData},on:{change:function(t){return e.selectFixedDishes(e.fixedHideDishes)},"click:clear":e.clearFixedHideDishes},model:{value:e.fixedHideDishes,callback:function(t){e.fixedHideDishes=t},expression:"fixedHideDishes"}})],1),n("v-col",{attrs:{cols:"4"}},[n("v-select",{attrs:{label:e.$t("选择菜品(不选即为选择所有菜品)"),"item-text":"dishName","item-value":"dishName",multiple:"",items:e.allDishData},on:{change:function(t){return e.selectDishes(e.hideDishes)}},model:{value:e.hideDishes,callback:function(t){e.hideDishes=t},expression:"hideDishes"}})],1),n("v-col",{attrs:{cols:"4"}},[n("v-btn",{attrs:{disabled:e.tableData.length<2,"x-large":"",color:"primary",block:""},on:{click:function(t){e.showSalesTable=!0}}},[e._v(" "+e._s(e.$t("查看分析报告"))+" ")])],1)],1)],1)],1),n("v-dialog",{attrs:{fullscreen:"",scrollable:""},model:{value:e.showSalesTable,callback:function(t){e.showSalesTable=t},expression:"showSalesTable"}},[n("v-card",[n("v-toolbar",{attrs:{dense:"",dark:""}},[n("v-toolbar-title",[e._v(" "+e._s(e.$t("销售统计"))+" ")]),n("v-spacer"),n("v-btn",{staticClass:"mr-4",on:{click:e.print}},[n("v-icon",{attrs:{left:""}},[e._v(" mdi-printer ")]),e._v(" "+e._s(e.$t("打印统计单"))+" ")],1),n("v-icon",{on:{click:function(t){e.showSalesTable=!e.showSalesTable}}},[e._v(" mdi-close ")])],1),n("v-card-text",[n("v-data-table",{attrs:{"fixed-header":"",dense:"","hide-default-footer":"","disable-pagination":"",height:"calc(100vh - 72px)","item-class":e.computeClass,headers:e.headers,items:e.tableData,"items-per-page":100}})],1)],1)],1)],1)},i=[],a=(n("99af"),n("4de4"),n("7db0"),n("4160"),n("caad"),n("d81d"),n("13d5"),n("b0c0"),n("b680"),n("d3b7"),n("07ac"),n("2532"),n("159b"),n("ddb0"),n("5530")),o=(n("96cf"),n("1da1")),u=n("0a61"),l=n("591e"),s=n("2f69"),c=n("b0d9"),p=n("c791"),d=n("633c"),f=n("ff51"),y=n("ccdd"),h={name:"SalesInsight",data:function(){return{datePickerDialog:null,timeStartPickerDialog:null,timeEndPickerDialog:null,hourStart:"",hourEnd:"",dates:[],showSalesTable:null,unfilteredData:[],displayData:[],attributeData:[],hideDishes:[],filterDishesData:[],hideAttributes:[],fixedHideAttributes:[],fixedHideDishes:[],mergedGroup:[],allDishData:[],allFixedDishesData:[],fixedHeader:[{text:"name",value:"name"},{text:"price",value:"price"},{text:"amount",value:"amount"}]}},computed:{headers:function(){return this.fixedHeader.concat(this.attributeHeader)},realAttributes:function(){return this.attributeData.reduce((function(e,t){return t.childAttributes.forEach((function(t){return e.push(t)})),e}),[])},attributeHeader:function(){var e=this;return this.realAttributes.filter((function(t){return!(e.hideAttributes.includes(t.id)||e.fixedHideAttributes.includes(t.id))})).map((function(e){return e.text=e.name,e.value="attr"+e.id,e}))},tableData:function(){var e=[],t=function(e){return e.isDish=!0,e.price="".concat(e.originPrice," (avg:€").concat((e.totalPrice/e.totalCount).toFixed(2),")"),e.amount=e.totalCount,e.groupData.forEach((function(t){e["attr"+t.id]=t.count})),e},n=function(e,t){return e.name="v:"+t,e.amount=e.count,e.groupData.forEach((function(t){e["attr"+t.id]=t.count})),e};return this.hideDishes.length>0?this.filterDishesData.forEach((function(t){e.push(t),t.variants.forEach((function(t,r){e.push(n(t,r))}))})):this.displayData.forEach((function(r){e.push(t(r)),r.variants.forEach((function(t,r){e.push(n(t,r))}))})),e}},watch:{dates:function(e){this.loadSalesData(e)},hourStart:function(e){this.loadSalesData(this.dates,e,this.hourEnd)},hourEnd:function(e){this.loadSalesData(this.dates,this.hourStart,e)}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadData();case 2:case"end":return t.stop()}}),t)})))()},methods:{clearFixedHideAttribute:function(){localStorage.removeItem("fixedHideAttribute")},clearFixedHideDishes:function(){localStorage.removeItem("fixedHideDishes")},selectDishes:function(e){this.filterDishesData=this.displayData.filter((function(t){return e.includes(t.name)}))},selectFixedDishes:function(e){var t=JSON.stringify(e);localStorage.setItem("fixedHideDishes",t),this.allDishData=this.allFixedDishesData.filter((function(t){return!e.includes(t.dishName)})),this.displayData=this.unfilteredData.filter((function(t){return!e.includes(t.name)}))},selectAttributes:function(e){var t=JSON.stringify(e);localStorage.setItem("fixedHideAttribute",t)},computeClass:function(e){return e.isDish?"dishRow normal":"normal"},groupElement:function(e,t){var n=function(n,r){var i=d["IKUtils"].deepCopy(n),a=function(n){return e.forEach((function(e){var a=i.find((function(n){return e[t]===n[r]}));a&&(a[n]||(a[n]=[]),a[n].push(e))})),i};return{saveIn:a}};return{on:n}},getAllAttribute:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getList();case 2:return e.abrupt("return",e.sent.filter((function(e){return e.optattributeGroupId.length>0})));case 3:case"end":return e.stop()}}),e)})))()},getAttributeGrouped:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].getList();case 2:return n=t.sent,t.next=5,e.getAllAttribute();case 5:return r=t.sent,t.abrupt("return",e.groupElement(r,"attributeGroupId").on(n,"id").saveIn("childAttributes"));case 7:case"end":return t.stop()}}),t)})))()},getSalesInfo:function(e,t,n){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a,o,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Object(u["E"])(e,t,n);case 2:if(a=i.sent,0!==a.length){i.next=5;break}return i.abrupt("return",[]);case 5:return o=Object(l["StandardDishesListFactory"])().formatList(a.content),s=o.reduce((function(e,t){var n=e[t.code];n?(n.totalCount+=t.count,n.totalPrice+=t.realPrice*t.count):(e[t.code]={categoryId:parseInt(t.categoryId),categoryTypeId:parseInt(t.categoryTypeId),code:t.code,name:t.name,totalCount:t.count,originPrice:t.originPrice,totalPrice:t.realPrice*t.count,variants:[]},n=e[t.code]);var r=n.variants.find((function(e){return e.identity===t.identity}));return r?r.count+=t.count:n.variants.push({identity:t.identity,count:parseInt(t.count),displayApply:t.displayApply,price:t.realPrice}),e}),{}),i.abrupt("return",Object.values(s).map((function(e){return e.group=r.groupAttribute(e),e})));case 8:case"end":return i.stop()}}),i)})))()},groupAttribute:function(e){var t=this;return e.groupData=d["IKUtils"].deepCopy(this.realAttributes),e.variants.forEach((function(n){n.groupData=d["IKUtils"].deepCopy(t.realAttributes),n.displayApply.forEach((function(t){var r=e.groupData.find((function(e){return e.id===parseInt(t.aId)})),i=n.groupData.find((function(e){return e.id===parseInt(t.aId)}));r&&i&&(i.count||(i.count=0),i.count++,r.count||(r.count=0),r.count++)}))})),e.variants.reduce((function(e,t){return t.displayApply.forEach((function(t){var n=e.find((function(e){return e.agId===t.agId}));n||(n=Object(a["a"])(Object(a["a"])({},t),{},{values:[]}),e.push(n));var r=n.values.find((function(e){return e.aId===t.aId}));r?r.count++:n.values.push(Object(a["a"])(Object(a["a"])({},t),{},{count:1}))})),e}),[])},loadSalesData:function(e,t,n){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,r.getSalesInfo(e,t,n);case 2:a=i.sent,o=a.reduce((function(e,t){return e.totalPrice+=t.totalPrice,e.groupData.forEach((function(e,n){var r;e.count||(e.count=0),e.count+=null!==(r=t.groupData[n].count)&&void 0!==r?r:0})),e.totalCount+=t.totalCount,e}),{code:"-",name:"Alle",totalPrice:0,originPrice:0,totalCount:0,groupData:d["IKUtils"].deepCopy(r.realAttributes),variants:[]}),r.unfilteredData=[o].concat(a),r.displayData=r.unfilteredData.filter((function(e){return!r.fixedHideDishes.includes(e.name)}));case 6:case"end":return i.stop()}}),i)})))()},loadData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dates=[Object(f["a"])(0),Object(f["a"])(0)],t.next=3,e.getAttributeGrouped();case 3:return e.attributeData=t.sent,t.next=6,p["a"].getList();case 6:return e.allFixedDishesData=t.sent,e.hourStart=""===e.hourStart?"00:00:00":e.hourStart,e.hourEnd=""===e.hourEnd?"23:59:59":e.hourEnd,t.next=11,e.loadSalesData(e.dates,e.hourStart,e.hourEnd);case 11:localStorage.getItem("fixedHideAttribute")&&(e.fixedHideAttributes=JSON.parse(localStorage.getItem("fixedHideAttribute"))),localStorage.getItem("fixedHideDishes")&&(e.fixedHideDishes=JSON.parse(localStorage.getItem("fixedHideDishes"))),e.fixedHideDishes.length>0?e.allDishData=e.allFixedDishesData.filter((function(t){return!e.fixedHideDishes.includes(t.dishName)})):e.allDishData=d["IKUtils"].deepCopy(e.allFixedDishesData);case 14:case"end":return t.stop()}}),t)})))()},print:function(){if(Date.parse(this.dates[0])>Date.parse(this.dates[1])){var e=[this.dates[1],this.dates[0]];this.dates[0]=e[0],this.dates[1]=e[1]}var t=[this.dates[0]+" "+this.hourStart,this.dates[1]+" "+this.hourEnd];y["a"].showConfirm("Bist du sicher?","Möchten Sie die Statistike Bon drucken?",(function(){Object(u["g"])(t).then((function(){y["a"].toast("Erfolgreich drucken!")}))}))}}},g=h,m=(n("32f5"),n("2877")),b=n("6544"),v=n.n(b),I=n("8336"),D=n("b0af"),O=n("99d9"),C=n("62ad"),w=n("a523"),N=n("8fea"),j=n("2e4b"),E=n("169a"),T=n("132d"),x=n("0fd9"),P=n("b974"),A=n("2fa4"),S=n("8654"),K=n("c964"),k=n("71d9"),G=n("2a7f"),L=Object(m["a"])(g,r,i,!1,null,null,null);t["default"]=L.exports;v()(L,{VBtn:I["a"],VCard:D["a"],VCardText:O["c"],VCol:C["a"],VContainer:w["a"],VDataTable:N["a"],VDatePicker:j["a"],VDialog:E["a"],VIcon:T["a"],VRow:x["a"],VSelect:P["a"],VSpacer:A["a"],VTextField:S["a"],VTimePicker:K["a"],VToolbar:k["a"],VToolbarTitle:G["a"]})},ee60:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("4eed")),i=n("633c");function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n,r,i,a,o){try{var u=e[a](o),l=u.value}catch(s){return void n(s)}u.done?t(l):Promise.resolve(l).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}var p={id:{type:i.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{}},d={load:function(){var e=c((function*(e){return(yield i.hillo.get("Complex.php",u({op:"showAllConsumeTypeInfo",lang:r.default.lang()},e))).content}));function t(t){return e.apply(this,arguments)}return t}()},f=i.IKDataEntity.ModelFactory(p,d);t.default=f},ff51:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a15b");function r(e){var t=new Date,n=t.getTime(),r=864e5,i=n+e*r,a=new Date(i),o=a.getFullYear(),u=a.getMonth()+1,l=a.getDate();return[o,u,l].join("-")}}}]);
//# sourceMappingURL=chunk-743952d4.3658739d.js.map