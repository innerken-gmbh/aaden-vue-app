(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7aa0cd3a"],{ccb3:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"printText",attrs:{cols:"12",md:"4"}},[t.rawAddressInfo?a("base-material-card",{staticClass:"px-5 py-3 ",attrs:{color:"indigo",icon:"mdi-account-cash",inline:""},scopedSlots:t._u([{key:"after-heading",fn:function(){return[a("div",{staticClass:"display-2 font-weight-light"},[t._v(" "+t._s(t.$t("地址信息"))+" ")])]},proxy:!0}],null,!1,2582449564)},[a("v-row",[a("v-col",{attrs:{cols:"12",md:"12"}},[a("address-info-block",{attrs:{"address-info":t.rawAddressInfo}})],1)],1)],1):t._e(),t.rawAddressInfo?a("base-material-card",{staticClass:"px-5 py-3 ",attrs:{color:"indigo",icon:"mdi-printer",inline:""},scopedSlots:t._u([{key:"after-heading",fn:function(){return[a("div",{staticClass:"display-2 font-weight-light"},[t._v(" "+t._s(t.$t("打印订单"))+" ")])]},proxy:!0}],null,!1,1893731830)},[a("v-row",[a("v-col",{staticClass:"d-flex spaceBetween",staticStyle:{width:"100%"},attrs:{cols:"12",md:"12"}},[a("div",{staticClass:"mr-2"},[a("v-alert",{attrs:{border:"left","colored-border":"",color:"deep-purple accent-4",elevation:"2"}},[t._v(" "+t._s(t.$t("此处打印的订单仅供参考,不可作为Rechnung使用"))+" ")])],1),a("v-btn",{attrs:{right:"",large:"",color:"success",dark:""},on:{click:function(e){e.stopPropagation(),t.printDialogShow=!0}}},[t._v(" "+t._s(t.$t("打印"))+" ")])],1)],1)],1):t._e()],1),a("v-col",{attrs:{id:"printText",cols:"12",md:"8"}},[a("base-material-card",{staticClass:"px-5 py-3 ",attrs:{color:"indigo",icon:"mdi-vuetify",inline:""},scopedSlots:t._u([{key:"after-heading",fn:function(){return[a("div",{staticClass:"display-2 font-weight-light"},[t._v(" "+t._s(t.$t("菜品信息"))+" ")])]},proxy:!0}])},[a("v-text-field",{staticClass:"ml-auto",staticStyle:{"max-width":"250px"},attrs:{"append-icon":"mdi-magnify","hide-details":"",label:t.$t("Search"),"single-line":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-divider",{staticClass:"mt-3"}),a("v-data-table",{attrs:{"fixed-header":!0,headers:t.headers,items:t.desserts,"items-per-page":15,loading:t.loading,search:t.search,"item-key":"id","multi-sort":""},on:{"update:search":function(e){t.search=e}},scopedSlots:t._u([{key:"item.name",fn:function(e){var i=e.item;return[t._v(" "+t._s(i.name)+" "),i.hasMod>0?a("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]}},{key:"item.mod",fn:function(e){var i=e.item;return[a("div",{attrs:{colspan:t.headers.length}},[a("dish-modification",{attrs:{"dish-item":i}})],1)]}}])}),a("v-row",[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){return t.goback()}}},[t._v(" "+t._s(t.$t("返回"))+" ")]),a("v-spacer"),a("v-btn",{directives:[{name:"print",rawName:"v-print",value:"#printText",expression:"'#printText'"}],staticClass:"mb-2",attrs:{color:"primary",dark:""}},[t._v(" "+t._s(t.$t("打印"))+" ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400px"},model:{value:t.printDialogShow,callback:function(e){t.printDialogShow=e},expression:"printDialogShow"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v(" "+t._s(t.$t("打印此订单?"))+" ")]),a("v-card-text",{attrs:{id:"detail"}},[a("v-card-subtitle",[t._v(t._s(t.$t("地址信息")))]),a("v-divider"),a("address-info-block",{attrs:{"address-info":t.rawAddressInfo}}),a("v-card-subtitle",[t._v(t._s(t.$t("订单信息")))]),a("v-divider"),a("dish-info-block",{attrs:{"render-list":!0,"dish-orders":t.desserts}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.printDialogShow=!1}}},[t._v(" "+t._s(t.$t("Cancel"))+" ")]),a("v-btn",{directives:[{name:"print",rawName:"v-print",value:"#detail",expression:"'#detail'"}],attrs:{color:"green darken-1",text:""},on:{click:function(e){t.printDialogShow=!1}}},[t._v(" "+t._s(t.$t("打印"))+" ")])],1)],1)],1),a("v-col",{attrs:{cols:"12"}},[a("base-material-card",{staticClass:"px-5 py-3 ",attrs:{color:"indigo",icon:"mdi-account-cash",inline:""},scopedSlots:t._u([{key:"after-heading",fn:function(){return[a("div",{staticClass:"display-2 font-weight-light"},[t._v(" "+t._s(t.$t("订单信息"))+" ")])]},proxy:!0}])},[a("v-data-table",{attrs:{"fixed-header":!1,headers:t.infoHeaders,items:t.myinfoList,loading:t.loading,"items-per-page":30,"hide-default-footer":"","hide-default-header":""},scopedSlots:t._u([{key:"item.keyname",fn:function(e){var i=e.item;return[a("span",{staticClass:"font-weight-black"},[t._v(" "+t._s(i.keyname)+" ")])]}},{key:"footer",fn:function(){return[a("v-toolbar",{attrs:{color:"white",flat:""}},[a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},i),[t._v(" "+t._s(t.$t("修改支付方式"))+" ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.$t("请选择新的支付方式")))])]),a("v-card-text",[a("v-container",[a("v-row",[[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{items:t.payment,"item-text":"name","item-value":"paymentMethodId",label:t.$t("chooseyourpayment"),"return-object":""},model:{value:t.editedItem,callback:function(e){t.editedItem=e},expression:"editedItem"}})],1)]],2)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" "+t._s(t.$t("Cancel"))+" ")]),a("v-btn",{attrs:{color:"blue darken-1"},on:{click:t.save}},[t._v(" "+t._s(t.$t("Save"))+" ")])],1)],1)],1)],1)]},proxy:!0}])})],1)],1)],1)],1)},n=[],s=(a("99af"),a("7db0"),a("d81d"),a("b0c0"),a("ac1f"),a("1276"),a("b85c")),o=a("5530"),r=a("0a61"),l=a("3405"),d=a("9225"),c=a("ccdd"),m=a("f683"),u=a("4907"),f=a("d926"),v={components:{DishModification:f["default"],DishInfoBlock:u["default"],AddressInfoBlock:m["default"]},props:{id:{default:"-1",type:String}},data:function(){return{loading:!1,currentIndex:0,orderId:this.id,billData:{},amountList:[],search:"",printDialogShow:!1,expandedItem:[],headers:[{text:this.$i18n.t("code"),align:"start",sortable:!1,value:"code"},{text:this.$i18n.t("name"),value:"name"},{text:this.$i18n.t("note"),value:"note"},{text:this.$i18n.t("modification"),value:"mod"},{text:this.$i18n.t("createTimestamp"),value:"stamp"},{text:this.$i18n.t("price"),value:"price"},{text:this.$i18n.t("count"),value:"sumCount"},{text:this.$i18n.t("sumPrice"),value:"totalPrice"}],desserts:[],dialog:!1,PaymentRes:[],rawAddressInfo:"",infoHeaders:[{value:"keyname",align:"left"},{value:"value",align:"right"}],myinfoList:[],payment:[],paymentStatus:"",editedItem:{paymentMethodId:-1,name:""},defaultItem:{paymentMethodId:-1,name:""}}},computed:{src:function(){return!!this.billData.tableInfo&&"".concat(l["a"].SQR+l["a"].genSQUrl,"TableName=")+"".concat(this.billData.tableInfo.TableName,"&RestaurantId=1&SeatId=1&lang=").concat(d["a"].locale.toUpperCase())}},watch:{dialog:function(t){t||this.close()}},created:function(){this.reloadItem(this.orderId)},mounted:function(){},methods:{loadDetail:function(t){var e=this;Object(r["h"])(t).then((function(t){e.billData=t,e.desserts=e.billData.billOrderInfo.map((function(t,e){return Object(o["a"])({id:e,agNameArr:t.hasMod>0?t.agName.split(","):[],aNameArr:t.hasMod>0?t.aName.split(","):[]},t)})),e.editedItem.paymentMethodId=e.billData.billInfo.payMethod;var a,i=Object(s["a"])(e.PaymentRes);try{for(i.s();!(a=i.n()).done;){var n=a.value;n.id===e.editedItem.paymentMethodId&&(e.editedItem.name=n.name)}}catch(r){i.e(r)}finally{i.f()}e.rawAddressInfo=JSON.parse(e.billData.billInfo.rawAddressInfo),e.paymentStatus="1"===e.billData.billInfo.paymentStatus?e.$i18n.t("已支付"):e.$i18n.t("未支付"),e.myinfoList=[{keyname:e.$i18n.t("订单号"),value:e.billData.billInfo.id},{keyname:e.$i18n.t("servantName"),value:e.billData.billInfo.servantName},{keyname:e.$i18n.t("tableName"),value:e.billData.billInfo.tableName},{keyname:e.$i18n.t("startTime"),value:e.billData.billInfo.startTime},{keyname:e.$i18n.t("结账时间"),value:e.billData.billInfo.endTime},{keyname:e.$i18n.t("payMethod"),value:e.editedItem.name},{keyname:e.$i18n.t("支付状态"),value:e.paymentStatus},{keyname:e.$i18n.t("personCount"),value:e.billData.billInfo.personCount},{keyname:e.$i18n.t("tipIncome"),value:e.billData.billInfo.tipIncome},{keyname:e.$i18n.t("总税额"),value:e.billData.billInfo.tax},{keyname:e.$i18n.t("totalPrice"),value:e.billData.billInfo.totalPrice}]}))},reloadItem:function(t){var e=this;Object(r["f"])().then((function(a){e.PaymentRes=a.content,e.formatItem(),e.loadDetail(t)}))},findLangInArray:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d["a"].locale;return t.find((function(t){return t.lang.toLowerCase()===e.toLowerCase()}))},formatItem:function(){var t,e=Object(s["a"])(this.PaymentRes);try{for(e.s();!(t=e.n()).done;){var a=t.value;a.name=this.findLangInArray(a.langs).name,this.payment.push({paymentMethodId:a.id,name:a.name})}}catch(i){e.e(i)}finally{e.f()}},goback:function(){this.$router.history.go(-1)},save:function(){var t=this;console.log(this.editedItem.paymentMethodId),Object(r["d"])(this.editedItem.paymentMethodId,this.orderId).then((function(){c["a"].toast("编辑成功"),t.loadDetail(t.orderId),t.close()}))},close:function(){this.dialog=!1}}},p=v,h=a("2877"),b=a("6544"),y=a.n(b),g=a("0798"),I=a("8336"),k=a("b0af"),_=a("99d9"),x=a("62ad"),w=a("a523"),$=a("8fea"),C=a("169a"),D=a("ce7e"),S=a("0fd9"),V=a("b974"),T=a("2fa4"),A=a("8654"),M=a("71d9"),N=Object(h["a"])(p,i,n,!1,null,"6f856a81",null);e["default"]=N.exports;y()(N,{VAlert:g["a"],VBtn:I["a"],VCard:k["a"],VCardActions:_["a"],VCardSubtitle:_["b"],VCardText:_["c"],VCardTitle:_["d"],VCol:x["a"],VContainer:w["a"],VDataTable:$["a"],VDialog:C["a"],VDivider:D["a"],VRow:S["a"],VSelect:V["a"],VSpacer:T["a"],VTextField:A["a"],VToolbar:M["a"]})},ccdd:function(t,e,a){"use strict";var i=a("5530"),n=a("633c");e["a"]=Object(i["a"])({},n["b"])}}]);
//# sourceMappingURL=chunk-7aa0cd3a.cc8240ec.js.map