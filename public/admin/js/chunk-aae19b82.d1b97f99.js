(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aae19b82"],{"5c3a8":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{id:"dashboard",fluid:"",tag:"section"}},[i("v-row",[i("v-col",{attrs:{cols:"12",md:"12"}},[i("v-card",{attrs:{color:"basil"}},[i("v-card-title",{staticClass:"text-center justify-center py-6"},[i("h1",{staticClass:"font-weight-bold display-3 basil--text"},[t._v(" "+t._s(t.restaurantName)+" ")])]),i("v-tabs",{attrs:{"background-color":"transparent",color:"basil",grow:""}},[t._l(t.items,(function(e,a){return i("v-tab",{key:a},[t._v(" "+t._s(e)+" ")])})),i("v-tab-item",[i("v-row",[i("v-col",{attrs:{cols:"12",md:"8"}},[i("base-material-card",{staticClass:"px-5 py-3",attrs:{id:"coloured-line",color:"warning",icon:"mdi-chart-timeline-variant"},scopedSlots:t._u([{key:"after-heading",fn:function(){return[i("div",{staticClass:"display-1 font-weight-light mt-2"},[t._v(" "+t._s(t.$t("销售数据统计"))+" ")])]},proxy:!0}])},[i("chartist",{staticClass:"mt-3",staticStyle:{"max-height":"300px"},attrs:{data:t.salesData,options:t.salesDataChart.options,type:"Line"}}),i("v-divider",{staticClass:"ma-3"}),i("div",{staticClass:"px-3"},[i("div",{staticClass:"body-2 text-uppercase grey--text font-weight-bold mb-3"},[t._v(" Legend ")]),i("v-row",{staticClass:"ma-0",attrs:{align:"center"}},[i("v-avatar",{staticClass:"mr-1",attrs:{color:"info",size:"12"}}),i("span",{staticClass:"mr-3 font-weight-light"},[t._v(t._s(t.$t("Food")))]),i("v-avatar",{staticClass:"mr-1",attrs:{color:"red",size:"12"}}),i("span",{staticClass:"mr-3 font-weight-light"},[t._v(t._s(t.$t("Drinks")))])],1)],1)],1)],1),i("v-col",{attrs:{cols:"12",md:"4"}},[void 0!==t.realTimeIncomeList?i("v-card",[i("v-card-title",{staticClass:"subheading font-weight-bold"},[t._v(" "+t._s(t.$t("今日实时销售统计"))+" "),i("v-btn",{attrs:{text:""},on:{click:t.reloadData}},[t._v(" "+t._s(t.$t("刷新"))+" ")])],1),i("v-divider"),i("div",{staticClass:"py-6 px-6"},[i("div",{staticClass:"d-flex justify-space-between text-subtitle-2 grey--text text--darken-2"},[i("div",[t._v(t._s(t.$t("今日截止至现在销售额(含未结单)")))]),i("div",[t._v(t._s(t.realTimeIncomeList.sumIncome)+"€")])]),i("div",{staticClass:"d-flex justify-space-between text-subtitle-2 grey--text text--darken-2"},[i("div",[t._v(t._s(t.$t("未结单营业额")))]),i("div",[t._v(t._s(t.realTimeIncomeList.unpaid)+"€")])]),i("div",{staticClass:"d-flex justify-space-between font-weight-black text-subtitle-2"},[i("div",[t._v(t._s(t.$t("刷卡额")))]),i("div",[t._v(t._s(t.cardAmount)+"€")])]),i("div",{staticClass:"d-flex justify-space-between font-weight-black text-subtitle-2"},[i("div",[t._v(t._s(t.$t("现金额")))]),i("div",[t._v(t._s(t.cashAmount)+"€")])]),t.realTimeIncomeList.takeawayAmount?i("div",{staticClass:"d-flex justify-space-between font-weight-black text-subtitle-2"},[i("div",[t._v(t._s(t.$t("外卖营业额")))]),i("div",[t._v(t._s(t.realTimeIncomeList.takeawayAmount)+"€")])]):t._e()]),i("v-divider",{staticClass:"mx-2 my-2"}),i("v-card-title",{staticClass:"subheading font-weight-bold"},[t._v(" "+t._s(t.$t("未结账桌子"))+" ")]),i("v-divider"),i("div",{staticClass:"py-6 px-6"},t._l(t.realTimeIncomeList.unpaidTable,(function(e,a){return i("div",{key:a,staticClass:"d-flex justify-space-between text-subtitle-2"},[i("div",[t._v(t._s(t.$t("桌号"))+": "+t._s(e.tableName))]),i("div",[t._v(t._s(e.totalPrice)+"€")])])})),0)],1):t._e()],1)],1)],1),i("v-tab-item",[i("base-material-card",{staticClass:"px-5 py-3",attrs:{color:"primary",icon:"mdi-account",inline:""},scopedSlots:t._u([{key:"after-heading",fn:function(){return[i("div",{staticClass:"display-1 font-weight-light mt-2"},[t._v(" "+t._s(t.$t("随时更新，随时掌握营销状况"))+" ")])]},proxy:!0}])},[i("v-card-text",[i("v-data-table",{attrs:{headers:t.servantHeader,items:t.thisMonthServantRank},scopedSlots:t._u([{key:"item.photo",fn:function(e){var a=e.item;return[i("v-avatar",{attrs:{tile:""}},[i("v-img",{attrs:{src:t.servantImgRoot+a.photo,height:"48px",width:"48px"}})],1)]}}])})],1)],1)],1)],2)],1)],1)],1),i("v-row",[i("v-col",{attrs:{lg:"3",cols:"12"}},[i("base-material-card",{attrs:{color:"error",icon:"mdi-run-fast",title:t.$t("快速操作")}},[i("v-list",[i("v-list-item",{on:{click:t.toZbon}},[i("v-list-item-icon",[i("v-icon",[t._v(" mdi-format-list-bulleted ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$t("Zbon列表"))+" ")])],1)],1),i("v-list-item",{on:{click:t.toAllBills}},[i("v-list-item-icon",[i("v-icon",[t._v(" mdi-calendar-account ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$t("全部账单"))+" ")])],1)],1),i("v-list-item",{on:{click:t.addDishes}},[i("v-list-item-icon",[i("v-icon",[t._v(" mdi-pencil ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$t("菜品管理"))+" ")])],1)],1),i("v-list-item",{on:{click:t.addCategories}},[i("v-list-item-icon",[i("v-icon",[t._v(" mdi-domain ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$t("标签管理"))+" ")])],1)],1),i("v-list-item",{on:{click:t.dishStatistic}},[i("v-list-item-icon",[i("v-icon",[t._v(" mdi-dialpad ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$t("菜品统计"))+" ")])],1)],1),i("v-list-item",{on:{click:t.dailyBill}},[i("v-list-item-icon",[i("v-icon",[t._v(" mdi-bulletin-board ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$t("本日总汇"))+" ")])],1)],1)],1)],1)],1),[i("v-col",{attrs:{lg:"9",cols:"12"}},[i("v-row",[i("v-col",{attrs:{cols:"12",md:"6"}},[i("base-material-stats-card",{attrs:{color:"info",icon:"mdi-twitter","sub-icon":"mdi-clock","sub-text":t.$t("Just Updated"),title:t.$t("今日营业总额"),value:"€"+t.todayInfo.sumIncome}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("base-material-stats-card",{attrs:{color:"primary",icon:"mdi-poll","sub-icon":"mdi-tag","sub-text":t.$t("Tracked from Aaden Analytics"),title:t.$t("今日用餐总人数"),value:t.todayInfo.sumPersonCount}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("base-material-stats-card",{attrs:{color:"success",icon:"mdi-store","sub-icon":"mdi-calendar","sub-text":"",title:t.$t("使用中的桌子"),value:t.tableUsageStatus.inUse}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("base-material-stats-card",{attrs:{color:"orange",icon:"mdi-sofa","sub-icon":"mdi-alert",title:t.$t("本月平均翻台率"),"sub-text":t.$t("翻台率是指桌子被使用的频率"),value:t.tableRenew.toFixed(2)+"%"}})],1)],1)],1)]],2),i("v-row",[i("v-col",{attrs:{cols:"12",md:"6"}},[i("base-material-card",{staticClass:"px-5 py-3",attrs:{color:"pink",icon:"mdi-heart",inline:""},scopedSlots:t._u([{key:"after-heading",fn:function(){return[i("div",{staticClass:"display-1 font-weight-light mt-2"},[t._v(" "+t._s(t.$t("本周内最受欢迎的精美食品"))+" ")])]},proxy:!0}])},[i("v-card-text",[i("v-data-table",{attrs:{headers:t.dishesHeader,items:t.thisWeekMostPopularDishes},scopedSlots:t._u([{key:"item.photo",fn:function(e){var a=e.item;return[i("v-avatar",{attrs:{tile:""}},[i("v-img",{attrs:{src:t.dishImgRoot+a.image,height:"48px",width:"48px"}})],1)]}}])})],1)],1)],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-card",[i("v-card-title",{staticClass:"subheading font-weight-bold"},[t._v(" "+t._s(t.$t("热销菜品分布"))+" "),i("v-btn",{attrs:{text:""},on:{click:t.changeDateToDay}},[t._v(" 查看本日 ")]),i("v-btn",{attrs:{text:""},on:{click:t.changeDateToMonth}},[t._v(" 查看本月 ")])],1),i("v-divider"),i("v-list",{attrs:{dense:""}},t._l(t.dishIncomeList,(function(e,a){return i("v-list-item",{key:a},[i("v-list-item-content",[t._v(" "+t._s(t.dishIncomeList[a].name)+": ")]),i("v-list-item-content",[t._v(" "+t._s(t.dishIncomeList[a].sumPrice)+" ")])],1)})),1)],1)],1)],1)],1)},s=[],n=(i("7db0"),i("4160"),i("a15b"),i("13d5"),i("b0c0"),i("b680"),i("ac1f"),i("1276"),i("159b"),i("96cf"),i("1da1")),o=i("b85c"),r=i("0a61"),c=i("3405"),l=i("633c"),d=i("ff51"),u={name:"DashboardDashboard",data:function(){return{items:[this.$i18n.t("销售数据统计"),this.$i18n.t("跑堂排行")],salesDataChart:{options:{low:0,chartPadding:{top:0,right:0,bottom:0,left:0}}},servantHeader:[{text:"Name",value:"name"},{text:this.$i18n.t("income"),value:"income",align:"right"},{text:this.$i18n.t("billCount"),value:"billCount",align:"right"}],dishesHeader:[{text:this.$i18n.t("Ranking"),value:"rank"},{text:this.$i18n.t("image"),value:"photo",align:"center"},{text:this.$i18n.t("name"),value:"name",align:"right"},{text:this.$i18n.t("price"),value:"price",align:"right"},{text:this.$i18n.t("count"),value:"sumCount",align:"right"}],indexData:{sevenDaysFoodDrinkIncome:[],thisMonthServantRank:[],realTimeIncomeList:[],todayInfo:{sumIncome:"0"},tableUsageStatus:{inUse:"0"},thisMonthAverageTablesRenewRate:0},restaurantName:"",dishIncomeList:[],dishIncomeWithPLog:[],cashAmount:0,cardAmount:0}},computed:{realTimeIncomeList:function(){return this.indexData.realtimeIncomeAndInfo?this.indexData.realtimeIncomeAndInfo:void 0},servantImgRoot:function(){return this.$store.getters.rootUrl+c["a"].servantRoot},dishImgRoot:function(){return this.$store.getters.rootUrl+c["a"].dishImageRoot},salesData:function(){var t,e=[],i=[],a=[],s=Object(o["a"])(this.indexData.sevenDaysFoodDrinkIncome);try{for(s.s();!(t=s.n()).done;){var n=t.value,r=n.find((function(t){return"foods"===t.name.toLowerCase()})),c=n.find((function(t){return"drinks"===t.name.toLowerCase()}));e.push(r.dateDisplay),i.push(r.income),a.push(c.income)}}catch(l){s.e(l)}finally{s.f()}return{labels:e.reverse(),series:[i.reverse(),a.reverse()]}},thisMonthServantRank:function(){return this.indexData.thisMonthServantRank},todayInfo:function(){return this.indexData.todayInfo},tableUsageStatus:function(){return this.indexData.tableUsageStatus},tableRenew:function(){return this.indexData.thisMonthAverageTablesRenewRate},thisWeekMostPopularDishes:function(){return this.indexData.thisWeekMostPopularDishes},totalSales:function(){return this.sales.reduce((function(t,e){return t+e.salesInM}),0)}},created:function(){this.onceData(),this.reloadData()},methods:{changeDateToDay:function(){this.dishIncomeList=this.indexData.thisDayIncomePieChart},changeDateToMonth:function(){this.dishIncomeList=this.indexData.thisMonthIncomePieChart},reprint:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.model.reprint(t);case 2:l["IKUtils"].toast();case 3:case"end":return i.stop()}}),i)})))()},toZbon:function(){this.$router.push({path:"/Bills/zbonlist"})},toAllBills:function(){this.$router.push({path:"/Bills/history-bills"})},addDishes:function(){this.$router.push({path:"/dishes/dishes-manage"})},addCategories:function(){this.$router.push({path:"/dishes/labels-manage"})},dishStatistic:function(){this.$router.push({path:"/dishes/dish-statistics"})},dailyBill:function(){this.$router.push({path:"/Bills/today-bills"})},onceData:function(){var t=this;Object(r["t"])().then((function(e){var i=[];i=e.content[0].name.split("<BR>"),t.restaurantName=i.join(" ")}))},calculateAmount:function(t){var e=this;t.forEach((function(t){null!==t.payLogs?t.payLogs.forEach((function(t){"2"===t.paymentMethodId&&(e.cardAmount+=parseFloat(t.amount)),"1"===t.paymentMethodId&&(e.cashAmount+=parseFloat(t.amount))})):("2"===t.payMethod&&(e.cardAmount+=parseFloat(t.totalPrice)),"1"===t.payMethod&&(e.cashAmount+=parseFloat(t.totalPrice)))})),this.cardAmount=this.cardAmount.toFixed(2),this.cashAmount=this.cashAmount.toFixed(2)},reloadData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["r"])().then((function(e){t.indexData=e,t.dishIncomeList=t.indexData.thisMonthIncomePieChart}));case 2:return i=[Object(d["a"])(0),Object(d["a"])(0)].join(" - "),e.next=5,Object(r["i"])(i).then((function(e){t.dishIncomeWithPLog=e.content,t.calculateAmount(t.dishIncomeWithPLog)}));case 5:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){clearTimeout(this.timer1),clearTimeout(this.timer2),this.timer1=null,this.timer2=null},complete:function(t){this.list[t]=!this.list[t]}}},m=u,v=(i("674b"),i("2877")),h=i("6544"),f=i.n(h),b=i("8212"),p=i("8336"),g=i("b0af"),_=i("99d9"),x=i("62ad"),y=i("a523"),w=i("8fea"),I=i("ce7e"),C=i("132d"),D=i("adda"),$=i("8860"),k=i("da13"),L=i("5d23"),T=i("34c3"),A=i("0fd9"),R=i("71a3"),V=i("c671"),j=i("fe57"),M=Object(v["a"])(m,a,s,!1,null,null,null);e["default"]=M.exports;f()(M,{VAvatar:b["a"],VBtn:p["a"],VCard:g["a"],VCardText:_["c"],VCardTitle:_["d"],VCol:x["a"],VContainer:y["a"],VDataTable:w["a"],VDivider:I["a"],VIcon:C["a"],VImg:D["a"],VList:$["a"],VListItem:k["a"],VListItemContent:L["b"],VListItemIcon:T["a"],VListItemTitle:L["d"],VRow:A["a"],VTab:R["a"],VTabItem:V["a"],VTabs:j["a"]})},"674b":function(t,e,i){"use strict";var a=i("d1f7"),s=i.n(a);s.a},d1f7:function(t,e,i){},ff51:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("a15b");function a(t){var e=new Date,i=e.getTime(),a=864e5,s=i+t*a,n=new Date(s),o=n.getFullYear(),r=n.getMonth()+1,c=n.getDate();return[o,r,c].join("-")}}}]);
//# sourceMappingURL=chunk-aae19b82.d1b97f99.js.map