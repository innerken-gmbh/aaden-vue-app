{"version":3,"sources":["webpack:///./src/views/Bills/ZbonList.vue?964e","webpack:///src/views/Bills/ZbonList.vue","webpack:///./src/views/Bills/ZbonList.vue?5a1b","webpack:///./src/views/Bills/ZbonList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","staticClass","_v","attrs","on","$event","currentZbonSelected","_l","item","key","zbonNumber","_s","toTimestamp","$t","billContent","fTotal","fTotalTe","fTotalTax","total","index","taxRatePercentage","groupTotal","nettoumsatz","umsatzsteuer","fromAndEnd","fromTimestamp","reprintZbon","printZbon","staticRenderFns","t","component","VBtn","VCard","VList","VListItem","VListItemActionText","VListItemContent","VListItemGroup","VListItemSubtitle","VListItemTitle","VSubheader"],"mappings":"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","file":"js/chunk-2d0d3c98.85fb918a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"grid\",\"grid-template-columns\":\"1fr 2fr\"}},[_c('v-card',[_c('v-list',[_c('v-list-item',[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"font-weight-bold\"},[_vm._v(\" ZbonNr. \")])],1),_c('v-list-item-action-text',{staticClass:\"font-weight-bold\"},[_vm._v(\" ErstellenZeit \")])],1),_c('v-list-item-group',{staticStyle:{\"max-height\":\"calc(100vh - 64px)\",\"overflow\":\"scroll\"},attrs:{\"mandatory\":\"\"}},[_c('v-list-item',{on:{\"click\":function($event){_vm.currentZbonSelected=null}}},[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"display-2\"},[_vm._v(\" 本日ZBon \")])],1),_c('v-list-item-action-text',[_vm._v(\" 还未生成 \")])],1),_vm._l((_vm.zbonRecordList),function(item){return _c('v-list-item',{key:item.zbonNumber,on:{\"click\":function($event){_vm.currentZbonSelected=item}}},[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"display-2\"},[_vm._v(\" \"+_vm._s(item.zbonNumber)+\" \")])],1),_c('v-list-item-action-text',[_vm._v(\" \"+_vm._s(item.toTimestamp)+\" \")])],1)})],2)],1)],1),_c('div',{staticStyle:{\"display\":\"grid\",\"grid-template-columns\":\"1fr 1fr\"}},[_c('div',{staticClass:\"pa-4\"},[_c('v-list',{attrs:{\"subheader\":\"\",\"two-line-line\":\"\"}},[_c('v-subheader',{staticClass:\"display-2\"},[_vm._v(\" \"+_vm._s(_vm.$t('Umsatz'))+\" \")]),_c('v-list-item',[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(_vm.$t('All')))]),_c('v-list-item-subtitle',[_vm._v(_vm._s(_vm.$t('Umsatz'))+\": \"+_vm._s(_vm.billContent.fTotal))]),_c('v-list-item-subtitle',[_vm._v(\" \"+_vm._s(_vm.$t('Netto'))+\": \"+_vm._s(_vm.billContent.fTotalTe)+\" \")]),_c('v-list-item-subtitle',[_vm._v(\" \"+_vm._s(_vm.$t('Steuer'))+\":\"+_vm._s(_vm.billContent.fTotalTax)+\" \")])],1)],1),_vm._l((_vm.taxGroupInfo),function(total,index){return [_c('v-list-item',{key:total.taxRatePercentage+'-'+index},[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\" \"+_vm._s(total.taxRatePercentage)+\"% \")]),_c('v-list-item-subtitle',[_vm._v(\" \"+_vm._s(_vm.$t('Umsatz'))+\": \"+_vm._s(total.groupTotal)+\" \")]),_c('v-list-item-subtitle',[_vm._v(\" \"+_vm._s(_vm.$t('Netto'))+\": \"+_vm._s(total.nettoumsatz)+\" \")]),_c('v-list-item-subtitle',[_vm._v(\" \"+_vm._s(_vm.$t('Steuer'))+\":\"+_vm._s(total.umsatzsteuer)+\" \")])],1)],1)]})],2)],1),_c('div',{staticClass:\"pa-4\"},[_c('div',{staticClass:\"display-2 d-flex justify-space-between\"},[_c('div',[_vm._v(\"From:\")]),_c('div',[_vm._v(_vm._s(_vm.fromAndEnd.fromTimestamp))])]),_c('div',{staticClass:\"display-2 d-flex justify-space-between\"},[_c('div',[_vm._v(\"To:\")]),_c('div',[_vm._v(_vm._s(_vm.fromAndEnd.toTimestamp))])]),(_vm.currentZbonSelected)?_c('v-btn',{staticClass:\"mt-2\",attrs:{\"block\":\"\",\"color\":\"success\"},on:{\"click\":function($event){return _vm.reprintZbon(_vm.currentZbonSelected.zbonNumber)}}},[_vm._v(\" 重新打印ZBon \")]):_c('v-btn',{staticClass:\"mt-2\",attrs:{\"block\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.printZbon()}}},[_vm._v(\" 打印ZBon \")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div style=\"display: grid;grid-template-columns: 1fr 2fr\">\n    <v-card>\n      <v-list>\n        <v-list-item>\n          <v-list-item-content>\n            <v-list-item-title class=\"font-weight-bold\">\n              ZbonNr.\n            </v-list-item-title>\n          </v-list-item-content>\n          <v-list-item-action-text class=\"font-weight-bold\">\n            ErstellenZeit\n          </v-list-item-action-text>\n        </v-list-item>\n        <v-list-item-group\n          mandatory\n          style=\"max-height: calc(100vh - 64px);overflow: scroll\"\n        >\n          <v-list-item @click=\"currentZbonSelected=null\">\n            <v-list-item-content>\n              <v-list-item-title class=\"display-2\">\n                本日ZBon\n              </v-list-item-title>\n            </v-list-item-content>\n            <v-list-item-action-text>\n              还未生成\n            </v-list-item-action-text>\n          </v-list-item>\n          <v-list-item\n            v-for=\"item in zbonRecordList\"\n            :key=\"item.zbonNumber\"\n            @click=\"currentZbonSelected=item\"\n          >\n            <v-list-item-content>\n              <v-list-item-title class=\"display-2\">\n                {{ item.zbonNumber }}\n              </v-list-item-title>\n            </v-list-item-content>\n            <v-list-item-action-text>\n              {{ item.toTimestamp }}\n            </v-list-item-action-text>\n          </v-list-item>\n        </v-list-item-group>\n      </v-list>\n    </v-card>\n\n    <div\n      style=\"display: grid;grid-template-columns: 1fr 1fr\"\n    >\n      <div\n        class=\"pa-4\"\n      >\n        <v-list\n          subheader\n          two-line-line\n        >\n          <v-subheader class=\"display-2\">\n            {{ $t('Umsatz') }}\n          </v-subheader>\n          <v-list-item>\n            <v-list-item-content>\n              <v-list-item-title>{{ $t('All') }}</v-list-item-title>\n              <v-list-item-subtitle>{{ $t('Umsatz') }}: {{ billContent.fTotal }}</v-list-item-subtitle>\n              <v-list-item-subtitle>\n                {{ $t('Netto') }}: {{ billContent.fTotalTe }}\n              </v-list-item-subtitle>\n              <v-list-item-subtitle>\n                {{ $t('Steuer') }}:{{ billContent.fTotalTax }}\n              </v-list-item-subtitle>\n            </v-list-item-content>\n          </v-list-item>\n          <template v-for=\"(total,index) in taxGroupInfo\">\n            <v-list-item :key=\"total.taxRatePercentage+'-'+index\">\n              <v-list-item-content>\n                <v-list-item-title>\n                  {{ total.taxRatePercentage }}%\n                </v-list-item-title>\n                <v-list-item-subtitle>\n                  {{ $t('Umsatz') }}: {{ total.groupTotal }}\n                </v-list-item-subtitle>\n                <v-list-item-subtitle>\n                  {{ $t('Netto') }}: {{ total.nettoumsatz }}\n                </v-list-item-subtitle>\n                <v-list-item-subtitle>\n                  {{ $t('Steuer') }}:{{ total.umsatzsteuer }}\n                </v-list-item-subtitle>\n              </v-list-item-content>\n            </v-list-item>\n          </template>\n        </v-list>\n      </div>\n      <div class=\"pa-4\">\n        <div class=\"display-2 d-flex justify-space-between\">\n          <div>From:</div>\n          <div>{{ fromAndEnd.fromTimestamp }}</div>\n        </div>\n        <div class=\"display-2 d-flex justify-space-between\">\n          <div>To:</div>\n          <div>{{ fromAndEnd.toTimestamp }}</div>\n        </div>\n        <v-btn\n          v-if=\"currentZbonSelected\"\n          class=\"mt-2\"\n          block\n          color=\"success\"\n          @click=\"reprintZbon(currentZbonSelected.zbonNumber)\"\n        >\n          重新打印ZBon\n        </v-btn>\n        <v-btn\n          v-else\n          class=\"mt-2\"\n          block\n          color=\"primary\"\n          @click=\"printZbon()\"\n        >\n          打印ZBon\n        </v-btn>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\n  import { hillo } from 'hillo'\n  import dayjs from 'dayjs'\n  import IKUtils from 'innerken-js-utils'\n\n  export async function previewZBonByTimeSpan (startTime, endTime) {\n    return (await hillo.get('ZBon.php?op=previewByTimeSpan', {\n      startTime,\n      endTime,\n    })).content\n  }\n\n  export async function getZbonRecordList (fromDateTime, toDateTime) {\n    return (await hillo.get('ZBon.php?op=searchZbonCombinedRecord')).content\n  }\n\n  export async function reprintZbon (zbonNumber) {\n    return (await hillo.post('ZBon.php?op=printCombined', { zbonNumber }))\n  }\n\n  export async function generateAndPrintZbon () {\n    return (await hillo.get('ZBon.php?op=generateAndPrintCombined')).content\n  }\n\n  export default {\n    data: function () {\n      return {\n        zbonRecordList: [],\n        currentZbonSelected: null,\n        billData: {\n          content: {\n            taxInfos: [],\n            fTotal: 0,\n            fTotalTax: 0,\n            fTotalTe: 0,\n          },\n        },\n      }\n    },\n    computed: {\n      taxGroupInfo () {\n        return this.billContent.taxInfos?.filter(t => t.consumeTypeName === 'Total')\n      },\n      billContent () {\n        return this.billData.content\n      },\n      fromAndEnd () {\n        const {\n          fromTimestamp,\n          toTimestamp,\n        } = this.currentZbonSelected ?? {\n          fromTimestamp: this.zbonRecordList[0].toTimestamp,\n          toTimestamp: dayjs().format('YYYY-MM-DD HH:mm:ss'),\n        }\n        return {\n          fromTimestamp,\n          toTimestamp,\n        }\n      },\n    },\n    watch: {\n      async currentZbonSelected () {\n        await this.loadData()\n      },\n    },\n    async mounted () {\n      this.zbonRecordList = await getZbonRecordList()\n      console.log(this.zbonRecordList)\n      await this.loadData()\n    },\n    methods: {\n      reprintZbon,\n      printZbon () {\n        IKUtils.showConfirm(\n          'Bist du sicher?',\n          '该操作会打印ZBon，每天只能打印一张ZBon哦！！', async () => {\n            await generateAndPrintZbon()\n            await this.loadData()\n          })\n      },\n      async loadData () {\n        const {\n          fromTimestamp,\n          toTimestamp,\n        } = this.fromAndEnd\n        this.billData = await previewZBonByTimeSpan(fromTimestamp, toTimestamp)\n      },\n    },\n  }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZbonList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZbonList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ZbonList.vue?vue&type=template&id=5dc42e8e&\"\nimport script from \"./ZbonList.vue?vue&type=script&lang=js&\"\nexport * from \"./ZbonList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemActionText } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\ninstallComponents(component, {VBtn,VCard,VList,VListItem,VListItemActionText,VListItemContent,VListItemGroup,VListItemSubtitle,VListItemTitle,VSubheader})\n"],"sourceRoot":""}