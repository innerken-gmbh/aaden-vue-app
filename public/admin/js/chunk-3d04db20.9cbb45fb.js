(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d04db20"],{"0421":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("f4d6"),a=i(r("9d8f"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){l(i,n,a,o,u,"next",e)}function u(e){l(i,n,a,o,u,"throw",e)}o(void 0)}))}}var c={id:{type:n.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"allergName"},icon:{displayName:"icon"},shortName:{displayName:"shortName"},displayText:{displayName:"displayText"}},p={add:function(e){return a.default.postWithUploadFile("Dishes.php?op=addAllergen",e,{showLoading:!0})},edit:function(e){return a.default.postWithUploadFile("Dishes.php?op=updateAllergen",e,{showLoading:!0})},remove:function(e){return a.default.post("Dishes.php?op=deleteAllergen",{id:e})},load:function(){var e=d((function*(e){return(yield a.default.get("Dishes.php",u({op:"showAllAllergen"},e))).content}));function t(t){return e.apply(this,arguments)}return t}()},f=n.IKDataEntity.ModelFactory(c,p);t.default=f},"194c":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r("4eed")),a=r("f4d6"),i=o(r("9d8f"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){d(i,n,a,o,u,"next",e)}function u(e){d(i,n,a,o,u,"throw",e)}o(void 0)}))}}var p={id:{type:a.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{},lang:{}},f={load:function(){var e=c((function*(e){return(yield i.default.get("CategoryType.php",s({lang:n.default.getLang()},e))).content}));function t(t){return e.apply(this,arguments)}return t}()},y=a.IKDataEntity.ModelFactory(p,f);t.default=y},2967:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("f4d6"),a=u(r("9d8f")),i=u(r("c5e4")),o=u(r("4eed"));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(n,a)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){c(i,n,a,o,u,"next",e)}function u(e){c(i,n,a,o,u,"throw",e)}o(void 0)}))}}var f={load:function(){var e=p((function*(e){return(yield a.default.get("Category.php",l({},e))).content}));function t(t){return e.apply(this,arguments)}return t}()},y={id:{type:n.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},_langsname:{displayName:"labelName",form:!1},langs:{displayName:"labelName",type:n.IKDataEntity.Types.Group,formConfig:{groupName:"labelName",default:o.default.supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:e=>e.lang.toUpperCase()===o.default.getLang(),displayChild:e=>"name"===e},childKey:["name","desc"],labelKey:"lang",children:[i.default,i.default,i.default],header:!1}},g=n.IKDataEntity.ModelFactory(y,f);t.default=g},"2e88":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("f4d6"),a=c(r("9d8f")),i=c(r("194c")),o=c(r("85e4")),u=c(r("c5e4")),s=c(r("4eed")),l=c(r("ee60")),d=c(r("2967"));function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){p(i,n,a,o,u,"next",e)}function u(e){p(i,n,a,o,u,"throw",e)}o(void 0)}))}}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h={add:function(e){return e.appliedAttributeGroup=e.attributeGroupId.join(","),e.catTypeId=e.dishesCategoryTypeId,e.appliedConsumeTypeIds=e.consumeTypeIds.join(","),e.appliedFreeInConsumeTypeIds=e.freeInConsumeTypeIds.join(","),a.default.post("Category.php?op=add",g(g({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},edit:function(e){return e.appliedAttributeGroup=e.attributeGroupId.join(","),e.catTypeId=e.dishesCategoryTypeId,e.appliedConsumeTypeIds=e.consumeTypeIds.join(","),e.appliedFreeInConsumeTypeIds=e.freeInConsumeTypeIds.join(","),a.default.postWithUploadFile("Category.php?op=update",g(g({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},remove:function(e){return a.default.post("Category.php?op=delete",{id:e})},load:function(){var e=f((function*(e){return(yield a.default.get("Category.php",g({},e))).content}));function t(t){return e.apply(this,arguments)}return t}()},b={id:{type:n.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},categorySort:{type:n.IKDataEntity.Types.Integer,displayName:"sectionSort",formConfig:{default:50,required:!1}},_langsname:{displayName:"labelName",form:!1},langs:{displayName:"labelName",type:n.IKDataEntity.Types.Group,formConfig:{groupName:"labelName",default:s.default.supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:e=>e.lang.toUpperCase()===s.default.getLang(),displayChild:e=>"name"===e},childKey:["name","desc"],labelKey:"lang",children:[u.default,u.default,u.default],header:!1},dishesCategoryTypeId:{displayName:"labelType",type:n.IKDataEntity.Types.Option,formConfig:{type:{selectItems:i.default.getList}}},attributeGroupId:{displayName:"attributeGroupNames",type:n.IKDataEntity.Types.Option,formConfig:{required:!1,type:{selectItems:o.default.getList,multiple:!0}}},consumeTypeIds:{type:n.IKDataEntity.Types.Option,formConfig:{required:!1,type:{selectItems:l.default.getList,multiple:!0}}},freeInConsumeTypeIds:{type:n.IKDataEntity.Types.Option,formConfig:{required:!1,type:{selectItems:l.default.getList,multiple:!0}}},color:{type:n.IKDataEntity.Types.Color,formConfig:{required:!1}},printOrder:{type:n.IKDataEntity.Types.Integer,required:!1,formConfig:{default:50,requiredNew:!1,requiredEdit:!1,rule:[e=>/^[0-9]\d*$/.test(e)||"Bitte geben Sie die ganze Zahl ein"]}},parentId:{type:n.IKDataEntity.Types.Option,formConfig:{required:!1,type:{selectItems:d.default.getList,itemText:"_langsname"}}}},v=n.IKDataEntity.ModelFactory(b,h);t.default=v},"2f69":function(e,t,r){"use strict";var n=r("5530"),a=(r("96cf"),r("1da1")),i=r("5089"),o=r("f4d6"),u=r("9d8f"),s=r.n(u),l=r("b0d9"),d=r("ebc9"),c={id:{type:o["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"name"},attributeGroupId:{displayName:"groupName",type:o["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:l["a"].forceGetList}}},isMultiChosen:{type:o["IKDataEntity"].Types.Boolean},value:{displayName:"value"},printMod:{displayName:"printMod"},priceMod:{type:o["IKDataEntity"].Types.Float,displayName:"priceMod",formConfig:{overwriteRule:!0,rule:[function(e){return/^(-)?[0-9]+\.{0,1}[0-9]{0,2}$/.test(e)||"please enter the correct price"}]}},dishesCategoryTypeId:{displayName:"labelType",type:o["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:d["a"].getList}}},isAsDefault:{type:o["IKDataEntity"].Types.Boolean}},p={add:function(e){return s.a.postWithUploadFile("Category.php?op=addAttribute",e,{showLoading:!0})},edit:function(e){return s.a.postWithUploadFile("Category.php?op=updateAttribute",e,{showLoading:!0})},remove:function(e){return s.a.post("Category.php?op=deleteAttribute",{id:e})},load:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("Category.php",Object(n["a"])({op:"showAttribute",lang:i["a"].getLang()},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()};t["a"]=o["IKDataEntity"].ModelFactory(c,p)},"30c8":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("f4d6"),a=c(r("9d8f")),i=c(r("4eed")),o=c(r("2e88")),u=c(r("ac46")),s=c(r("0421")),l=c(r("c5e4")),d=c(r("85e4"));function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){p(i,n,a,o,u,"next",e)}function u(e){p(i,n,a,o,u,"throw",e)}o(void 0)}))}}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=Boolean("0"===i.default.isShowOnTable),b={id:{type:n.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},code:{},image:{type:n.IKDataEntity.Types.Image,formConfig:{type:{root:()=>i.default.getEndPoint()+i.default.dishImageRoot},required:!1},displayName:"image",header:h},dishName:{displayName:"name",form:!1},price:{type:n.IKDataEntity.Types.Float,formConfig:{default:"",overwriteRule:!0,rule:[e=>/^[0-9]+\.{0,1}[0-9]{0,2}$/.test(e)||"Bitte geben Sie den richtigen Preis ein"]}},langs:{displayName:"name",type:n.IKDataEntity.Types.Group,formConfig:{groupName:"name",default:i.default.supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:e=>e.lang.toUpperCase()===i.default.getLang(),displayChild:e=>"name"===e},childKey:["name","desc"],labelKey:"lang",children:[l.default,l.default,l.default],header:!1},printGroupId:{displayName:"printCatName",type:n.IKDataEntity.Types.Option,formConfig:{default:1,type:{selectItems:u.default.getList}}},categoryId:{displayName:"labelName",type:n.IKDataEntity.Types.Option,formConfig:{type:{selectItems:o.default.getList,itemText:"_langsname"}}},AllergenId:{type:n.IKDataEntity.Types.Option,formConfig:{type:{selectItems:s.default.getList,multiple:!0},required:!1},displayName:"过敏源"},attributeGroupId:{displayName:"attributeGroupNames",type:n.IKDataEntity.Types.Option,formConfig:{merge:!1,required:!1,type:{selectItems:d.default.getList,multiple:!0,disabledItem:(e,t)=>t.inheritAttributeGroupId?g(g({},e),{},{disabled:t.inheritAttributeGroupId.includes(e.id)}):e}}},localAttributeGroupId:{type:n.IKDataEntity.Types.Option,formConfig:{type:{selectItems:d.default.getList,multiple:!0},inNew:!1,inEdit:!1},header:!1},inheritAttributeGroupId:{displayName:"AttributeGroupName",type:n.IKDataEntity.Types.Option,formConfig:{type:{selectItems:d.default.getList,multiple:!0},inNew:!1,inEdit:!1},header:!1},dishWeight:{displayName:"DishWeight",type:n.IKDataEntity.Types.Integer,formConfig:{default:1,required:!1,rule:[e=>/^[0-9]\d*$/.test(e)||"Bitte geben Sie die ganze Zahl ein"]}},isActive:{type:n.IKDataEntity.Types.Boolean,displayName:"isActive",formConfig:{default:1,required:!1}},dishAlias:{required:!1,formConfig:{requiredNew:!1,requiredEdit:!1}},printText:{displayName:"printTitle",required:!1,formConfig:{requiredNew:!1,requiredEdit:!1}}},v={add:function(e){return e.attributeGroup=e.attributeGroupId.filter(t=>!e.inheritAttributeGroupId.includes(t)).join(","),e.allergenGroup=e.AllergenId.join(","),a.default.postWithUploadFile("Dishes.php?op=add",g(g({},e),{},{params:JSON.stringify(e)}),{showLoading:!0})},edit:function(e){return e.attributeGroup=e.attributeGroupId.filter(t=>!e.inheritAttributeGroupId.includes(t)).join(","),e.allergenGroup=e.AllergenId.join(","),e.file&&(e.imageExt=e.file.name.split(".")[1]),a.default.postWithUploadFile("Dishes.php?op=update",g(g({},e),{},{params:JSON.stringify(e)}),{showLoading:!0})},remove:function(e){return a.default.post("Dishes.php?op=delete",{id:e})},load:function(){var e=f((function*(e){return(yield a.default.get("Dishes.php",g({lang:i.default.getLang()},e))).content.map((function(e){return e.id=e.dishId,e.attributeGroupId=[e.inheritAttributeGroupId?e.inheritAttributeGroupId.split(","):[],e.localAttributeGroupId?e.localAttributeGroupId.split(","):[]].flat().join(","),e.langs=e.langs.map(e=>g(g({},e),{},{desc:e.description})),e}))}));function t(t){return e.apply(this,arguments)}return t}()},I=n.IKDataEntity.ModelFactory(b,v);I.getBuffet=f((function*(){return(yield I.getList()).filter(e=>"8"===e.dishesCategoryTypeId)}));var D=I;t.default=D},"32f5":function(e,t,r){"use strict";var n=r("4649"),a=r.n(n);a.a},4649:function(e,t,r){},"4c03":function(e,t,r){"use strict";r("a15b"),r("96cf");var n=r("1da1"),a=r("5530"),i=r("f4d6"),o=r("9d8f"),u=r.n(o),s=r("ebc9"),l=r("b0d9"),d=r("a86d"),c=r("5089"),p=r("6f56"),f={load:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("Category.php",Object(a["a"])({},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},y={id:{type:i["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},_langsname:{displayName:"labelName",form:!1},langs:{displayName:"labelName",type:i["IKDataEntity"].Types.Group,formConfig:{groupName:"labelName",default:c["a"].supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:function(e){return e.lang.toUpperCase()===c["a"].getLang()},displayChild:function(e){return"name"===e}},childKey:["name","desc"],labelKey:"lang",children:[d["a"],d["a"],d["a"]],header:!1}},g=i["IKDataEntity"].ModelFactory(y,f),m={add:function(e){return e.appliedAttributeGroup=e.attributeGroupId.join(","),e.catTypeId=e.dishesCategoryTypeId,e.appliedConsumeTypeIds=e.consumeTypeIds.join(","),e.appliedFreeInConsumeTypeIds=e.freeInConsumeTypeIds.join(","),u.a.post("Category.php?op=add",Object(a["a"])(Object(a["a"])({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},edit:function(e){return e.appliedAttributeGroup=e.attributeGroupId.join(","),e.catTypeId=e.dishesCategoryTypeId,e.appliedConsumeTypeIds=e.consumeTypeIds.join(","),e.appliedFreeInConsumeTypeIds=e.freeInConsumeTypeIds.join(","),u.a.postWithUploadFile("Category.php?op=update",Object(a["a"])(Object(a["a"])({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},remove:function(e){return u.a.post("Category.php?op=delete",{id:e})},load:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("Category.php",Object(a["a"])({},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},h={id:{type:i["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},categorySort:{type:i["IKDataEntity"].Types.Integer,displayName:"sectionSort",formConfig:{default:50,required:!1}},_langsname:{displayName:"labelName",form:!1},langs:{displayName:"labelName",type:i["IKDataEntity"].Types.Group,formConfig:{groupName:"labelName",default:c["a"].supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:function(e){return e.lang.toUpperCase()===c["a"].getLang()},displayChild:function(e){return"name"===e}},childKey:["name","desc"],labelKey:"lang",children:[d["a"],d["a"],d["a"]],header:!1},dishesCategoryTypeId:{displayName:"labelType",type:i["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:s["a"].getList}}},attributeGroupId:{displayName:"attributeGroupNames",type:i["IKDataEntity"].Types.Option,formConfig:{required:!1,type:{selectItems:l["a"].getList,multiple:!0}}},consumeTypeIds:{type:i["IKDataEntity"].Types.Option,formConfig:{required:!1,type:{selectItems:p["a"].getList,multiple:!0}}},freeInConsumeTypeIds:{type:i["IKDataEntity"].Types.Option,formConfig:{required:!1,type:{selectItems:p["a"].getList,multiple:!0}}},color:{type:i["IKDataEntity"].Types.Color,formConfig:{required:!1}},printOrder:{type:i["IKDataEntity"].Types.Integer,required:!1,formConfig:{default:50,requiredNew:!1,requiredEdit:!1,rule:[function(e){return/^[0-9]\d*$/.test(e)||"Bitte geben Sie die ganze Zahl ein"}]}},parentId:{type:i["IKDataEntity"].Types.Option,formConfig:{required:!1,type:{selectItems:g.getList,itemText:"_langsname"}}}};t["a"]=i["IKDataEntity"].ModelFactory(h,m)},"591e":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardDishesListFactory=h,t.getDishesInfo=w,t.getDishes=j;var n=s(r("30c8")),a=s(r("194c")),i=s(r("2e88")),o=s(r("c787")),u=s(r("9d8f"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){l(i,n,a,o,u,"next",e)}function u(e){l(i,n,a,o,u,"throw",e)}o(void 0)}))}}var c={note:"",apply:[],modShow:!1,forceFormat:!1};function p(e){var t,r,n=[];return e.apply||e.agName?((null===e||void 0===e||null===(t=e.apply)||void 0===t?void 0:t.length)>0?e.apply.forEach(t=>{var r=e.modInfo.find(e=>e.id===t.groupId),a=r.name,i=[t.selectId].flat().reduce((e,t)=>{if(!t)return e;var n=r.selectValue.indexOf(t),i="".concat(r.selectName[n]),o=r.priceInfo[n];return e.push({groupName:a,value:i,priceInfo:o,hash:a+":"+i+"p"+o}),e},[]);n=n.concat(i)}):(null===e||void 0===e||null===(r=e.agName)||void 0===r?void 0:r.length)>0&&([e.agNameArr,e.aNameArr,e.priceInfoArr,e.agIdArr,e.aIdArr]=[e.agName,e.aName,e.priceInfo,e.agId,e.aId].map(e=>e.split(",")),e.agNameArr.forEach((t,r)=>{n.push({agId:e.agIdArr[r],aId:e.aIdArr[r],groupName:t,value:e.aNameArr[r],priceInfo:e.priceInfoArr[r],hash:t+":"+e.aNameArr[r]+"p"+e.priceInfoArr[r]+"g"+e.agIdArr[r]})})),n):n}function f(e){var t=0;return e.displayApply.forEach(e=>{var r;t+=parseFloat(null!==(r=e.priceInfo)&&void 0!==r?r:0)}),t}function y(e){return e.reduce((e,t)=>(e.push(t.hash),e),[]).join("/")}function g(e,t,r,n,a){return e+"&"+y(t)+"-&-"+r+"-&-"+n+"-&-"+a}function m(e){var t,r,n,a,i;e.note=null!==(t=e.note)&&void 0!==t?t:"",e.displayApply=p(e),e.addPrice=f(e),e.originPrice=parseFloat(0===parseFloat(e.price)?0:null!==(r=null!==(n=e.originPrice)&&void 0!==n?n:e.price)&&void 0!==r?r:0),e.realPrice=parseFloat(e.originPrice)+parseFloat(e.addPrice)+parseFloat(null!==(a=e.tempDiscountMod)&&void 0!==a?a:0),e.code.includes("ea")&&(e.realPrice=e.price),e.identity=g(e.code,e.displayApply,e.note,e.tempDiscountStr,null!==(i=e.price)&&void 0!==i?i:e.realPrice)}function h(){var e=[],t={},r={},n=0,a=function(t,a){var i=o.default.deepCopy(t);i.count=null!==a&&void 0!==a?a:t.count,i.sumCount=i.count,i.hash=n,m(i),n++,r[i.identity]=i,i.change=function(e){d(i,e)},e.push(i)};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(null===e||void 0===e?void 0:e.length)>0&&Object.assign(t,e.reduce((e,t)=>(e[t.code]=t,e),{}))}function u(e){return s(e,!1)}function s(e){var t,r,n,a,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],u=i?o.default.deepCopy(e):e;return u.count=parseInt(null!==(t=null!==(r=u.count)&&void 0!==r?r:u.sumCount)&&void 0!==t?t:0),u.name=null!==(n=null!==(a=u.name)&&void 0!==a?a:u.dishName)&&void 0!==n?n:u._langsname,m(u),u.wellFormat=!0,Object.assign({},c,u)}function l(){return Object.keys(t).reduce((e,r)=>(e.push(t[r]),e),[])}var d=function(n,i){var o=t[n.code];o&&(parseInt(o.count)+parseInt(i)>0?o.count+=i:o.count=0),n.wellFormat&&!n.forceFormat||(n.forceFormat=!1,n=s(n));var u=r[n.identity];u?u.count+i>0?(u.count+=i,u.sumCount=u.count):(e.splice(e.indexOf(u),1),delete r[n.identity]):(i>=0||n.count>=0)&&a(n,i)},p=function(e){return e.map(u)},f=function(e,t){d(e,t)},y=function(e,t){d(e,t)},g=function(){return e.reduce((e,t)=>e+parseFloat(t.realPrice*t.count),0)},h=function(){return parseInt(e.reduce((e,t)=>e+parseInt(t.count),0))},b=function(e){v(e)},v=function(e){for(var t of(I(),e))f(t)},I=function(){for(var n of Object.keys(t))t[n].count=0;for(var a of Object.keys(r))delete r[a];e.splice(0,e.length)};return{orderDictionary:r,setDishList:i,dishDictionary:t,list:e,getDishList:l,add:f,remove:y,total:g,count:h,loadTTDishList:b,formatList:p,loadList:v,clear:I}}var b=[],v=[],I=[],D=[];function O(e,t,r){return e=e.map(e=>(e.dishes=t.filter(t=>parseInt(t.categoryId)===parseInt(e.id)).map(e=>(e.count=0,e.note="",e)),e)).filter(e=>e.dishes.length>0),r.map(t=>(t.categories=e.filter(e=>parseInt(t.id)===parseInt(e.dishesCategoryTypeId)),t)).sort((e,t)=>9===parseInt(t.id)?-1:9===parseInt(e.id)?1:parseInt(e.id)<parseInt(t.id)?-1:parseInt(e.id)>parseInt(t.id)?1:0)}var C=h();function w(){return N.apply(this,arguments)}function N(){return N=d((function*(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DE";return 0===D.length&&([I,v,b]=yield Promise.all([j(),i.default.getList(),a.default.getList()]),!1!==e&&(v=(yield u.default.get("Category.php?op=withConsumeType",{lang:t,consumeTypeId:e})).content),D=O(v,I,b)),D})),N.apply(this,arguments)}function j(){return E.apply(this,arguments)}function E(){return E=d((function*(){return 0===I.length&&(I=C.formatList(yield n.default.getList())),I})),E.apply(this,arguments)}},6306:function(e,t,r){"use strict";var n=r("5530"),a=(r("96cf"),r("1da1")),i=r("f4d6"),o=r("9d8f"),u=r.n(o),s={id:{type:i["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"sectionName"},isSingleLinePrint:{type:i["IKDataEntity"].Types.Boolean,displayName:"isSingleLinePrint"},isSingleOrderPrint:{type:i["IKDataEntity"].Types.Boolean,displayName:"isSingleOrderPrint"},printerCount:{displayName:"printerCount",formConfig:{inEdit:!1,inNew:!1}},defaultRetryCount:{formConfig:{default:"0"}},totalDishesCount:{formConfig:{inEdit:!1,inNew:!1}}},l={load:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("Printer.php",Object(n["a"])({op:"showPrinterGroups"},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),add:function(e){return u.a.postWithUploadFile("Printer.php?op=addPrinterGroups",e,{showLoading:!0})},edit:function(e){return u.a.postWithUploadFile("Printer.php?op=updatePrinterGroups",e,{showLoading:!0})},remove:function(e){return u.a.post("Printer.php?op=deletePrinterGroup",{id:e})}};t["a"]=i["IKDataEntity"].ModelFactory(s,l)},"6e35":function(e,t,r){"use strict";var n=r("5530"),a=(r("96cf"),r("1da1")),i=r("f4d6"),o=r("9d8f"),u=r.n(o),s={id:{type:i["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"allergName"},icon:{displayName:"icon"},shortName:{displayName:"shortName"},displayText:{displayName:"displayText"}},l={add:function(e){return u.a.postWithUploadFile("Dishes.php?op=addAllergen",e,{showLoading:!0})},edit:function(e){return u.a.postWithUploadFile("Dishes.php?op=updateAllergen",e,{showLoading:!0})},remove:function(e){return u.a.post("Dishes.php?op=deleteAllergen",{id:e})},load:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("Dishes.php",Object(n["a"])({op:"showAllAllergen"},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()};t["a"]=i["IKDataEntity"].ModelFactory(s,l)},"6f56":function(e,t,r){"use strict";var n=r("5530"),a=(r("96cf"),r("1da1")),i=r("f4d6"),o=r("9d8f"),u=r.n(o),s={id:{type:i["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{displayName:"staffName"},printName:{displayName:"printTitle"},zbonGroup:{displayName:"zbonGroup"},color:{type:i["IKDataEntity"].Types.Color,formConfig:{required:!1}}},l={load:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("Complex.php",Object(n["a"])({op:"showAllConsumeTypeInfo"},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),add:function(e){return u.a.post("ConsumeType.php?op=add",Object(n["a"])(Object(n["a"])({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},edit:function(e){return u.a.postWithUploadFile("ConsumeType.php?op=update",Object(n["a"])(Object(n["a"])({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},remove:function(e){return u.a.post("ConsumeType.php?op=delete",{id:e})}};t["a"]=i["IKDataEntity"].ModelFactory(s,l)},"85e4":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r("4eed")),a=r("f4d6"),i=o(r("9d8f"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){d(i,n,a,o,u,"next",e)}function u(e){d(i,n,a,o,u,"throw",e)}o(void 0)}))}}var p={id:{type:a.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{},printTitle:{},required:{type:a.IKDataEntity.Types.Boolean},multiSelect:{type:a.IKDataEntity.Types.Boolean},attrubuteCount:{type:a.IKDataEntity.Types.Integer,form:!1}},f={load:function(){var e=c((function*(e){return(yield i.default.get("Category.php",s({op:"showAttributeGroup",lang:n.default.getLang()},e))).content}));function t(t){return e.apply(this,arguments)}return t}(),add:function(e){return i.default.postWithUploadFile("Category.php?op=addAttributeGroup",e,{showLoading:!0})},edit:function(e){return i.default.postWithUploadFile("Category.php?op=updateAttributeGroup",e,{showLoading:!0})},remove:function(e){return i.default.post("Category.php?op=deleteAttributeGroup",{id:e})}},y=a.IKDataEntity.ModelFactory(p,f);t.default=y},a86d:function(e,t,r){"use strict";var n=r("f4d6"),a={id:{type:n["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{displayName:"Name"},lang:{},desc:{displayName:"Beschreibung",formConfig:{required:!1}}};t["a"]=n["IKDataEntity"].ModelFactory(a,{})},ac46:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("f4d6"),a=i(r("9d8f"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){l(i,n,a,o,u,"next",e)}function u(e){l(i,n,a,o,u,"throw",e)}o(void 0)}))}}var c={id:{type:n.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"sectionName"},isSingleLinePrint:{type:n.IKDataEntity.Types.Boolean,displayName:"isSingleLinePrint"},isSingleOrderPrint:{type:n.IKDataEntity.Types.Boolean,displayName:"isSingleOrderPrint"},printerCount:{displayName:"printerCount",formConfig:{inEdit:!1,inNew:!1}},defaultRetryCount:{formConfig:{default:"0"}},totalDishesCount:{formConfig:{inEdit:!1,inNew:!1}}},p={load:function(){var e=d((function*(e){return(yield a.default.get("Printer.php",u({op:"showPrinterGroups"},e))).content}));function t(t){return e.apply(this,arguments)}return t}(),add:function(e){return a.default.postWithUploadFile("Printer.php?op=addPrinterGroups",e,{showLoading:!0})},edit:function(e){return a.default.postWithUploadFile("Printer.php?op=updatePrinterGroups",e,{showLoading:!0})},remove:function(e){return a.default.post("Printer.php?op=deletePrinterGroup",{id:e})}},f=n.IKDataEntity.ModelFactory(c,p);t.default=f},b0d9:function(e,t,r){"use strict";var n=r("5530"),a=(r("96cf"),r("1da1")),i=r("5089"),o=r("f4d6"),u=r("9d8f"),s=r.n(u),l={id:{type:o["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{},printTitle:{},required:{type:o["IKDataEntity"].Types.Boolean},multiSelect:{type:o["IKDataEntity"].Types.Boolean},attrubuteCount:{type:o["IKDataEntity"].Types.Integer,form:!1}},d={load:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("Category.php",Object(n["a"])({op:"showAttributeGroup",lang:i["a"].getLang()},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),add:function(e){return s.a.postWithUploadFile("Category.php?op=addAttributeGroup",e,{showLoading:!0})},edit:function(e){return s.a.postWithUploadFile("Category.php?op=updateAttributeGroup",e,{showLoading:!0})},remove:function(e){return s.a.post("Category.php?op=deleteAttributeGroup",{id:e})}};t["a"]=o["IKDataEntity"].ModelFactory(l,d)},c5e4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("f4d6"),a={id:{type:n.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{displayName:"Name"},lang:{},desc:{displayName:"Beschreibung",formConfig:{required:!1}}},i=n.IKDataEntity.ModelFactory(a,{});t.default=i},c791:function(e,t,r){"use strict";r("a4d3"),r("e01a"),r("4de4"),r("0481"),r("caad"),r("a15b"),r("d81d"),r("4069"),r("b0c0"),r("ac1f"),r("2532"),r("1276"),r("96cf");var n=r("1da1"),a=r("5530"),i=r("f4d6"),o=r("9d8f"),u=r.n(o),s=r("5089"),l=r("c0d6"),d=r("4c03"),c=r("6306"),p=r("6e35"),f=r("a86d"),y=r("b0d9"),g=Boolean("0"===s["a"].isShowOnTable),m={id:{type:i["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},code:{},image:{type:i["IKDataEntity"].Types.Image,formConfig:{type:{root:function(){return l["a"].getters.rootUrl+s["a"].dishImageRoot}},required:!1},displayName:"image",header:g},dishName:{displayName:"name",form:!1},price:{type:i["IKDataEntity"].Types.Float,formConfig:{default:"",overwriteRule:!0,rule:[function(e){return/^[0-9]+\.{0,1}[0-9]{0,2}$/.test(e)||"Bitte geben Sie den richtigen Preis ein"}]}},langs:{displayName:"name",type:i["IKDataEntity"].Types.Group,formConfig:{groupName:"name",default:s["a"].supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:function(e){return e.lang.toUpperCase()===s["a"].getLang()},displayChild:function(e){return"name"===e}},childKey:["name","desc"],labelKey:"lang",children:[f["a"],f["a"],f["a"]],header:!1},printGroupId:{displayName:"printCatName",type:i["IKDataEntity"].Types.Option,formConfig:{default:1,type:{selectItems:c["a"].getList}}},categoryId:{displayName:"labelName",type:i["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:d["a"].getList,itemText:"_langsname"}}},AllergenId:{type:i["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:p["a"].getList,multiple:!0},required:!1},displayName:"过敏源"},attributeGroupId:{displayName:"attributeGroupNames",type:i["IKDataEntity"].Types.Option,formConfig:{merge:!1,required:!1,type:{selectItems:y["a"].getList,multiple:!0,disabledItem:function(e,t){return t.inheritAttributeGroupId?Object(a["a"])(Object(a["a"])({},e),{},{disabled:t.inheritAttributeGroupId.includes(e.id)}):e}}}},localAttributeGroupId:{type:i["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:y["a"].getList,multiple:!0},inNew:!1,inEdit:!1},header:!1},inheritAttributeGroupId:{displayName:"AttributeGroupName",type:i["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:y["a"].getList,multiple:!0},inNew:!1,inEdit:!1},header:!1},dishWeight:{displayName:"DishWeight",type:i["IKDataEntity"].Types.Integer,formConfig:{default:1,required:!1,rule:[function(e){return/^[0-9]\d*$/.test(e)||"Bitte geben Sie die ganze Zahl ein"}]}},isActive:{type:i["IKDataEntity"].Types.Boolean,displayName:"isActive",formConfig:{default:1,required:!1}},dishAlias:{required:!1,formConfig:{requiredNew:!1,requiredEdit:!1}},printText:{displayName:"printTitle",required:!1,formConfig:{requiredNew:!1,requiredEdit:!1}}},h={add:function(e){return e.attributeGroup=e.attributeGroupId.filter((function(t){return!e.inheritAttributeGroupId.includes(t)})).join(","),e.allergenGroup=e.AllergenId.join(","),u.a.postWithUploadFile("Dishes.php?op=add",Object(a["a"])(Object(a["a"])({},e),{},{params:JSON.stringify(e)}),{showLoading:!0})},edit:function(e){return e.attributeGroup=e.attributeGroupId.filter((function(t){return!e.inheritAttributeGroupId.includes(t)})).join(","),e.allergenGroup=e.AllergenId.join(","),e.file&&(e.imageExt=e.file.name.split(".")[1]),u.a.postWithUploadFile("Dishes.php?op=update",Object(a["a"])(Object(a["a"])({},e),{},{params:JSON.stringify(e)}),{showLoading:!0})},remove:function(e){return u.a.post("Dishes.php?op=delete",{id:e})},load:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("Dishes.php",Object(a["a"])({lang:s["a"].getLang()},t));case 2:return e.abrupt("return",e.sent.content.map((function(e){return e.id=e.dishId,e.attributeGroupId=[e.inheritAttributeGroupId?e.inheritAttributeGroupId.split(","):[],e.localAttributeGroupId?e.localAttributeGroupId.split(","):[]].flat().join(","),e.langs=e.langs.map((function(e){return Object(a["a"])(Object(a["a"])({},e),{},{desc:e.description})})),e})));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},b=i["IKDataEntity"].ModelFactory(m,h);b.getBuffet=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.getList();case 2:return e.abrupt("return",e.sent.filter((function(e){return"8"===e.dishesCategoryTypeId})));case 3:case"end":return e.stop()}}),e)}))),t["a"]=b},ccdd:function(e,t,r){"use strict";var n=r("5530"),a=r("c787");t["a"]=Object(n["a"])({},a["default"])},ebc9:function(e,t,r){"use strict";var n=r("5530"),a=(r("96cf"),r("1da1")),i=r("5089"),o=r("f4d6"),u=r("9d8f"),s=r.n(u),l={id:{type:o["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{},lang:{}},d={load:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("CategoryType.php",Object(n["a"])({lang:i["a"].getLang()},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()};t["a"]=o["IKDataEntity"].ModelFactory(l,d)},ed28:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-card",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"4"}},[r("v-dialog",{ref:"dialog",attrs:{"return-value":e.dates,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.dates=t},"update:return-value":function(t){e.dates=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:e.$t("日期筛选"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}},"v-text-field",a,!1),n))]}}]),model:{value:e.datePickerDialog,callback:function(t){e.datePickerDialog=t},expression:"datePickerDialog"}},[r("v-date-picker",{attrs:{range:"",scrollable:""},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.datePickerDialog=!1}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.dates)}}},[e._v(" OK ")])],1)],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-dialog",{ref:"timeDialog",attrs:{"return-value":e.hourStart,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.hourStart=t},"update:return-value":function(t){e.hourStart=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:e.$t("startTime"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.hourStart,callback:function(t){e.hourStart=t},expression:"hourStart"}},"v-text-field",a,!1),n))]}}]),model:{value:e.timeStartPickerDialog,callback:function(t){e.timeStartPickerDialog=t},expression:"timeStartPickerDialog"}},[r("v-time-picker",{attrs:{range:"",scrollable:""},model:{value:e.hourStart,callback:function(t){e.hourStart=t},expression:"hourStart"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.timeStartPickerDialog=!1}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.timeDialog.save(e.hourStart)}}},[e._v(" OK ")])],1)],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-dialog",{ref:"timeEndDialog",attrs:{"return-value":e.hourEnd,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.hourEnd=t},"update:return-value":function(t){e.hourEnd=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:e.$t("endTime"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.hourEnd,callback:function(t){e.hourEnd=t},expression:"hourEnd"}},"v-text-field",a,!1),n))]}}]),model:{value:e.timeEndPickerDialog,callback:function(t){e.timeEndPickerDialog=t},expression:"timeEndPickerDialog"}},[r("v-time-picker",{attrs:{range:"",scrollable:""},model:{value:e.hourEnd,callback:function(t){e.hourEnd=t},expression:"hourEnd"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.timeEndPickerDialog=!1}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.timeEndDialog.save(e.hourEnd)}}},[e._v(" OK ")])],1)],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{label:e.$t("永久隐藏属性"),"item-text":"name","item-value":"id",multiple:"",clearable:"",items:e.realAttributes},on:{change:function(t){return e.selectAttributes(e.fixedHideAttributes)},"click:clear":e.clearFixedHideAttribute},model:{value:e.fixedHideAttributes,callback:function(t){e.fixedHideAttributes=t},expression:"fixedHideAttributes"}})],1),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{label:e.$t("隐藏属性"),"item-text":"name","item-value":"id",multiple:"",clearable:"",items:e.realAttributes},model:{value:e.hideAttributes,callback:function(t){e.hideAttributes=t},expression:"hideAttributes"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{label:e.$t("永久隐藏菜品"),"item-text":"dishName","item-value":"dishName",multiple:"",clearable:"",items:e.allFixedDishesData},on:{change:function(t){return e.selectFixedDishes(e.fixedHideDishes)},"click:clear":e.clearFixedHideDishes},model:{value:e.fixedHideDishes,callback:function(t){e.fixedHideDishes=t},expression:"fixedHideDishes"}})],1),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{label:e.$t("选择菜品(不选即为选择所有菜品)"),"item-text":"dishName","item-value":"dishName",multiple:"",items:e.allDishData},on:{change:function(t){return e.selectDishes(e.hideDishes)}},model:{value:e.hideDishes,callback:function(t){e.hideDishes=t},expression:"hideDishes"}})],1),r("v-col",{attrs:{cols:"4"}},[r("v-btn",{attrs:{disabled:e.tableData.length<2,"x-large":"",color:"primary",block:""},on:{click:function(t){e.showSalesTable=!0}}},[e._v(" "+e._s(e.$t("查看分析报告"))+" ")])],1)],1)],1)],1),r("v-dialog",{attrs:{fullscreen:"",scrollable:""},model:{value:e.showSalesTable,callback:function(t){e.showSalesTable=t},expression:"showSalesTable"}},[r("v-card",[r("v-toolbar",{attrs:{dense:"",dark:""}},[r("v-toolbar-title",[e._v(" "+e._s(e.$t("销售统计"))+" ")]),r("v-spacer"),r("v-btn",{staticClass:"mr-4",on:{click:e.print}},[r("v-icon",{attrs:{left:""}},[e._v(" mdi-printer ")]),e._v(" "+e._s(e.$t("打印统计单"))+" ")],1),r("v-icon",{on:{click:function(t){e.showSalesTable=!e.showSalesTable}}},[e._v(" mdi-close ")])],1),r("v-card-text",[r("v-data-table",{attrs:{"fixed-header":"",dense:"","hide-default-footer":"","disable-pagination":"",height:"calc(100vh - 72px)","item-class":e.computeClass,headers:e.headers,items:e.tableData,"items-per-page":100}})],1)],1)],1)],1)},a=[],i=(r("99af"),r("4de4"),r("7db0"),r("4160"),r("caad"),r("d81d"),r("13d5"),r("b0c0"),r("b680"),r("d3b7"),r("07ac"),r("2532"),r("159b"),r("ddb0"),r("5530")),o=(r("96cf"),r("1da1")),u=r("0a61"),s=r("591e"),l=r("2f69"),d=r("b0d9"),c=r("c791"),p=r("c787"),f=r("ff51"),y=r("ccdd"),g={name:"SalesInsight",data:function(){return{datePickerDialog:null,timeStartPickerDialog:null,timeEndPickerDialog:null,hourStart:"",hourEnd:"",dates:[],showSalesTable:null,unfilteredData:[],displayData:[],attributeData:[],hideDishes:[],filterDishesData:[],hideAttributes:[],fixedHideAttributes:[],fixedHideDishes:[],mergedGroup:[],allDishData:[],allFixedDishesData:[],fixedHeader:[{text:"name",value:"name"},{text:"price",value:"price"},{text:"amount",value:"amount"}]}},computed:{headers:function(){return this.fixedHeader.concat(this.attributeHeader)},realAttributes:function(){return this.attributeData.reduce((function(e,t){return t.childAttributes.forEach((function(t){return e.push(t)})),e}),[])},attributeHeader:function(){var e=this;return this.realAttributes.filter((function(t){return!(e.hideAttributes.includes(t.id)||e.fixedHideAttributes.includes(t.id))})).map((function(e){return e.text=e.name,e.value="attr"+e.id,e}))},tableData:function(){var e=[],t=function(e){return e.isDish=!0,e.price="".concat(e.originPrice," (avg:€").concat((e.totalPrice/e.totalCount).toFixed(2),")"),e.amount=e.totalCount,e.groupData.forEach((function(t){e["attr"+t.id]=t.count})),e},r=function(e,t){return e.name="v:"+t,e.amount=e.count,e.groupData.forEach((function(t){e["attr"+t.id]=t.count})),e};return this.hideDishes.length>0?this.filterDishesData.forEach((function(t){e.push(t),t.variants.forEach((function(t,n){e.push(r(t,n))}))})):this.displayData.forEach((function(n){e.push(t(n)),n.variants.forEach((function(t,n){e.push(r(t,n))}))})),e}},watch:{dates:function(e){this.loadSalesData(e)},hourStart:function(e){this.loadSalesData(this.dates,e,this.hourEnd)},hourEnd:function(e){this.loadSalesData(this.dates,this.hourStart,e)}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadData();case 2:case"end":return t.stop()}}),t)})))()},methods:{clearFixedHideAttribute:function(){localStorage.removeItem("fixedHideAttribute")},clearFixedHideDishes:function(){localStorage.removeItem("fixedHideDishes")},selectDishes:function(e){this.filterDishesData=this.displayData.filter((function(t){return e.includes(t.name)}))},selectFixedDishes:function(e){var t=JSON.stringify(e);localStorage.setItem("fixedHideDishes",t),this.allDishData=this.allFixedDishesData.filter((function(t){return!e.includes(t.dishName)})),this.displayData=this.unfilteredData.filter((function(t){return!e.includes(t.name)}))},selectAttributes:function(e){var t=JSON.stringify(e);localStorage.setItem("fixedHideAttribute",t)},computeClass:function(e){return e.isDish?"dishRow normal":"normal"},groupElement:function(e,t){var r=function(r,n){var a=p["IKUtils"].deepCopy(r),i=function(r){return e.forEach((function(e){var i=a.find((function(r){return e[t]===r[n]}));i&&(i[r]||(i[r]=[]),i[r].push(e))})),a};return{saveIn:i}};return{on:r}},getAllAttribute:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].getList();case 2:return e.abrupt("return",e.sent.filter((function(e){return e.optattributeGroupId.length>0})));case 3:case"end":return e.stop()}}),e)})))()},getAttributeGrouped:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].getList();case 2:return r=t.sent,t.next=5,e.getAllAttribute();case 5:return n=t.sent,t.abrupt("return",e.groupElement(n,"attributeGroupId").on(r,"id").saveIn("childAttributes"));case 7:case"end":return t.stop()}}),t)})))()},getSalesInfo:function(e,t,r){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["E"])(e,t,r);case 2:if(i=a.sent,0!==i.length){a.next=5;break}return a.abrupt("return",[]);case 5:return o=Object(s["StandardDishesListFactory"])().formatList(i.content),l=o.reduce((function(e,t){var r=e[t.code];r?(r.totalCount+=t.count,r.totalPrice+=t.realPrice*t.count):(e[t.code]={categoryId:parseInt(t.categoryId),categoryTypeId:parseInt(t.categoryTypeId),code:t.code,name:t.name,totalCount:t.count,originPrice:t.originPrice,totalPrice:t.realPrice*t.count,variants:[]},r=e[t.code]);var n=r.variants.find((function(e){return e.identity===t.identity}));return n?n.count+=t.count:r.variants.push({identity:t.identity,count:parseInt(t.count),displayApply:t.displayApply,price:t.realPrice}),e}),{}),a.abrupt("return",Object.values(l).map((function(e){return e.group=n.groupAttribute(e),e})));case 8:case"end":return a.stop()}}),a)})))()},groupAttribute:function(e){var t=this;return e.groupData=p["IKUtils"].deepCopy(this.realAttributes),e.variants.forEach((function(r){r.groupData=p["IKUtils"].deepCopy(t.realAttributes),r.displayApply.forEach((function(t){var n=e.groupData.find((function(e){return e.id===parseInt(t.aId)})),a=r.groupData.find((function(e){return e.id===parseInt(t.aId)}));n&&a&&(a.count||(a.count=0),a.count++,n.count||(n.count=0),n.count++)}))})),e.variants.reduce((function(e,t){return t.displayApply.forEach((function(t){var r=e.find((function(e){return e.agId===t.agId}));r||(r=Object(i["a"])(Object(i["a"])({},t),{},{values:[]}),e.push(r));var n=r.values.find((function(e){return e.aId===t.aId}));n?n.count++:r.values.push(Object(i["a"])(Object(i["a"])({},t),{},{count:1}))})),e}),[])},loadSalesData:function(e,t,r){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.getSalesInfo(e,t,r);case 2:i=a.sent,o=i.reduce((function(e,t){return e.totalPrice+=t.totalPrice,e.groupData.forEach((function(e,r){var n;e.count||(e.count=0),e.count+=null!==(n=t.groupData[r].count)&&void 0!==n?n:0})),e.totalCount+=t.totalCount,e}),{code:"-",name:"Alle",totalPrice:0,originPrice:0,totalCount:0,groupData:p["IKUtils"].deepCopy(n.realAttributes),variants:[]}),n.unfilteredData=[o].concat(i),n.displayData=n.unfilteredData.filter((function(e){return!n.fixedHideDishes.includes(e.name)}));case 6:case"end":return a.stop()}}),a)})))()},loadData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dates=[Object(f["a"])(0),Object(f["a"])(0)],t.next=3,e.getAttributeGrouped();case 3:return e.attributeData=t.sent,t.next=6,c["a"].getList();case 6:return e.allFixedDishesData=t.sent,e.hourStart=""===e.hourStart?"00:00:00":e.hourStart,e.hourEnd=""===e.hourEnd?"23:59:59":e.hourEnd,t.next=11,e.loadSalesData(e.dates,e.hourStart,e.hourEnd);case 11:localStorage.getItem("fixedHideAttribute")&&(e.fixedHideAttributes=JSON.parse(localStorage.getItem("fixedHideAttribute"))),localStorage.getItem("fixedHideDishes")&&(e.fixedHideDishes=JSON.parse(localStorage.getItem("fixedHideDishes"))),e.fixedHideDishes.length>0?e.allDishData=e.allFixedDishesData.filter((function(t){return!e.fixedHideDishes.includes(t.dishName)})):e.allDishData=p["IKUtils"].deepCopy(e.allFixedDishesData);case 14:case"end":return t.stop()}}),t)})))()},print:function(){if(Date.parse(this.dates[0])>Date.parse(this.dates[1])){var e=[this.dates[1],this.dates[0]];this.dates[0]=e[0],this.dates[1]=e[1]}var t=[this.dates[0]+" "+this.hourStart,this.dates[1]+" "+this.hourEnd];y["a"].showConfirm("Bist du sicher?","Möchten Sie die Statistike Bon drucken?",(function(){Object(u["f"])(t).then((function(){y["a"].toast("Erfolgreich drucken!")}))}))}}},m=g,h=(r("32f5"),r("2877")),b=r("6544"),v=r.n(b),I=r("8336"),D=r("b0af"),O=r("99d9"),C=r("62ad"),w=r("a523"),N=r("8fea"),j=r("2e4b"),E=r("169a"),T=r("132d"),P=r("0fd9"),x=r("b974"),A=r("2fa4"),K=r("8654"),S=r("c964"),L=r("71d9"),G=r("2a7f"),k=Object(h["a"])(m,n,a,!1,null,null,null);t["default"]=k.exports;v()(k,{VBtn:I["a"],VCard:D["a"],VCardText:O["c"],VCol:C["a"],VContainer:w["a"],VDataTable:N["a"],VDatePicker:j["a"],VDialog:E["a"],VIcon:T["a"],VRow:P["a"],VSelect:x["a"],VSpacer:A["a"],VTextField:K["a"],VTimePicker:S["a"],VToolbar:L["a"],VToolbarTitle:G["b"]})},ff51:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));r("a15b");function n(e){var t=new Date,r=t.getTime(),n=864e5,a=r+e*n,i=new Date(a),o=i.getFullYear(),u=i.getMonth()+1,s=i.getDate();return[o,u,s].join("-")}function a(e){var t=new Date,r=t.getTime(),n=864e5,a=r+e*n,i=new Date(a),o=i.getFullYear()+"-",u=i.getMonth()+1,s=i.getDate(),l=i.getHours()<10?"0"+i.getHours():i.getHours(),d=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),c=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();return o+u+"-"+s+" "+l+":"+d+":"+c}}}]);
//# sourceMappingURL=chunk-3d04db20.9cbb45fb.js.map