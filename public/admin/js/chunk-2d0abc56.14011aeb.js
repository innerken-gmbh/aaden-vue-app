(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0abc56"],{1760:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ik-data-table",{ref:"thresholdColor",attrs:{model:e.model,"entity-name":e.$t("阈值颜色"),icon:"mdi-heart"},scopedSlots:e._u([{key:"footer",fn:function(){return[o("v-btn",{staticClass:"red ml-2",on:{click:e.reset}},[e._v(" "+e._s(e.$t("重置菜品阈值"))+" ")])]},proxy:!0}])})},n=[],r=(o("96cf"),o("1da1")),i=o("f4d6"),c=(o("7db0"),o("c740"),o("fb6a"),o("b85c")),l=o("5530"),p=o("9d8f"),s=o.n(p),u=o("2ef0"),h=o.n(u),d=o("641f"),m=o.n(d),f={id:{type:i["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},ratio:{displayName:"ratio",formConfig:{required:!0,overwriteRule:!1},form:!1},color:{type:i["IKDataEntity"].Types.Color,formConfig:{required:!0}}},R={add:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var o,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=[],e.next=3,s.a.get("DCache.php",{op:"showDCacheColor"});case 3:if(a=e.sent.content,console.log("tempList 1",a),!(a.length<=0)){e.next=9;break}return e.abrupt("return",[]);case 9:console.log("sortedArray 2 before",a),o=a.sort((function(e,t){var o=e.maxRatio,a=t.maxRatio;return!a||parseFloat(o)<parseFloat(a)?-1:!o||parseFloat(o)>parseFloat(a)?1:0})),console.log("sortedArray 3 after",o);case 12:if(!(h.a.findIndex(o,(function(e){return e.maxRatio===t.Ratio}))>=0)){e.next=17;break}return console.log("they are the same"),e.abrupt("return",!0);case 17:return console.log("sorted -1 Array",h.a.slice(o,0,o.length-1)),n=h.a.findIndex(h.a.slice(o,0,o.length-1),(function(e){return e.maxRatio<t.Ratio})),console.log("colorIndex",n),n<=-1?(t.minRatio=null,t.maxRatio=t.Ratio,o[0].minRatio=t.Ratio,console.log("colorIndex item",t),s.a.postWithUploadFile("DCache.php?op=updateDCacheColor",o[0],{showLoading:!0})):(t.minRatio=o[n].maxRatio,t.maxRatio=t.Ratio,o[n+1].minRatio=t.Ratio,s.a.postWithUploadFile("DCache.php?op=updateDCacheColor",o[n],{showLoading:!0}),s.a.postWithUploadFile("DCache.php?op=updateDCacheColor",o[n+1],{showLoading:!0})),s.a.postWithUploadFile("DCache.php?op=createDCacheColor",t,{showLoading:!0}),e.abrupt("return",!0);case 23:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),edit:function(e){return"+Infi"===e.Ratio?e.maxRatio=null:e.maxRatio=e.Ratio,s.a.postWithUploadFile("DCache.php?op=updateDCacheColor",e,{showLoading:!0})},remove:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var o,a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("DCache.php",{op:"showDCacheColor"});case 2:return o=e.sent.content,a=o.find((function(e){return e.id===JSON.stringify(t)})),a.maxRatio?(r=o.find((function(e){return e.minRatio===a.maxRatio})),r.minRatio=a.minRatio,s.a.postWithUploadFile("DCache.php?op=updateDCacheColor",r,{showLoading:!0})):(n=o.find((function(e){return e.maxRatio===a.minRatio})),n.maxRatio=null,s.a.postWithUploadFile("DCache.php?op=updateDCacheColor",n,{showLoading:!0})),s.a.post("DCache.php?op=deleteDCacheColor",{id:t}),e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),load:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var o,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("DCache.php",Object(l["a"])({op:"showDCacheColor"},t));case 2:if(o=e.sent.content,console.log("tempItem",o),a=null,o.length<=0)s.a.postWithUploadFile("DCache.php?op=createDCacheColor",{minRatio:null,maxRatio:1,Ratio:1,color:"#E57373"},{showLoading:!0}),s.a.postWithUploadFile("DCache.php?op=createDCacheColor",{minRatio:1,maxRatio:null,Ratio:"+Infi",color:"#A5D6A7"},{showLoading:!0});else if(1===o.length)a=o[0],a.minRatio?a.maxRatio?(s.a.postWithUploadFile("DCache.php?op=createDCacheColor",{minRatio:a.maxRatio,maxRatio:null,Ratio:"+Infi",color:"#A5D6A7"},{showLoading:!0}),s.a.postWithUploadFile("DCache.php?op=createDCacheColor",{minRatio:null,maxRatio:a.minRatio,Ratio:"-Infi",color:"#E57373"},{showLoading:!0})):s.a.postWithUploadFile("DCache.php?op=createDCacheColor",{minRatio:null,maxRatio:a.minRatio,Ratio:"-Infi",color:"#E57373"},{showLoading:!0}):s.a.postWithUploadFile("DCache.php?op=createDCacheColor",{minRatio:a.maxRatio,maxRatio:null,Ratio:"+Infi",color:"#A5D6A7"},{showLoading:!0});else for(n in a=o,a)a[n].maxRatio?a[n].Ratio=a[n].maxRatio:a[n].Ratio="+Infi";return console.log("load tempItem",a),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getSortedColorList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("DCache.php",{op:"showDCacheColor"});case 2:if(t=e.sent.content,!(t.length<=0)){e.next=7;break}return e.abrupt("return",[]);case 7:return o=t.sort((function(e,t){var o=e.maxRatio,a=t.maxRatio;return a&&o<a?-1:o&&o>a?1:0})),console.log("getSortedList",t),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),resetColorList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,o,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("DCache.php",{op:"showDCacheColor"});case 2:t=e.sent.content,m.a.showLoading(!0),o=Object(c["a"])(t);try{for(o.s();!(a=o.n()).done;)n=a.value,s.a.post("DCache.php?op=deleteDCacheColor",{id:n.id})}catch(r){o.e(r)}finally{o.f()}s.a.postWithUploadFile("DCache.php?op=createDCacheColor",{minRatio:null,maxRatio:1,Ratio:1,color:"#E57373"},{}),s.a.postWithUploadFile("DCache.php?op=createDCacheColor",{minRatio:1,maxRatio:null,Ratio:"+Infi",color:"#A5D6A7"},{}),m.a.toast("OK");case 9:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},C=i["IKDataEntity"].ModelFactory(f,R),g={components:{IkDataTable:i["IkDataTable"]},data:function(){return{model:C}},methods:{reset:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.model.resetColorList();case 2:e.$refs.thresholdColor.reload();case 3:case"end":return t.stop()}}),t)})))()}}},D=g,x=o("2877"),w=o("6544"),b=o.n(w),v=o("8336"),y=Object(x["a"])(D,a,n,!1,null,"63dcf65c",null);t["default"]=y.exports;b()(y,{VBtn:v["a"]})}}]);
//# sourceMappingURL=chunk-2d0abc56.14011aeb.js.map