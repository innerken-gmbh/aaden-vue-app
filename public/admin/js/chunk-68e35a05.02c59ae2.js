(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68e35a05"],{"0421":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("f4d6"),n=i(r("9d8f"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t,r,a,n,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(a,n)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){l(i,a,n,o,u,"next",e)}function u(e){l(i,a,n,o,u,"throw",e)}o(void 0)}))}}var d={id:{type:a.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"allergName"},icon:{displayName:"icon"},shortName:{displayName:"shortName"},displayText:{displayName:"displayText"}},p={add:function(e){return n.default.postWithUploadFile("Dishes.php?op=addAllergen",e,{showLoading:!0})},edit:function(e){return n.default.postWithUploadFile("Dishes.php?op=updateAllergen",e,{showLoading:!0})},remove:function(e){return n.default.post("Dishes.php?op=deleteAllergen",{id:e})},load:function(){var e=c((function*(e){return(yield n.default.get("Dishes.php",u({op:"showAllAllergen"},e))).content}));function t(t){return e.apply(this,arguments)}return t}()},f=a.IKDataEntity.ModelFactory(d,p);t.default=f},"194c":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(r("4eed")),n=r("f4d6"),i=o(r("9d8f"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t,r,a,n,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(a,n)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){c(i,a,n,o,u,"next",e)}function u(e){c(i,a,n,o,u,"throw",e)}o(void 0)}))}}var p={id:{type:n.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{},lang:{}},f={load:function(){var e=d((function*(e){return(yield i.default.get("CategoryType.php",s({lang:a.default.getLang()},e))).content}));function t(t){return e.apply(this,arguments)}return t}()},y=n.IKDataEntity.ModelFactory(p,f);t.default=y},2967:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("f4d6"),n=u(r("9d8f")),i=u(r("c5e4")),o=u(r("4eed"));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t,r,a,n,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(a,n)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){d(i,a,n,o,u,"next",e)}function u(e){d(i,a,n,o,u,"throw",e)}o(void 0)}))}}var f={load:function(){var e=p((function*(e){return(yield n.default.get("Category.php",l({},e))).content}));function t(t){return e.apply(this,arguments)}return t}()},y={id:{type:a.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},_langsname:{displayName:"labelName",form:!1},langs:{displayName:"labelName",type:a.IKDataEntity.Types.Group,formConfig:{groupName:"labelName",default:o.default.supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:e=>e.lang.toUpperCase()===o.default.getLang(),displayChild:e=>"name"===e},childKey:["name","desc"],labelKey:"lang",children:[i.default,i.default,i.default],header:!1}},g=a.IKDataEntity.ModelFactory(y,f);t.default=g},"2e88":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("f4d6"),n=d(r("9d8f")),i=d(r("194c")),o=d(r("85e4")),u=d(r("c5e4")),s=d(r("4eed")),l=d(r("ee60")),c=d(r("2967"));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r,a,n,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(a,n)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){p(i,a,n,o,u,"next",e)}function u(e){p(i,a,n,o,u,"throw",e)}o(void 0)}))}}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m={add:function(e){return e.appliedAttributeGroup=e.attributeGroupId.join(","),e.catTypeId=e.dishesCategoryTypeId,e.appliedConsumeTypeIds=e.consumeTypeIds.join(","),e.appliedFreeInConsumeTypeIds=e.freeInConsumeTypeIds.join(","),n.default.post("Category.php?op=add",g(g({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},edit:function(e){return e.appliedAttributeGroup=e.attributeGroupId.join(","),e.catTypeId=e.dishesCategoryTypeId,e.appliedConsumeTypeIds=e.consumeTypeIds.join(","),e.appliedFreeInConsumeTypeIds=e.freeInConsumeTypeIds.join(","),n.default.postWithUploadFile("Category.php?op=update",g(g({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},remove:function(e){return n.default.post("Category.php?op=delete",{id:e})},load:function(){var e=f((function*(e){return(yield n.default.get("Category.php",g({},e))).content}));function t(t){return e.apply(this,arguments)}return t}()},b={id:{type:a.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},categorySort:{type:a.IKDataEntity.Types.Integer,displayName:"sectionSort",formConfig:{default:50,required:!1}},_langsname:{displayName:"labelName",form:!1},langs:{displayName:"labelName",type:a.IKDataEntity.Types.Group,formConfig:{groupName:"labelName",default:s.default.supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:e=>e.lang.toUpperCase()===s.default.getLang(),displayChild:e=>"name"===e},childKey:["name","desc"],labelKey:"lang",children:[u.default,u.default,u.default],header:!1},dishesCategoryTypeId:{displayName:"labelType",type:a.IKDataEntity.Types.Option,formConfig:{type:{selectItems:i.default.getList}}},attributeGroupId:{displayName:"attributeGroupNames",type:a.IKDataEntity.Types.Option,formConfig:{required:!1,type:{selectItems:o.default.getList,multiple:!0}}},consumeTypeIds:{type:a.IKDataEntity.Types.Option,formConfig:{required:!1,type:{selectItems:l.default.getList,multiple:!0}}},freeInConsumeTypeIds:{type:a.IKDataEntity.Types.Option,formConfig:{required:!1,type:{selectItems:l.default.getList,multiple:!0}}},color:{type:a.IKDataEntity.Types.Color,formConfig:{required:!1}},printOrder:{type:a.IKDataEntity.Types.Integer,required:!1,formConfig:{default:50,requiredNew:!1,requiredEdit:!1,rule:[e=>/^[0-9]\d*$/.test(e)||"Bitte geben Sie die ganze Zahl ein"]}},parentId:{type:a.IKDataEntity.Types.Option,formConfig:{required:!1,type:{selectItems:c.default.getList,itemText:"_langsname"}}}},v=a.IKDataEntity.ModelFactory(b,m);t.default=v},"2f69":function(e,t,r){"use strict";var a=r("c7eb"),n=r("5530"),i=r("1da1"),o=(r("ac1f"),r("00b4"),r("5089")),u=r("f4d6"),s=r("9d8f"),l=r.n(s),c=r("b0d9"),d=r("ebc9"),p=r("c0d6"),f={id:{type:u["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"name"},image:{type:u["IKDataEntity"].Types.Image,formConfig:{required:!1,type:{root:function(){return p["a"].getters.rootUrl+o["b"].dcImageRoot}}}},attributeGroupId:{displayName:"groupName",type:u["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:c["a"].forceGetList}}},isMultiChosen:{type:u["IKDataEntity"].Types.Boolean},value:{displayName:"value",formConfig:{default:1}},printMod:{displayName:"printMod"},priceMod:{type:u["IKDataEntity"].Types.Float,displayName:"priceMod",formConfig:{overwriteRule:!0,rule:[function(e){return/^(-)?[0-9]+\.{0,1}[0-9]{0,2}$/.test(e)||"please enter the correct price"}]}},dishesCategoryTypeId:{displayName:"warengruppe",type:u["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:d["a"].getList}}},isAsDefault:{type:u["IKDataEntity"].Types.Boolean},isActive:{type:u["IKDataEntity"].Types.Boolean},frontendHide:{type:u["IKDataEntity"].Types.Boolean}},y={add:function(e){return l.a.postWithUploadFile("Category.php?op=addAttribute",e,{showLoading:!0})},edit:function(e){return l.a.postWithUploadFile("Category.php?op=updateAttribute",e,{showLoading:!0})},remove:function(e){return l.a.post("Category.php?op=deleteAttribute",{id:e})},load:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(t){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("Category.php",Object(n["a"])({op:"showAttribute",lang:o["b"].getLang()},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()};t["a"]=u["IKDataEntity"].ModelFactory(f,y)},"30c8":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("f4d6"),n=d(r("9d8f")),i=d(r("4eed")),o=d(r("2e88")),u=d(r("ac46")),s=d(r("0421")),l=d(r("c5e4")),c=d(r("85e4"));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r,a,n,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(a,n)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){p(i,a,n,o,u,"next",e)}function u(e){p(i,a,n,o,u,"throw",e)}o(void 0)}))}}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=Boolean("0"===i.default.isShowOnTable),b={id:{type:a.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},code:{},image:{type:a.IKDataEntity.Types.Image,formConfig:{type:{root:()=>i.default.getEndPoint()+i.default.dishImageRoot},required:!1},displayName:"image",header:m},dishName:{displayName:"name",form:!1},price:{type:a.IKDataEntity.Types.Float,formConfig:{default:"",overwriteRule:!0,rule:[e=>/^[0-9]+\.{0,1}[0-9]{0,2}$/.test(e)||"Bitte geben Sie den richtigen Preis ein"]}},langs:{displayName:"name",type:a.IKDataEntity.Types.Group,formConfig:{groupName:"name",default:i.default.supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:e=>e.lang.toUpperCase()===i.default.getLang(),displayChild:e=>"name"===e},childKey:["name","desc"],labelKey:"lang",children:[l.default,l.default,l.default],header:!1},printGroupId:{displayName:"printCatName",type:a.IKDataEntity.Types.Option,formConfig:{default:1,type:{selectItems:u.default.getList}}},categoryId:{displayName:"labelName",type:a.IKDataEntity.Types.Option,formConfig:{type:{selectItems:o.default.getList,itemText:"_langsname"}}},AllergenId:{type:a.IKDataEntity.Types.Option,formConfig:{type:{selectItems:s.default.getList,multiple:!0},required:!1},displayName:"过敏源"},attributeGroupId:{displayName:"attributeGroupNames",type:a.IKDataEntity.Types.Option,formConfig:{merge:!1,required:!1,type:{selectItems:c.default.getList,multiple:!0,disabledItem:(e,t)=>t.inheritAttributeGroupId?g(g({},e),{},{disabled:t.inheritAttributeGroupId.includes(e.id)}):e}}},localAttributeGroupId:{type:a.IKDataEntity.Types.Option,formConfig:{type:{selectItems:c.default.getList,multiple:!0},inNew:!1,inEdit:!1},header:!1},inheritAttributeGroupId:{displayName:"AttributeGroupName",type:a.IKDataEntity.Types.Option,formConfig:{type:{selectItems:c.default.getList,multiple:!0},inNew:!1,inEdit:!1},header:!1},dishWeight:{displayName:"DishWeight",type:a.IKDataEntity.Types.Integer,formConfig:{default:1,required:!1,rule:[e=>/^[0-9]\d*$/.test(e)||"Bitte geben Sie die ganze Zahl ein"]}},isActive:{type:a.IKDataEntity.Types.Boolean,displayName:"isActive",formConfig:{default:1,required:!1}},dishAlias:{required:!1,formConfig:{requiredNew:!1,requiredEdit:!1}},printText:{displayName:"printTitle",required:!1,formConfig:{requiredNew:!1,requiredEdit:!1}}},v={add:function(e){return e.attributeGroup=e.attributeGroupId.filter(t=>!e.inheritAttributeGroupId.includes(t)).join(","),e.allergenGroup=e.AllergenId.join(","),n.default.postWithUploadFile("Dishes.php?op=add",g(g({},e),{},{params:JSON.stringify(e)}),{showLoading:!0})},edit:function(e){return e.attributeGroup=e.attributeGroupId.filter(t=>!e.inheritAttributeGroupId.includes(t)).join(","),e.allergenGroup=e.AllergenId.join(","),e.file&&(e.imageExt=e.file.name.split(".")[1]),n.default.postWithUploadFile("Dishes.php?op=update",g(g({},e),{},{params:JSON.stringify(e)}),{showLoading:!0})},remove:function(e){return n.default.post("Dishes.php?op=delete",{id:e})},load:function(){var e=f((function*(e){return(yield n.default.get("Dishes.php",g({lang:i.default.getLang()},e))).content.map((function(e){return e.id=e.dishId,e.attributeGroupId=[e.inheritAttributeGroupId?e.inheritAttributeGroupId.split(","):[],e.localAttributeGroupId?e.localAttributeGroupId.split(","):[]].flat().join(","),e.langs=e.langs.map(e=>g(g({},e),{},{desc:e.description})),e}))}));function t(t){return e.apply(this,arguments)}return t}()},I=a.IKDataEntity.ModelFactory(b,v);I.getBuffet=f((function*(){return(yield I.getList()).filter(e=>"8"===e.dishesCategoryTypeId)}));var D=I;t.default=D},"32f5":function(e,t,r){"use strict";r("7784")},"4c03":function(e,t,r){"use strict";var a=r("b85c"),n=r("c7eb"),i=r("1da1"),o=r("5530"),u=(r("ac1f"),r("00b4"),r("a15b"),r("e9c4"),r("f4d6")),s=r("9d8f"),l=r.n(s),c=r("ebc9"),d=r("a86d"),p=r("5089"),f=r("641f"),y=r.n(f),g=r("c0d6"),h=r("b0d9"),m=Boolean("0"===p["b"].isShowOnTable),b=["#FFCDD2","#F8BBD0","#E1BEE7","#D1C4E9","#C5CAE9","#BBDEFB","#B3E5FC","#B2EBF2","#B2DFDB","#C8E6C9","#DCEDC8","#F0F4C3","#FFF9C4","#FFECB3","#FFE0B2","#FFCCBC","#D7CCC8","#CFD8DC"],v={id:{type:u["IKDataEntity"].Types.Integer,form:!1,table:!1},color:{type:u["IKDataEntity"].Types.Color,formConfig:{required:!1}},dcImage:{type:u["IKDataEntity"].Types.Image,formConfig:{required:!1,type:{root:function(){return g["a"].getters.rootUrl+p["b"].dcImageRoot}}},displayName:"image",header:m},attributeGroupId:{displayName:"attributeGroupNames",type:u["IKDataEntity"].Types.Option,tableConfig:{width:"100px"},formConfig:{required:!1,type:{selectItems:h["a"].getList,multiple:!0}}},_langsname:{displayName:"KategorieName",form:!1},langs:{displayName:"labelName",type:u["IKDataEntity"].Types.Group,formConfig:{groupName:"labelName",default:p["b"].supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:function(e){return e.lang.toUpperCase()===p["b"].getLang().toUpperCase()},displayChild:function(e){return console.log(e),"name"===e}},childKey:["name","desc"],labelKey:"lang",children:[d["a"],d["a"],d["a"]],header:!1},dishesCategoryTypeId:{displayName:"warengruppe",type:u["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:c["a"].getList}}},printOrder:{type:u["IKDataEntity"].Types.Integer,required:!1,formConfig:{default:50,requiredNew:!1,requiredEdit:!1,rule:[function(e){return/^[0-9]\d*$/.test(e)||"Bitte geben Sie die ganze Zahl ein"}]}},categorySort:{type:u["IKDataEntity"].Types.Integer,displayName:"sectionSort",formConfig:{required:!0}}},I={add:function(e){return e.appliedAttributeGroup=e.attributeGroupId.join(","),e.catTypeId=e.dishesCategoryTypeId,l.a.post("Category.php?op=add",Object(o["a"])(Object(o["a"])({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},edit:function(e){return e.appliedAttributeGroup=e.attributeGroupId.join(","),e.catTypeId=e.dishesCategoryTypeId,console.log("label-manage: item()",e),l.a.postWithUploadFile("Category.php?op=update",Object(o["a"])(Object(o["a"])({},e),{},{langs:JSON.stringify(e.langs)}),{showLoading:!0})},remove:function(e){return l.a.post("Category.php?op=delete",{id:e})},load:function(){var e=Object(i["a"])(Object(n["a"])().mark((function e(t){var r;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("Category.php",t);case 2:return r=e.sent.content,console.log(r,"cate response"),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),randomColor:function(){var e=Object(i["a"])(Object(n["a"])().mark((function e(t){var r,i,u;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:y.a.showLoading(!0),r=Object(a["a"])(t),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=13;break}return u=i.value,u.appliedAttributeGroup=u.attributeGroupId.join(","),u.catTypeId=u.dishesCategoryTypeId,u.color=b[Math.round(18*Math.random())],e.next=11,l.a.postWithUploadFile("Category.php?op=update",Object(o["a"])(Object(o["a"])({},u),{},{langs:JSON.stringify(u.langs)}),{showLoading:!1});case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](2),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:y.a.toast("OK");case 22:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})));function t(t){return e.apply(this,arguments)}return t}(),removeAllColor:function(){var e=Object(i["a"])(Object(n["a"])().mark((function e(t){var r,i,u;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:y.a.showLoading(!0),r=Object(a["a"])(t),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=13;break}return u=i.value,u.appliedAttributeGroup=u.attributeGroupId.join(","),u.catTypeId=u.dishesCategoryTypeId,u.color="#FFFFFF",e.next=11,l.a.postWithUploadFile("Category.php?op=update",Object(o["a"])(Object(o["a"])({},u),{},{langs:JSON.stringify(u.langs)}),{showLoading:!1});case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](2),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:y.a.toast("OK");case 22:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})));function t(t){return e.apply(this,arguments)}return t}(),removeCategoryImage:function(){var e=Object(i["a"])(Object(n["a"])().mark((function e(t){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("Category.php?op=removeCategoryImage",Object(o["a"])({},t),{showLoading:!0});case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},D=u["IKDataEntity"].ModelFactory(v,I);console.log("Category",D),t["a"]=D},"591e":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculatePriceWithDiscount=m,t.calculateDiscountPrice=b,t.calculateDiscountMod=v,t.StandardDishesListFactory=I,t.getDishesInfo=P,t.getDishes=x;var a=s(r("30c8")),n=s(r("194c")),i=s(r("2e88")),o=s(r("641f")),u=s(r("9d8f"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r,a,n,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(a,n)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){l(i,a,n,o,u,"next",e)}function u(e){l(i,a,n,o,u,"throw",e)}o(void 0)}))}}var d={note:"",apply:[],modShow:!1,forceFormat:!1};function p(e){var t,r,a=[];return e.apply||e.agName?((null===e||void 0===e||null===(t=e.apply)||void 0===t?void 0:t.length)>0?e.apply.forEach(t=>{var r=e.modInfo.find(e=>e.id===t.groupId),n=r.name,i=[t.selectId].flat().reduce((e,t)=>{if(!t)return e;var a=r.selectValue.indexOf(t),i="".concat(r.selectName[a]),o=r.priceInfo[a];return e.push({groupName:n,value:i,priceInfo:o,hash:n+":"+i+"p"+o}),e},[]);a=a.concat(i)}):(null===e||void 0===e||null===(r=e.agName)||void 0===r?void 0:r.length)>0&&([e.agNameArr,e.aNameArr,e.priceInfoArr,e.agIdArr,e.aIdArr]=[e.agName,e.aName,e.priceInfo,e.agId,e.aId].map(e=>e.split(",")),e.agNameArr.forEach((t,r)=>{a.push({agId:e.agIdArr[r],aId:e.aIdArr[r],groupName:t,value:e.aNameArr[r],priceInfo:e.priceInfoArr[r],hash:t+":"+e.aNameArr[r]+"p"+e.priceInfoArr[r]+"g"+e.agIdArr[r]})})),a):a}function f(e){var t=0;return e.displayApply.forEach(e=>{var r;t+=parseFloat(null!==(r=e.priceInfo)&&void 0!==r?r:0)}),t}function y(e){return e.reduce((e,t)=>(e.push(t.hash),e),[]).join("/")}function g(e,t,r,a,n,i,o){return e+"&"+y(t)+"-&-"+r+"-&-"+a+"-&-"+n+"-&"+i+"-&"+o}function h(e){var t,r,a,n,i,o,u;e.note=null!==(t=e.note)&&void 0!==t?t:"",e.displayApply=p(e),e.addPrice=f(e),e.originPrice=parseFloat(0===parseFloat(e.price)?0:null!==(r=null!==(a=e.originPrice)&&void 0!==a?a:e.price)&&void 0!==r?r:0),e.realPrice=parseFloat(e.originPrice)+parseFloat(e.addPrice)+parseFloat(null!==(n=e.tempDiscountMod)&&void 0!==n?n:0),e.code.includes("ea")&&(e.realPrice=e.price),e.identity=g(e.code,e.displayApply,e.note,e.tempDiscountStr,null!==(i=e.price)&&void 0!==i?i:e.realPrice,null!==(o=e.currentName)&&void 0!==o?o:"",null!==(u=e.overrideConsumeTypeId)&&void 0!==u?u:"")}function m(e,t){var{timesMod:r,minusMod:a}=v(t);return parseFloat(e)*r-a}function b(e,t){var{timesMod:r,minusMod:a}=v(t);return parseFloat(e)-(parseFloat(e)*r-a)}function v(e){var t=1,r=0,a=/^([0-9]+(\.[0-9]+)?)?((p)+([kg])?)?$/,n=()=>({minusMod:r,timesMod:t});return a.test(e)?(e.endsWith("p")?t=1-.01*parseFloat(e.slice(0,-1)):r=parseFloat(e),n()):n()}function I(){var e=[],t={},r={},a=0,n=function(t,n){var i=o.default.deepCopy(t);i.count=null!==n&&void 0!==n?n:t.count,i.sumCount=i.count,i.hash=a,h(i),a++,r[i.identity]=i,i.change=function(e){c(i,e)},e.push(i)};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(null===e||void 0===e?void 0:e.length)>0&&Object.assign(t,e.reduce((e,t)=>(e[t.code]=t,e),{}))}function u(e){return s(e,!1)}function s(e){var t,r,a,n,i,u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=u?o.default.deepCopy(e):e;return s.count=parseInt(null!==(t=null!==(r=s.count)&&void 0!==r?r:s.sumCount)&&void 0!==t?t:0),s.name=null!==(a=null!==(n=null!==(i=s.name)&&void 0!==i?i:s.dishName)&&void 0!==n?n:s._langsname)&&void 0!==a?a:s.currentName,s.code.toLowerCase().includes("ea")&&(s.name=s.currentName),h(s),s.wellFormat=!0,Object.assign({},d,s)}function l(){return Object.keys(t).reduce((e,r)=>(e.push(t[r]),e),[])}var c=function(a,i){var o=t[a.code];o&&(parseInt(o.count)+parseInt(i)>0?o.count+=i:o.count=0),a.wellFormat&&!a.forceFormat||(a.forceFormat=!1,a=s(a));var u=r[a.identity];u?u.count+i>0?(u.count+=i,u.sumCount=u.count):(e.splice(e.indexOf(u),1),delete r[a.identity]):(i>=0||a.count>=0)&&n(a,i)},p=function(e){return e.map(u)},f=function(e,t){c(e,t)},y=function(e,t){c(e,t)},g=function(){return e.reduce((e,t)=>e+parseFloat(t.realPrice*t.count),0)},m=function(){return parseInt(e.reduce((e,t)=>e+parseInt(t.count),0))},b=function(e){v(e)},v=function(e){for(var t of(I(),e))f(t)},I=function(){for(var a of Object.keys(t))t[a].count=0;for(var n of Object.keys(r))delete r[n];e.splice(0,e.length)};return{orderDictionary:r,setDishList:i,dishDictionary:t,list:e,getDishList:l,add:f,remove:y,total:g,count:m,loadTTDishList:b,formatList:p,loadList:v,clear:I}}var D=[],O=[],C=[],j=[];function w(e,t,r){return e=e.map(e=>(e.dishes=t.filter(t=>parseInt(t.categoryId)===parseInt(e.id)).map(e=>(e.count=0,e.note="",e)),e)).filter(e=>e.dishes.length>0),r.map(t=>(t.categories=e.filter(e=>parseInt(t.id)===parseInt(e.dishesCategoryTypeId)),t)).sort((e,t)=>9===parseInt(t.id)?-1:9===parseInt(e.id)?1:parseInt(e.id)<parseInt(t.id)?-1:parseInt(e.id)>parseInt(t.id)?1:0)}var E=I();function P(){return N.apply(this,arguments)}function N(){return N=c((function*(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DE";return 0===j.length&&([C,O,D]=yield Promise.all([x(),i.default.getList(),n.default.getList()]),!1!==e&&(O=(yield u.default.get("Category.php?op=withConsumeType",{lang:t,consumeTypeId:e})).content),j=w(O,C,D)),j})),N.apply(this,arguments)}function x(){return T.apply(this,arguments)}function T(){return T=c((function*(){return 0===C.length&&(C=E.formatList(yield a.default.getList())),C})),T.apply(this,arguments)}},6306:function(e,t,r){"use strict";var a=r("c7eb"),n=r("5530"),i=r("1da1"),o=r("f4d6"),u=r("9d8f"),s=r.n(u),l={id:{type:o["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"sectionName"},isSingleLinePrint:{type:o["IKDataEntity"].Types.Boolean,displayName:"isSingleLinePrint"},isSingleOrderPrint:{type:o["IKDataEntity"].Types.Boolean,displayName:"isSingleOrderPrint"},upsideDown:{type:o["IKDataEntity"].Types.Boolean},printerCount:{displayName:"printerCount",formConfig:{inEdit:!1,inNew:!1}},defaultRetryCount:{formConfig:{default:"0"}},totalDishesCount:{formConfig:{inEdit:!1,inNew:!1}}},c={load:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(t){var r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("Printer.php",Object(n["a"])({op:"showPrinterGroups"},t));case 2:return r=e.sent.content,console.log("printer",r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),add:function(e){return s.a.postWithUploadFile("Printer.php?op=addPrinterGroups",e,{showLoading:!0})},edit:function(e){return s.a.postWithUploadFile("Printer.php?op=updatePrinterGroups",e,{showLoading:!0})},remove:function(e){return s.a.post("Printer.php?op=deletePrinterGroup",{id:e})}};t["a"]=o["IKDataEntity"].ModelFactory(l,c)},"6e35":function(e,t,r){"use strict";var a=r("c7eb"),n=r("5530"),i=r("1da1"),o=r("f4d6"),u=r("9d8f"),s=r.n(u),l={id:{type:o["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"allergName"},icon:{displayName:"icon"},shortName:{displayName:"shortName"},displayText:{displayName:"displayText"}},c={add:function(e){return s.a.postWithUploadFile("Dishes.php?op=addAllergen",e,{showLoading:!0})},edit:function(e){return s.a.postWithUploadFile("Dishes.php?op=updateAllergen",e,{showLoading:!0})},remove:function(e){return s.a.post("Dishes.php?op=deleteAllergen",{id:e})},load:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(t){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("Dishes.php",Object(n["a"])({op:"showAllAllergen"},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()};t["a"]=o["IKDataEntity"].ModelFactory(l,c)},7784:function(e,t,r){},"85e4":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(r("4eed")),n=r("f4d6"),i=o(r("9d8f"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t,r,a,n,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(a,n)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){c(i,a,n,o,u,"next",e)}function u(e){c(i,a,n,o,u,"throw",e)}o(void 0)}))}}var p={id:{type:n.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{},printTitle:{},required:{type:n.IKDataEntity.Types.Boolean},multiSelect:{type:n.IKDataEntity.Types.Boolean},attrubuteCount:{type:n.IKDataEntity.Types.Integer,form:!1}},f={load:function(){var e=d((function*(e){return(yield i.default.get("Category.php",s({op:"showAttributeGroup",lang:a.default.getLang()},e))).content}));function t(t){return e.apply(this,arguments)}return t}(),add:function(e){return i.default.postWithUploadFile("Category.php?op=addAttributeGroup",e,{showLoading:!0})},edit:function(e){return i.default.postWithUploadFile("Category.php?op=updateAttributeGroup",e,{showLoading:!0})},remove:function(e){return i.default.post("Category.php?op=deleteAttributeGroup",{id:e})}},y=n.IKDataEntity.ModelFactory(p,f);t.default=y},a523:function(e,t,r){"use strict";r("4de4"),r("d3b7"),r("b64b"),r("2ca0"),r("99af"),r("20f6"),r("4b85"),r("498a"),r("a15b");var a=r("2b0e");function n(e){return a["a"].extend({name:"v-".concat(e),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(t,r){var a=r.props,n=r.data,i=r.children;n.staticClass="".concat(e," ").concat(n.staticClass||"").trim();var o=n.attrs;if(o){n.attrs={};var u=Object.keys(o).filter((function(e){if("slot"===e)return!1;var t=o[e];return e.startsWith("data-")?(n.attrs[e]=t,!1):t||"string"===typeof t}));u.length&&(n.staticClass+=" ".concat(u.join(" ")))}return a.id&&(n.domProps=n.domProps||{},n.domProps.id=a.id),t(a.tag,n,i)}})}var i=r("d9f7");t["a"]=n("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(e,t){var r,a=t.props,n=t.data,o=t.children,u=n.attrs;return u&&(n.attrs={},r=Object.keys(u).filter((function(e){if("slot"===e)return!1;var t=u[e];return e.startsWith("data-")?(n.attrs[e]=t,!1):t||"string"===typeof t}))),a.id&&(n.domProps=n.domProps||{},n.domProps.id=a.id),e(a.tag,Object(i["a"])(n,{staticClass:"container",class:Array({"container--fluid":a.fluid}).concat(r||[])}),o)}})},a86d:function(e,t,r){"use strict";var a=r("f4d6"),n={id:{type:a["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{displayName:"Name"},lang:{},desc:{displayName:"Beschreibung",formConfig:{required:!1}}};t["a"]=a["IKDataEntity"].ModelFactory(n,{})},ac46:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("f4d6"),n=i(r("9d8f"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t,r,a,n,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(a,n)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){l(i,a,n,o,u,"next",e)}function u(e){l(i,a,n,o,u,"throw",e)}o(void 0)}))}}var d={id:{type:a.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"sectionName"},isSingleLinePrint:{type:a.IKDataEntity.Types.Boolean,displayName:"isSingleLinePrint"},isSingleOrderPrint:{type:a.IKDataEntity.Types.Boolean,displayName:"isSingleOrderPrint"},printerCount:{displayName:"printerCount",formConfig:{inEdit:!1,inNew:!1}},defaultRetryCount:{formConfig:{default:"0"}},totalDishesCount:{formConfig:{inEdit:!1,inNew:!1}}},p={load:function(){var e=c((function*(e){return(yield n.default.get("Printer.php",u({op:"showPrinterGroups"},e))).content}));function t(t){return e.apply(this,arguments)}return t}(),add:function(e){return n.default.postWithUploadFile("Printer.php?op=addPrinterGroups",e,{showLoading:!0})},edit:function(e){return n.default.postWithUploadFile("Printer.php?op=updatePrinterGroups",e,{showLoading:!0})},remove:function(e){return n.default.post("Printer.php?op=deletePrinterGroup",{id:e})}},f=a.IKDataEntity.ModelFactory(d,p);t.default=f},b0d9:function(e,t,r){"use strict";var a=r("c7eb"),n=r("5530"),i=r("1da1"),o=r("5089"),u=r("f4d6"),s=r("9d8f"),l=r.n(s),c={id:{type:u["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{},printTitle:{},required:{type:u["IKDataEntity"].Types.Boolean},multiSelect:{type:u["IKDataEntity"].Types.Boolean},attrubuteCount:{type:u["IKDataEntity"].Types.Integer,form:!1}},d={load:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(t){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("Category.php",Object(n["a"])({op:"showAttributeGroup",lang:o["b"].getLang()},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),add:function(e){return l.a.postWithUploadFile("Category.php?op=addAttributeGroup",e,{showLoading:!0})},edit:function(e){return l.a.postWithUploadFile("Category.php?op=updateAttributeGroup",e,{showLoading:!0})},remove:function(e){return l.a.post("Category.php?op=deleteAttributeGroup",{id:e})}};t["a"]=u["IKDataEntity"].ModelFactory(c,d)},c5e4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("f4d6"),n={id:{type:a.IKDataEntity.Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{displayName:"Name"},lang:{},desc:{displayName:"Beschreibung",formConfig:{required:!1}}},i=a.IKDataEntity.ModelFactory(n,{});t.default=i},c791:function(e,t,r){"use strict";var a=r("c7eb"),n=r("1da1"),i=r("5530"),o=(r("ac1f"),r("00b4"),r("caad"),r("2532"),r("d81d"),r("fb6a"),r("a15b"),r("0481"),r("4069"),r("1276"),r("a4d3"),r("e01a"),r("e9c4"),r("4de4"),r("d3b7"),r("b0c0"),r("f4d6")),u=r("9d8f"),s=r.n(u),l=r("5089"),c=r("c0d6"),d=r("4c03"),p=r("6306"),f=r("6e35"),y=r("a86d"),g=r("b0d9"),h=r("9225"),m=Boolean("0"===l["b"].isShowOnTable),b={id:{type:o["IKDataEntity"].Types.Integer,displayName:"id",form:!1,header:!0},image:{type:o["IKDataEntity"].Types.Image,formConfig:{type:{root:function(){return c["a"].getters.rootUrl+l["b"].dishImageRoot}},required:!1},tableConfig:{filterable:!1},displayName:"image",header:m},color:{type:o["IKDataEntity"].Types.Color,formConfig:{required:!1},tableConfig:{filterable:!1}},code:{tableConfig:{width:"60px"},header:!1},displayCode:{displayName:"code",form:!1,tableConfig:{}},dishName:{displayName:"name",form:!1,tableConfig:{}},price:{type:o["IKDataEntity"].Types.Float,formConfig:{default:"",overwriteRule:!0,rule:[function(e){return/^[0-9]+\.{0,1}[0-9]{0,2}$/.test(e)||"Bitte geben Sie den richtigen Preis ein"}]}},langs:{displayName:"name",type:o["IKDataEntity"].Types.Group,formConfig:{groupName:"name",default:l["b"].supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:function(e){return e.lang.toLowerCase()===l["b"].getLang().toLowerCase()},displayChild:function(e){return"name"===e}},childKey:["name","desc"],labelKey:"lang",children:[y["a"],y["a"],y["a"]],header:!1},printGroupId:{displayName:h["a"].t("printCatName"),type:o["IKDataEntity"].Types.Option,formConfig:{default:1,type:{selectItems:p["a"].getList}}},extraPrintGroupIds:{displayName:h["a"].t("extraPrintGroup"),type:o["IKDataEntity"].Types.Option,formConfig:{type:{multiple:!0,selectItems:p["a"].getList},required:!1},header:!1},categoryId:{displayName:"分类",tableConfig:{filterable:!1},type:o["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:d["a"].getList,itemText:"_langsname"}}},AllergenId:{displayName:h["a"].t("过敏源"),type:o["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:f["a"].getList,multiple:!0},required:!1},header:!1},attributeGroupId:{displayName:h["a"].t("attributeGroupNames"),type:o["IKDataEntity"].Types.Option,formConfig:{merge:!1,required:!1,type:{selectItems:g["a"].getList,multiple:!0,disabledItem:function(e,t){return t.inheritAttributeGroupId?Object(i["a"])(Object(i["a"])({},e),{},{disabled:t.inheritAttributeGroupId.includes(e.id)}):e}}},header:!1},localAttributeGroupId:{type:o["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:g["a"].getList,multiple:!0}},form:!1,header:!1},inheritAttributeGroupId:{displayName:"AttributeGroupName",type:o["IKDataEntity"].Types.Option,formConfig:{type:{selectItems:g["a"].getList,multiple:!0}},form:!1,header:!1},dishWeight:{displayName:"DishWeight",type:o["IKDataEntity"].Types.Integer,formConfig:{default:1,required:!1,rule:[function(e){return/^[0-9]\d*$/.test(e)||"Bitte geben Sie die ganze Zahl ein"}]},header:!1},isActive:{type:o["IKDataEntity"].Types.Boolean,displayName:"isActive",formConfig:{default:1,required:!1}},dishAlias:{required:!1,formConfig:{requiredNew:!1,requiredEdit:!1},header:!1}},v={load:function(){var e=Object(n["a"])(Object(a["a"])().mark((function e(t){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("Dishes.php",Object(i["a"])({lang:l["b"].getLang(),onlyActive:0},t));case 2:return e.abrupt("return",e.sent.content.map((function(e){return e.displayCode=e.code.length>5?e.code.slice(0,5)+"...":e.code,e.id=e.dishId,e.attributeGroupId=[e.inheritAttributeGroupId?e.inheritAttributeGroupId.split(","):[],e.localAttributeGroupId?e.localAttributeGroupId.split(","):[]].flat().join(","),e.langs=e.langs.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{desc:e.description})})),e})));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),multipleAdd:function(e){return s.a.postWithUploadFile("Dishes.php?op=add",Object(i["a"])(Object(i["a"])({},e),{},{params:JSON.stringify(e)}),{showLoading:!1})},add:function(e){var t;return e.attributeGroup=e.attributeGroupId.filter((function(t){return!e.inheritAttributeGroupId.includes(t)})).join(","),e.allergenGroup=e.AllergenId.join(","),console.log(e.extraPrintGroupIds),e.extraPrintGroupIds=null!==(t=e.extraPrintGroupIds)&&void 0!==t&&t.join?e.extraPrintGroupIds.join(","):"",s.a.postWithUploadFile("Dishes.php?op=add",Object(i["a"])(Object(i["a"])({},e),{},{params:JSON.stringify(e)}),{showLoading:!0})},remove:function(e){return s.a.post("Dishes.php?op=delete",{id:e})},edit:function(e){var t;return e.attributeGroup=e.attributeGroupId.filter((function(t){return!e.inheritAttributeGroupId.includes(t)})).join(","),e.allergenGroup=e.AllergenId.join(","),e.extraPrintGroupIds=null!==(t=e.extraPrintGroupIds)&&void 0!==t&&t.join?e.extraPrintGroupIds.join(","):"",e.file&&(e.imageExt=e.file.name.split(".")[1]),e.isActive=e.isActive?1:0,s.a.postWithUploadFile("Dishes.php?op=update",Object(i["a"])(Object(i["a"])({},e),{},{params:JSON.stringify(e)}),{showLoading:!0})}},I=o["IKDataEntity"].ModelFactory(b,v);I.getBuffet=Object(n["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I.getList();case 2:return e.abrupt("return",e.sent.filter((function(e){return"8"===e.dishesCategoryTypeId})));case 3:case"end":return e.stop()}}),e)}))),t["a"]=I},ccdd:function(e,t,r){"use strict";var a=r("5530"),n=r("641f"),i=r.n(n);t["a"]=Object(a["a"])({},i.a)},ebc9:function(e,t,r){"use strict";var a=r("c7eb"),n=r("5530"),i=r("1da1"),o=r("5089"),u=r("f4d6"),s=r("9d8f"),l=r.n(s),c={id:{type:u["IKDataEntity"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{},lang:{}},d={load:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(t){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("CategoryType.php",Object(n["a"])({lang:o["b"].getLang()},t));case 2:return e.abrupt("return",e.sent.content);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()};t["a"]=u["IKDataEntity"].ModelFactory(c,d)},ed28:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-card",[r("v-card-title",[e._v(e._s(e.$t("高级销售分析")))]),r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"4"}},[r("v-dialog",{ref:"dialog",attrs:{"return-value":e.dates,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.dates=t},"update:return-value":function(t){e.dates=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:e.$t("日期筛选"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}},"v-text-field",n,!1),a))]}}]),model:{value:e.datePickerDialog,callback:function(t){e.datePickerDialog=t},expression:"datePickerDialog"}},[r("v-date-picker",{attrs:{range:"",scrollable:""},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.datePickerDialog=!1}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.dates)}}},[e._v(" OK ")])],1)],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-dialog",{ref:"timeDialog",attrs:{"return-value":e.hourStart,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.hourStart=t},"update:return-value":function(t){e.hourStart=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:e.$t("startTime"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.hourStart,callback:function(t){e.hourStart=t},expression:"hourStart"}},"v-text-field",n,!1),a))]}}]),model:{value:e.timeStartPickerDialog,callback:function(t){e.timeStartPickerDialog=t},expression:"timeStartPickerDialog"}},[r("v-time-picker",{attrs:{range:"",scrollable:""},model:{value:e.hourStart,callback:function(t){e.hourStart=t},expression:"hourStart"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.timeStartPickerDialog=!1}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.timeDialog.save(e.hourStart)}}},[e._v(" OK ")])],1)],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-dialog",{ref:"timeEndDialog",attrs:{"return-value":e.hourEnd,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.hourEnd=t},"update:return-value":function(t){e.hourEnd=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:e.$t("endTime"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.hourEnd,callback:function(t){e.hourEnd=t},expression:"hourEnd"}},"v-text-field",n,!1),a))]}}]),model:{value:e.timeEndPickerDialog,callback:function(t){e.timeEndPickerDialog=t},expression:"timeEndPickerDialog"}},[r("v-time-picker",{attrs:{range:"",scrollable:""},model:{value:e.hourEnd,callback:function(t){e.hourEnd=t},expression:"hourEnd"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.timeEndPickerDialog=!1}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.timeEndDialog.save(e.hourEnd)}}},[e._v(" OK ")])],1)],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{label:e.$t("永久隐藏属性"),"item-text":"name","item-value":"id",multiple:"",clearable:"",items:e.realAttributes},on:{change:function(t){return e.selectAttributes(e.fixedHideAttributes)},"click:clear":e.clearFixedHideAttribute},model:{value:e.fixedHideAttributes,callback:function(t){e.fixedHideAttributes=t},expression:"fixedHideAttributes"}})],1),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{label:e.$t("隐藏属性"),"item-text":"name","item-value":"id",multiple:"",clearable:"",items:e.realAttributes},model:{value:e.hideAttributes,callback:function(t){e.hideAttributes=t},expression:"hideAttributes"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{label:e.$t("永久隐藏菜品"),"item-text":"dishName","item-value":"dishName",multiple:"",clearable:"",items:e.allFixedDishesData},on:{change:function(t){return e.selectFixedDishes(e.fixedHideDishes)},"click:clear":e.clearFixedHideDishes},model:{value:e.fixedHideDishes,callback:function(t){e.fixedHideDishes=t},expression:"fixedHideDishes"}})],1),r("v-col",{attrs:{cols:"4"}},[r("v-select",{attrs:{label:e.$t("选择菜品(不选即为选择所有菜品)"),"item-text":"dishName","item-value":"dishName",multiple:"",items:e.allDishData},on:{change:function(t){return e.selectDishes(e.hideDishes)}},model:{value:e.hideDishes,callback:function(t){e.hideDishes=t},expression:"hideDishes"}})],1),r("v-col",{attrs:{cols:"4"}},[r("v-btn",{attrs:{disabled:e.tableData.length<2,"x-large":"",color:"primary",block:""},on:{click:function(t){e.showSalesTable=!0}}},[e._v(" "+e._s(e.$t("查看分析报告"))+" ")])],1)],1)],1)],1),r("v-dialog",{attrs:{fullscreen:"",scrollable:""},model:{value:e.showSalesTable,callback:function(t){e.showSalesTable=t},expression:"showSalesTable"}},[r("v-card",[r("v-toolbar",{attrs:{dense:"",dark:""}},[r("v-toolbar-title",[e._v(" "+e._s(e.$t("销售统计"))+" ")]),r("v-spacer"),r("v-btn",{staticClass:"mr-4",on:{click:e.print}},[r("v-icon",{attrs:{left:""}},[e._v(" mdi-printer ")]),e._v(" "+e._s(e.$t("打印统计单"))+" ")],1),r("v-icon",{on:{click:function(t){e.showSalesTable=!e.showSalesTable}}},[e._v(" mdi-close ")])],1),r("v-card-text",[r("v-data-table",{attrs:{"fixed-header":"",dense:"","hide-default-footer":"","disable-pagination":"",height:"calc(100vh - 72px)","item-class":e.computeClass,headers:e.headers,items:e.tableData,"items-per-page":100}})],1)],1)],1)],1)},n=[],i=r("5530"),o=r("c7eb"),u=r("1da1"),s=(r("99af"),r("d3b7"),r("159b"),r("d81d"),r("4de4"),r("caad"),r("2532"),r("b0c0"),r("b680"),r("e9c4"),r("7db0"),r("07ac"),r("ddb0"),r("0a61")),l=r("591e"),c=r("2f69"),d=r("b0d9"),p=r("c791"),f=r("641f"),y=r("ff51"),g=r("ccdd"),h={name:"SalesInsight",data:function(){return{datePickerDialog:null,timeStartPickerDialog:null,timeEndPickerDialog:null,hourStart:"",hourEnd:"",dates:[],showSalesTable:null,unfilteredData:[],displayData:[],attributeData:[],hideDishes:[],filterDishesData:[],hideAttributes:[],fixedHideAttributes:[],fixedHideDishes:[],mergedGroup:[],allDishData:[],allFixedDishesData:[],fixedHeader:[{text:"name",value:"name"},{text:"price",value:"price"},{text:"amount",value:"amount"}]}},computed:{headers:function(){return this.fixedHeader.concat(this.attributeHeader)},realAttributes:function(){return this.attributeData.reduce((function(e,t){return t.childAttributes&&t.childAttributes.forEach((function(t){return e.push(t)})),e}),[])},attributeHeader:function(){var e=this;return this.realAttributes.filter((function(t){return!(e.hideAttributes.includes(t.id)||e.fixedHideAttributes.includes(t.id))})).map((function(e){return e.text=e.name,e.value="attr"+e.id,e}))},tableData:function(){var e=[],t=function(e){return e.isDish=!0,e.price="".concat(e.originPrice," (avg:€").concat((e.totalPrice/e.totalCount).toFixed(2),")"),e.amount=e.totalCount,e.groupData.forEach((function(t){e["attr"+t.id]=t.count})),e},r=function(e,t){return e.name="v:"+t,e.amount=e.count,e.groupData.forEach((function(t){e["attr"+t.id]=t.count})),e};return this.hideDishes.length>0?this.filterDishesData.forEach((function(t){e.push(t),t.variants.forEach((function(t,a){e.push(r(t,a))}))})):this.displayData.forEach((function(a){e.push(t(a)),a.variants.forEach((function(t,a){e.push(r(t,a))}))})),e}},watch:{dates:function(e){this.loadSalesData(e)},hourStart:function(e){this.loadSalesData(this.dates,e,this.hourEnd)},hourEnd:function(e){this.loadSalesData(this.dates,this.hourStart,e)}},mounted:function(){var e=this;return Object(u["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadData();case 2:case"end":return t.stop()}}),t)})))()},methods:{clearFixedHideAttribute:function(){localStorage.removeItem("fixedHideAttribute")},clearFixedHideDishes:function(){localStorage.removeItem("fixedHideDishes")},selectDishes:function(e){this.filterDishesData=this.displayData.filter((function(t){return e.includes(t.name)}))},selectFixedDishes:function(e){var t=JSON.stringify(e);localStorage.setItem("fixedHideDishes",t),this.allDishData=this.allFixedDishesData.filter((function(t){return!e.includes(t.dishName)})),this.displayData=this.unfilteredData.filter((function(t){return!e.includes(t.name)}))},selectAttributes:function(e){var t=JSON.stringify(e);localStorage.setItem("fixedHideAttribute",t)},computeClass:function(e){return e.isDish?"dishRow normal":"normal"},groupElement:function(e,t){var r=function(r,a){var n=f["IKUtils"].deepCopy(r),i=function(r){return e.forEach((function(e){var i=n.find((function(r){return e[t]===r[a]}));i&&(i[r]||(i[r]=[]),i[r].push(e))})),n};return{saveIn:i}};return{on:r}},getAllAttribute:function(){return Object(u["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].getList();case 2:return e.abrupt("return",e.sent.filter((function(e){return e.optattributeGroupId.length>0})));case 3:case"end":return e.stop()}}),e)})))()},getAttributeGrouped:function(){var e=this;return Object(u["a"])(Object(o["a"])().mark((function t(){var r,a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].getList();case 2:return r=t.sent,t.next=5,e.getAllAttribute();case 5:return a=t.sent,t.abrupt("return",e.groupElement(a,"attributeGroupId").on(r,"id").saveIn("childAttributes"));case 7:case"end":return t.stop()}}),t)})))()},getSalesInfo:function(e,t,r){var a=this;return Object(u["a"])(Object(o["a"])().mark((function n(){var i,u,c;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["N"])(e,t,r);case 2:if(i=n.sent,0!==i.length){n.next=5;break}return n.abrupt("return",[]);case 5:return u=Object(l["StandardDishesListFactory"])().formatList(i.content),c=u.reduce((function(e,t){var r=e[t.code];r?(r.totalCount+=t.count,r.totalPrice+=t.realPrice*t.count):(e[t.code]={categoryId:parseInt(t.categoryId),categoryTypeId:parseInt(t.categoryTypeId),code:t.code,name:t.name,totalCount:t.count,originPrice:t.originPrice,totalPrice:t.realPrice*t.count,variants:[]},r=e[t.code]);var a=r.variants.find((function(e){return e.identity===t.identity}));return a?a.count+=t.count:r.variants.push({identity:t.identity,count:parseInt(t.count),displayApply:t.displayApply,price:t.realPrice}),e}),{}),n.abrupt("return",Object.values(c).map((function(e){return e.group=a.groupAttribute(e),e})));case 8:case"end":return n.stop()}}),n)})))()},groupAttribute:function(e){var t=this;return e.groupData=f["IKUtils"].deepCopy(this.realAttributes),e.variants.forEach((function(r){r.groupData=f["IKUtils"].deepCopy(t.realAttributes),r.displayApply.forEach((function(t){var a=e.groupData.find((function(e){return e.id===parseInt(t.aId)})),n=r.groupData.find((function(e){return e.id===parseInt(t.aId)}));a&&n&&(n.count||(n.count=0),n.count++,a.count||(a.count=0),a.count++)}))})),e.variants.reduce((function(e,t){return t.displayApply.forEach((function(t){var r=e.find((function(e){return e.agId===t.agId}));r||(r=Object(i["a"])(Object(i["a"])({},t),{},{values:[]}),e.push(r));var a=r.values.find((function(e){return e.aId===t.aId}));a?a.count++:r.values.push(Object(i["a"])(Object(i["a"])({},t),{},{count:1}))})),e}),[])},loadSalesData:function(e,t,r){var a=this;return Object(u["a"])(Object(o["a"])().mark((function n(){var i,u;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.getSalesInfo(e,t,r);case 2:i=n.sent,u=i.reduce((function(e,t){return e.totalPrice+=t.totalPrice,e.groupData.forEach((function(e,r){var a;e.count||(e.count=0),e.count+=null!==(a=t.groupData[r].count)&&void 0!==a?a:0})),e.totalCount+=t.totalCount,e}),{code:"-",name:"Alle",totalPrice:0,originPrice:0,totalCount:0,groupData:f["IKUtils"].deepCopy(a.realAttributes),variants:[]}),a.unfilteredData=[u].concat(i),a.displayData=a.unfilteredData.filter((function(e){return!a.fixedHideDishes.includes(e.name)}));case 6:case"end":return n.stop()}}),n)})))()},loadData:function(){var e=this;return Object(u["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dates=[Object(y["a"])(0),Object(y["a"])(0)],t.next=3,e.getAttributeGrouped();case 3:return e.attributeData=t.sent,t.next=6,p["a"].getList();case 6:return e.allFixedDishesData=t.sent,e.hourStart=""===e.hourStart?"00:00:00":e.hourStart,e.hourEnd=""===e.hourEnd?"23:59:59":e.hourEnd,t.next=11,e.loadSalesData(e.dates,e.hourStart,e.hourEnd);case 11:localStorage.getItem("fixedHideAttribute")&&(e.fixedHideAttributes=JSON.parse(localStorage.getItem("fixedHideAttribute"))),localStorage.getItem("fixedHideDishes")&&(e.fixedHideDishes=JSON.parse(localStorage.getItem("fixedHideDishes"))),e.fixedHideDishes.length>0?e.allDishData=e.allFixedDishesData.filter((function(t){return!e.fixedHideDishes.includes(t.dishName)})):e.allDishData=f["IKUtils"].deepCopy(e.allFixedDishesData);case 14:case"end":return t.stop()}}),t)})))()},print:function(){if(Date.parse(this.dates[0])>Date.parse(this.dates[1])){var e=[this.dates[1],this.dates[0]];this.dates[0]=e[0],this.dates[1]=e[1]}var t=[this.dates[0]+" "+this.hourStart,this.dates[1]+" "+this.hourEnd];g["a"].showConfirm("Bist du sicher?","Möchten Sie die Statistike Bon drucken?",(function(){Object(s["f"])(t).then((function(){g["a"].toast("Erfolgreich drucken!")}))}))}}},m=h,b=(r("32f5"),r("2877")),v=r("6544"),I=r.n(v),D=r("8336"),O=r("b0af"),C=r("99d9"),j=r("62ad"),w=r("a523"),E=r("8fea"),P=r("2e4b"),N=r("169a"),x=r("132d"),T=r("0fd9"),A=r("b974"),K=r("2fa4"),S=r("8654"),F=r("c964"),L=r("71d9"),G=r("2a7f"),k=Object(b["a"])(m,a,n,!1,null,null,null);t["default"]=k.exports;I()(k,{VBtn:D["a"],VCard:O["a"],VCardText:C["b"],VCardTitle:C["c"],VCol:j["a"],VContainer:w["a"],VDataTable:E["a"],VDatePicker:P["a"],VDialog:N["a"],VIcon:x["a"],VRow:T["a"],VSelect:A["a"],VSpacer:K["a"],VTextField:S["a"],VTimePicker:F["a"],VToolbar:L["a"],VToolbarTitle:G["b"]})},ff51:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i}));r("a15b");function a(e){var t=new Date,r=t.getTime(),a=864e5,n=r+e*a,i=new Date(n),o=i.getFullYear(),u=i.getMonth()+1,s=i.getDate();return[o,u,s].join("-")}function n(e){var t=new Date,r=t.getTime(),a=864e5,n=r+e*a,i=new Date(n),o=i.getFullYear()+"-",u=i.getMonth()+1,s=i.getDate(),l=i.getHours()<10?"0"+i.getHours():i.getHours(),c=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),d=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();return o+u+"-"+s+" "+l+":"+c+":"+d}function i(e){var t=e;return t.maxDineTime&&(t.maxDineTime=t.maxDineTime/60),t.roundTime&&(t.roundTime=t.roundTime/60),t}}}]);
//# sourceMappingURL=chunk-68e35a05.02c59ae2.js.map