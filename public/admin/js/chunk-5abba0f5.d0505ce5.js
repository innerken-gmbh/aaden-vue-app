(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5abba0f5"],{8976:function(t,e,a){"use strict";a("d81d"),a("96cf");var n=a("1da1"),i=a("5530"),r=a("633c"),o=a("a86d"),s=a("3405"),l={id:{type:r["a"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},langs:{displayName:"paymentname",type:r["a"].Types.Group,formConfig:{groupName:"paymentname",default:s["a"].supportLang,childLabelKey:"lang",type:{}},tableConfig:{displayCondition:function(t){return t.lang.toUpperCase()===s["a"].lang()}},childKey:"name",children:[o["a"],o["a"],o["a"]]},isOnline:{displayName:"isOnline",type:r["a"].Types.Boolean},apiKey:{displayName:"apiKey"}},d={add:function(t){return r["e"].post("PayMethod.php?op=add",Object(i["a"])(Object(i["a"])({},t),{},{langs:JSON.stringify(t.langs)}),{showLoading:!0})},edit:function(t){return r["e"].postWithUploadFile("PayMethod.php?op=update",Object(i["a"])(Object(i["a"])({},t),{},{langs:JSON.stringify(t.langs)}),{showLoading:!0})},remove:function(t){return r["e"].post("PayMethod.php?op=delete",{id:t})},load:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["e"].get("PayMethod.php",Object(i["a"])({},e));case 2:return t.abrupt("return",t.sent.content.map((function(t){return r["a"].parseDataForEntity(t,l)})));case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()};e["a"]=r["a"].ModelFactory(l,d)},a86d:function(t,e,a){"use strict";var n=a("633c"),i={id:{type:n["a"].Types.Integer,displayName:"id",tableConfig:{align:"start"},formConfig:{requiredNew:!1}},name:{displayName:"Name"},lang:{},desc:{displayName:"Beschreibung",formConfig:{required:!1}}};e["a"]=n["a"].ModelFactory(i,{})},ccb3:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{id:"printText",cols:"8"}},[a("v-row",[a("base-material-card",{staticClass:"px-5 py-3 ",attrs:{color:"indigo",icon:"mdi-vuetify",inline:""},scopedSlots:t._u([{key:"after-heading",fn:function(){return[a("div",{staticClass:"display-2 font-weight-light"},[t._v(" "+t._s(t.$t("菜品信息"))+" ")])]},proxy:!0}])},[a("v-text-field",{staticClass:"ml-auto",staticStyle:{"max-width":"250px"},attrs:{"append-icon":"mdi-magnify","hide-details":"",label:t.$t("Search"),"single-line":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-divider",{staticClass:"mt-3"}),a("v-data-table",{attrs:{"fixed-header":!0,headers:t.headers,items:t.desserts,"items-per-page":15,loading:t.loading,search:t.search,"item-key":"id","multi-sort":""},on:{"update:search":function(e){t.search=e}},scopedSlots:t._u([{key:"item.name",fn:function(e){var n=e.item;return[t._v(" "+t._s(n.name)+" "),n.hasMod>0?a("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]}},{key:"item.mod",fn:function(e){var n=e.item;return[a("div",{attrs:{colspan:t.headers.length}},[a("dish-modification",{attrs:{"dish-item":n}})],1)]}}])}),a("v-row",[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){return t.goback()}}},[t._v(" "+t._s(t.$t("返回"))+" ")]),a("v-spacer"),a("v-btn",{directives:[{name:"print",rawName:"v-print",value:"#detail",expression:"'#detail'"}],attrs:{color:"green darken-1",dark:""},on:{click:t.reprintOrder}},[t._v(" "+t._s(t.$t("补打订单"))+" ")]),a("v-btn",{directives:[{name:"print",rawName:"v-print",value:"#printText",expression:"'#printText'"}],staticClass:"ml-2 mb-2",attrs:{color:"primary",dark:""}},[t._v(" A4 "+t._s(t.$t("打印"))+" ")])],1)],1)],1),a("v-row",[a("ik-data-table",{attrs:{model:t.BillPaymentInfo,icon:"mdi-cards","entity-name":t.$t("付款记录"),"use-action":!1,"use-select":!1,filter:t.filter},scopedSlots:t._u([{key:"footer",fn:function(){return[a("v-toolbar",{attrs:{color:"white",flat:""}})]},proxy:!0}])})],1)],1),a("v-col",{attrs:{id:"billPayment",cols:"4"}},[a("base-material-card",{staticClass:"px-5 py-3 ",attrs:{color:"indigo",icon:"mdi-account-cash",inline:""},scopedSlots:t._u([{key:"after-heading",fn:function(){return[a("div",{staticClass:"display-2 font-weight-light"},[t._v(" "+t._s(t.$t("订单信息"))+" ")])]},proxy:!0}])},[a("v-data-table",{attrs:{"fixed-header":!1,headers:t.infoHeaders,items:t.myinfoList,loading:t.loading,"items-per-page":30,"hide-default-footer":"","hide-default-header":""},scopedSlots:t._u([{key:"item.keyname",fn:function(e){var n=e.item;return[a("span",{staticClass:"font-weight-black"},[t._v(" "+t._s(n.keyname)+" ")])]}},{key:"footer",fn:function(){return[a("v-toolbar",{attrs:{color:"white",flat:""}},[a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},n),[t._v(" "+t._s(t.$t("修改支付方式"))+" ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.$t("请选择新的支付方式")))])]),a("v-card-text",[a("v-container",[a("v-row",[[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-select",{attrs:{items:t.payment,"item-text":"name","item-value":"paymentMethodId",label:t.$t("chooseyourpayment"),"return-object":""},model:{value:t.editedItem,callback:function(e){t.editedItem=e},expression:"editedItem"}})],1)]],2)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" "+t._s(t.$t("Cancel"))+" ")]),a("v-btn",{attrs:{color:"blue darken-1"},on:{click:t.save}},[t._v(" "+t._s(t.$t("Save"))+" ")])],1)],1)],1)],1)]},proxy:!0}])})],1)],1),a("v-col",{staticClass:"printText",attrs:{cols:"12",md:"6"}},[t.rawAddressInfo?a("base-material-card",{staticClass:"px-5 py-3 ",attrs:{color:"indigo",icon:"mdi-account-cash",inline:""},scopedSlots:t._u([{key:"after-heading",fn:function(){return[a("div",{staticClass:"display-2 font-weight-light"},[t._v(" "+t._s(t.$t("地址信息"))+" ")])]},proxy:!0}],null,!1,2582449564)},[a("v-row",[a("v-col",{attrs:{cols:"12",md:"12"}},[a("address-info-block",{attrs:{"address-info":t.rawAddressInfo}})],1)],1)],1):t._e()],1),a("v-col",{staticClass:"printText",attrs:{cols:"12",md:"6"}},[t.rawAddressInfo?a("base-material-card",{staticClass:"px-5 py-3 ",attrs:{color:"indigo",icon:"mdi-printer",inline:""},scopedSlots:t._u([{key:"after-heading",fn:function(){return[a("div",{staticClass:"display-2 font-weight-light"},[t._v(" "+t._s(t.$t("打印订单"))+" ")])]},proxy:!0}],null,!1,1893731830)},[a("v-row",[a("v-col",{staticClass:"d-flex spaceBetween",staticStyle:{width:"100%"},attrs:{cols:"12",md:"12"}},[a("div",{staticClass:"mr-2"},[a("v-alert",{attrs:{border:"left","colored-border":"",color:"deep-purple accent-4",elevation:"2"}},[t._v(" "+t._s(t.$t("此处打印的订单仅供参考,不可作为Rechnung使用"))+" ")])],1),a("v-btn",{attrs:{right:"",large:"",color:"success",dark:""},on:{click:function(e){e.stopPropagation(),t.printDialogShow=!0}}},[t._v(" "+t._s(t.$t("打印"))+" ")])],1)],1)],1):t._e()],1),a("v-dialog",{attrs:{"max-width":"400px"},model:{value:t.printDialogShow,callback:function(e){t.printDialogShow=e},expression:"printDialogShow"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v(" "+t._s(t.$t("打印此订单?"))+" ")]),a("v-card-text",{attrs:{id:"detail"}},[a("v-card-subtitle",[t._v(t._s(t.$t("地址信息")))]),a("v-divider"),a("address-info-block",{attrs:{"address-info":t.rawAddressInfo}}),a("v-card-subtitle",[t._v(t._s(t.$t("订单信息")))]),a("v-divider"),a("dish-info-block",{attrs:{"render-list":!0,"dish-orders":t.desserts}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.printDialogShow=!1}}},[t._v(" "+t._s(t.$t("Cancel"))+" ")]),a("v-btn",{directives:[{name:"print",rawName:"v-print",value:"#detail",expression:"'#detail'"}],attrs:{color:"green darken-1",text:""},on:{click:function(e){t.printDialogShow=!1}}},[t._v(" "+t._s(t.$t("打印"))+" ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400px"},model:{value:t.printDialogShow,callback:function(e){t.printDialogShow=e},expression:"printDialogShow"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v(" "+t._s(t.$t("打印此订单?"))+" ")]),a("v-card-text",{attrs:{id:"orderDetail"}},[a("v-card-subtitle",[t._v(t._s(t.$t("地址信息")))]),a("v-divider"),a("address-info-block",{attrs:{"address-info":t.rawAddressInfo}}),a("v-card-subtitle",[t._v(t._s(t.$t("订单信息")))]),a("v-divider"),a("dish-info-block",{attrs:{"render-list":!0,"dish-orders":t.desserts}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.printDialogShow=!1}}},[t._v(" "+t._s(t.$t("Cancel"))+" ")]),a("v-btn",{directives:[{name:"print",rawName:"v-print",value:"#orderDetail",expression:"'#orderDetail'"}],attrs:{color:"green darken-1",text:""},on:{click:function(e){t.printDialogShow=!1}}},[t._v(" "+t._s(t.$t("打印"))+" ")])],1)],1)],1)],1)],1)},i=[],r=(a("99af"),a("7db0"),a("d81d"),a("b0c0"),a("ac1f"),a("1276"),a("96cf"),a("1da1")),o=a("b85c"),s=a("5530"),l=a("0a61"),d=a("3405"),c=a("9225"),u=a("ccdd"),p=a("f683"),m=a("4907"),f=a("d926"),v=a("2909"),h=a("633c"),y=a("8976"),b={id:{type:h["a"].Types.Integer,displayName:"ID",tableConfig:{align:"start"}},orderId:{},paymentMethodId:{type:h["a"].Types.Option,formConfig:{type:{selectItems:y["a"].getList,itemText:"_langsname"}},displayName:"payMethod"},createdAt:{},updated_at:{},status:{type:h["a"].Types.Boolean,displayName:"isOnline"},memberCardId:{},amount:{}},g={load:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h["e"].get("BackendData.php",Object.assign.apply(Object,[{op:"billDetail",lang:d["a"].lang()}].concat(Object(v["a"])(e))));case 2:return t.abrupt("return",t.sent.billPaymentInfo.map((function(t){return h["a"].parseDataForEntity(t,b)})));case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},I=h["a"].ModelFactory(b,g),k=a("3d20"),w=a.n(k),_={components:{DishModification:f["default"],DishInfoBlock:m["default"],AddressInfoBlock:p["default"],IkDataTable:h["c"]},props:{id:{default:"-1",type:String}},data:function(){return{BillPaymentInfo:I,loading:!1,currentIndex:0,orderId:this.id,billData:{},amountList:[],search:"",printDialogShow:!1,expandedItem:[],headers:[{text:this.$i18n.t("code"),align:"start",sortable:!1,value:"code"},{text:this.$i18n.t("name"),value:"name"},{text:this.$i18n.t("modification"),value:"mod"},{text:this.$i18n.t("createTimestamp"),value:"stamp"},{text:this.$i18n.t("price"),value:"price"},{text:this.$i18n.t("count"),value:"sumCount"},{text:this.$i18n.t("sumPrice"),value:"totalPrice"}],desserts:[],dialog:!1,PaymentRes:[],rawAddressInfo:"",infoHeaders:[{value:"keyname",align:"left"},{value:"value",align:"right"}],myinfoList:[],payment:[],paymentStatus:"",editedItem:{paymentMethodId:-1,name:""},defaultItem:{paymentMethodId:-1,name:""}}},computed:{src:function(){return!!this.billData.tableInfo&&"".concat(d["a"].SQR+d["a"].genSQUrl,"TableName=")+"".concat(this.billData.tableInfo.TableName,"&RestaurantId=1&SeatId=1&lang=").concat(c["a"].locale.toUpperCase())},filter:function(){return{id:this.id}}},watch:{dialog:function(t){t||this.close()}},created:function(){this.reloadItem(this.orderId)},mounted:function(){},methods:{loadDetail:function(t){var e=this;Object(l["j"])(t).then((function(t){e.billData=t,e.desserts=e.billData.billOrderInfo.map((function(t,e){return Object(s["a"])({id:e,agNameArr:t.hasMod>0?t.agName.split(","):[],aNameArr:t.hasMod>0?t.aName.split(","):[]},t)})),e.editedItem.paymentMethodId=e.billData.billInfo.payMethod;var a,n=Object(o["a"])(e.PaymentRes);try{for(n.s();!(a=n.n()).done;){var i=a.value;i.id===e.editedItem.paymentMethodId&&(e.editedItem.name=i.name)}}catch(r){n.e(r)}finally{n.f()}e.rawAddressInfo=JSON.parse(e.billData.billInfo.rawAddressInfo),e.paymentStatus="1"===e.billData.billInfo.paymentStatus?e.$i18n.t("已支付"):e.$i18n.t("未支付"),e.myinfoList=[{keyname:e.$i18n.t("订单号"),value:e.billData.billInfo.id},{keyname:e.$i18n.t("servantName"),value:e.billData.billInfo.servantName},{keyname:e.$i18n.t("tableName"),value:e.billData.billInfo.tableName},{keyname:e.$i18n.t("startTime"),value:e.billData.billInfo.startTime},{keyname:e.$i18n.t("结账时间"),value:e.billData.billInfo.endTime},{keyname:e.$i18n.t("payMethod"),value:e.editedItem.name},{keyname:e.$i18n.t("支付状态"),value:e.paymentStatus},{keyname:e.$i18n.t("personCount"),value:e.billData.billInfo.personCount},{keyname:e.$i18n.t("tipIncome"),value:e.billData.billInfo.tipIncome},{keyname:e.$i18n.t("totalPrice"),value:e.billData.billInfo.totalPrice}]}))},reloadItem:function(t){var e=this;Object(l["f"])().then((function(a){e.PaymentRes=a.content,e.formatItem(),e.loadDetail(t)}))},reprintOrder:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.a.fire({title:t.$i18n.t("Bitte wählen Sie eine Rechnungsart."),input:"select",inputOptions:{1:t.$i18n.t("Normal Rechnung"),2:t.$i18n.t("Rechnung"),3:t.$i18n.t("Unternehmensrechnung")}});case 2:a=e.sent,a.value&&(a.value=parseInt(a.value),n=0,i=1,a.value>1&&(n=1),a.value>2&&(i=2),Object(l["s"])(t.id,n,i));case 4:case"end":return e.stop()}}),e)})))()},findLangInArray:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c["a"].locale;return t.find((function(t){return t.lang.toLowerCase()===e.toLowerCase()}))},formatItem:function(){var t,e=Object(o["a"])(this.PaymentRes);try{for(e.s();!(t=e.n()).done;){var a=t.value;a.name=this.findLangInArray(a.langs).name,this.payment.push({paymentMethodId:a.id,name:a.name})}}catch(n){e.e(n)}finally{e.f()}},goback:function(){this.$router.history.go(-1)},save:function(){var t=this;console.log(this.editedItem.paymentMethodId),Object(l["d"])(this.editedItem.paymentMethodId,this.orderId).then((function(){u["a"].toast("编辑成功"),t.loadDetail(t.orderId),t.close()}))},close:function(){this.dialog=!1}}},x=_,$=a("2877"),C=a("6544"),D=a.n(C),S=a("0798"),N=a("8336"),O=a("b0af"),T=a("99d9"),M=a("62ad"),j=a("a523"),A=a("8fea"),P=a("169a"),R=a("ce7e"),V=a("0fd9"),L=a("b974"),B=a("2fa4"),F=a("8654"),J=a("71d9"),U=Object($["a"])(x,n,i,!1,null,"c276bde2",null);e["default"]=U.exports;D()(U,{VAlert:S["a"],VBtn:N["a"],VCard:O["a"],VCardActions:T["a"],VCardSubtitle:T["b"],VCardText:T["c"],VCardTitle:T["d"],VCol:M["a"],VContainer:j["a"],VDataTable:A["a"],VDialog:P["a"],VDivider:R["a"],VRow:V["a"],VSelect:L["a"],VSpacer:B["a"],VTextField:F["a"],VToolbar:J["a"]})},ccdd:function(t,e,a){"use strict";var n=a("5530"),i=a("633c");e["a"]=Object(n["a"])({},i["b"])}}]);
//# sourceMappingURL=chunk-5abba0f5.d0505ce5.js.map