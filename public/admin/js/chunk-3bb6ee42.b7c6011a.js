(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bb6ee42"],{4497:function(t,e,i){"use strict";i("4de4"),i("96cf");var a=i("1da1"),n=i("633c"),s=i("6306"),r=i("4aad"),o=i("eff4"),c={id:{type:n["a"].Types.Integer,displayName:"id",tableConfig:{align:"start"}},printStatus:{displayName:"printStatus",type:n["a"].Types.Option,formConfig:{type:{selectItems:o["a"].getList(),itemText:"name"}}},addTimeStamp:{displayName:"addTimeStamp"},printBonClass:{type:n["a"].Types.Option,formConfig:{type:{selectItems:r["a"].getList()}}},printerGroupId:{type:n["a"].Types.Option,formConfig:{type:{selectItems:s["a"].getList}}},retryCount:{},printerMsg:{displayName:"printerMsg"},content:{displayName:"checkContent",header:!1}},l={load:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["e"].get("PrintRecord.php",{op:"getAllRecords"});case 2:if(i=t.sent.content,e=e[0],!e){t.next=6;break}return t.abrupt("return",i.filter((function(t){return t.printStatus!==e.printStatus})));case 6:return t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),reprint:function(t){return n["e"].get("Printer.php?op=reprintWithDefault",{id:t.id})}};e["a"]=n["a"].ModelFactory(c,l)},"4aad":function(t,e,i){"use strict";e["a"]={list:[{id:1,name:"Others"},{id:2,name:"RechnungBon"},{id:3,name:"Zbon"},{id:4,name:"KitchenBon"}],getList:function(){return this.list}}},"5c3a8":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{id:"dashboard",fluid:"",tag:"section"}},[i("v-row",[i("v-col",{attrs:{cols:"12",md:"12"}},[i("v-card",{attrs:{color:"basil"}},[i("v-card-title",{staticClass:"text-center justify-center py-6"},[i("h1",{staticClass:"font-weight-bold display-3 basil--text"},[t._v(" "+t._s(t.restaurantName)+" ")])]),i("v-tabs",{attrs:{"background-color":"transparent",color:"basil",grow:""}},[t._l(t.items,(function(e,a){return i("v-tab",{key:a},[t._v(" "+t._s(e)+" ")])})),i("v-tab-item",[i("base-material-card",{staticClass:"px-5 py-3",attrs:{id:"coloured-line",color:"warning",icon:"mdi-chart-timeline-variant"},scopedSlots:t._u([{key:"after-heading",fn:function(){return[i("div",{staticClass:"display-1 font-weight-light mt-2"},[t._v(" "+t._s(t.$t("销售数据统计"))+" ")])]},proxy:!0}])},[i("chartist",{staticClass:"mt-3",staticStyle:{"max-height":"300px"},attrs:{data:t.salesData,options:t.salesDataChart.options,type:"Line"}}),i("v-divider",{staticClass:"ma-3"}),i("div",{staticClass:"px-3"},[i("div",{staticClass:"body-2 text-uppercase grey--text font-weight-bold mb-3"},[t._v(" Legend ")]),i("v-row",{staticClass:"ma-0",attrs:{align:"center"}},[i("v-avatar",{staticClass:"mr-1",attrs:{color:"info",size:"12"}}),i("span",{staticClass:"mr-3 font-weight-light"},[t._v(t._s(t.$t("Food")))]),i("v-avatar",{staticClass:"mr-1",attrs:{color:"red",size:"12"}}),i("span",{staticClass:"mr-3 font-weight-light"},[t._v(t._s(t.$t("Drinks")))])],1)],1)],1)],1),i("v-tab-item",[i("ik-data-table",{attrs:{model:t.model,"use-default-action":!1,"use-select":!1,"show-expand":!0,"single-expand":!0,filter:{printStatus:1},icon:"mdi-clipboard-list","items-per-page":5,"entity-name":t.$t("打印单列表")},scopedSlots:t._u([{key:"expanded-item",fn:function(e){var a=e.item;return[i("div",{staticClass:"text-center",domProps:{innerHTML:t._s(a.content)}})]}},{key:"footer",fn:function(){return[i("v-toolbar",{attrs:{color:"white",flat:""}})]},proxy:!0},{key:"item.action",fn:function(e){var a=e.item;return[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.reprint(a)}}},[t._v(" mdi-printer ")])]}}])})],1),i("v-tab-item",[i("base-material-card",{staticClass:"px-5 py-3",attrs:{color:"primary",icon:"mdi-account",inline:""},scopedSlots:t._u([{key:"after-heading",fn:function(){return[i("div",{staticClass:"display-1 font-weight-light mt-2"},[t._v(" "+t._s(t.$t("随时更新，随时掌握营销状况"))+" ")])]},proxy:!0}])},[i("v-card-text",[i("v-data-table",{attrs:{headers:t.servantHeader,items:t.thisMonthServantRank},scopedSlots:t._u([{key:"item.photo",fn:function(e){var a=e.item;return[i("v-avatar",{attrs:{tile:""}},[i("v-img",{attrs:{src:t.servantImgRoot+a.photo,height:"48px",width:"48px"}})],1)]}}])})],1)],1)],1)],2)],1)],1)],1),i("v-row",[i("v-col",{attrs:{lg:"3",cols:"12"}},[i("base-material-card",{attrs:{color:"error",icon:"mdi-run-fast",title:t.$t("快速操作")}},[i("v-list",[i("v-list-item",{on:{click:t.toZbon}},[i("v-list-item-icon",[i("v-icon",[t._v(" mdi-format-list-bulleted ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$t("Zbon列表"))+" ")])],1)],1),i("v-list-item",{on:{click:t.toAllBills}},[i("v-list-item-icon",[i("v-icon",[t._v(" mdi-calendar-account ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$t("全部账单"))+" ")])],1)],1),i("v-list-item",{on:{click:t.addDishes}},[i("v-list-item-icon",[i("v-icon",[t._v(" mdi-pencil ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$t("菜品管理"))+" ")])],1)],1),i("v-list-item",{on:{click:t.addCategories}},[i("v-list-item-icon",[i("v-icon",[t._v(" mdi-domain ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$t("标签管理"))+" ")])],1)],1),i("v-list-item",{on:{click:t.dishStatistic}},[i("v-list-item-icon",[i("v-icon",[t._v(" mdi-dialpad ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$t("菜品统计"))+" ")])],1)],1),i("v-list-item",{on:{click:t.dailyBill}},[i("v-list-item-icon",[i("v-icon",[t._v(" mdi-bulletin-board ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$t("本日总汇"))+" ")])],1)],1)],1)],1)],1),[i("v-col",{attrs:{lg:"9",cols:"12"}},[i("v-row",[i("v-col",{attrs:{cols:"12",md:"6"}},[i("base-material-stats-card",{attrs:{color:"info",icon:"mdi-twitter","sub-icon":"mdi-clock","sub-text":t.$t("Just Updated"),title:t.$t("今日营业总额"),value:"€"+t.todayInfo.sumIncome}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("base-material-stats-card",{attrs:{color:"primary",icon:"mdi-poll","sub-icon":"mdi-tag","sub-text":t.$t("Tracked from Aaden Analytics"),title:t.$t("今日用餐总人数"),value:t.todayInfo.sumPersonCount}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("base-material-stats-card",{attrs:{color:"success",icon:"mdi-store","sub-icon":"mdi-calendar","sub-text":"",title:t.$t("使用中的桌子"),value:t.tableUsageStatus.inUse}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("base-material-stats-card",{attrs:{color:"orange",icon:"mdi-sofa","sub-icon":"mdi-alert",title:t.$t("本月平均翻台率"),"sub-text":t.$t("翻台率是指桌子被使用的频率"),value:t.tableRenew.toFixed(2)+"%"}})],1)],1)],1)]],2),i("v-row",[i("v-col",{attrs:{cols:"12",md:"8"}},[i("base-material-card",{staticClass:"px-5 py-3",attrs:{color:"pink",icon:"mdi-heart",inline:""},scopedSlots:t._u([{key:"after-heading",fn:function(){return[i("div",{staticClass:"display-1 font-weight-light mt-2"},[t._v(" "+t._s(t.$t("本周内最受欢迎的精美食品"))+" ")])]},proxy:!0}])},[i("v-card-text",[i("v-data-table",{attrs:{headers:t.dishesHeader,items:t.thisWeekMostPopularDishes},scopedSlots:t._u([{key:"item.photo",fn:function(e){var a=e.item;return[i("v-avatar",{attrs:{tile:""}},[i("v-img",{attrs:{src:t.dishImgRoot+a.image,height:"48px",width:"48px"}})],1)]}}])})],1)],1)],1),i("v-col",{attrs:{cols:"12",md:"4"}},[i("v-card",[i("v-card-title",{staticClass:"subheading font-weight-bold"},[t._v(" "+t._s(t.$t("热销菜品分布"))+" "),i("v-btn",{attrs:{text:""},on:{click:t.changeDateToDay}},[t._v(" 查看本日 ")]),i("v-btn",{attrs:{text:""},on:{click:t.changeDateToMonth}},[t._v(" 查看本月 ")])],1),i("v-divider"),i("v-list",{attrs:{dense:""}},t._l(t.dishIncomeList,(function(e,a){return i("v-list-item",{key:a},[i("v-list-item-content",[t._v(" "+t._s(t.dishIncomeList[a].name)+": ")]),i("v-list-item-content",[t._v(" "+t._s(t.dishIncomeList[a].sumPrice)+" ")])],1)})),1)],1)],1)],1)],1)},n=[],s=(i("7db0"),i("a15b"),i("13d5"),i("b0c0"),i("ac1f"),i("1276"),i("96cf"),i("1da1")),r=i("b85c"),o=i("0a61"),c=i("3405"),l=i("633c"),d=i("4497"),u={name:"DashboardDashboard",components:{IkDataTable:l["c"]},data:function(){return{items:[this.$i18n.t("销售数据统计"),this.$i18n.t("错误打印单列表"),this.$i18n.t("跑堂排行")],salesDataChart:{options:{low:0,chartPadding:{top:0,right:0,bottom:0,left:0}}},servantHeader:[{text:"Name",value:"name"},{text:this.$i18n.t("income"),value:"income",align:"right"},{text:this.$i18n.t("billCount"),value:"billCount",align:"right"}],dishesHeader:[{text:this.$i18n.t("Ranking"),value:"rank"},{text:this.$i18n.t("image"),value:"photo",align:"center"},{text:this.$i18n.t("name"),value:"name",align:"right"},{text:this.$i18n.t("price"),value:"price",align:"right"},{text:this.$i18n.t("count"),value:"sumCount",align:"right"}],indexData:{sevenDaysFoodDrinkIncome:[],thisMonthServantRank:[],todayInfo:{sumIncome:"0"},tableUsageStatus:{inUse:"0"},thisMonthAverageTablesRenewRate:0},model:d["a"],restaurantName:"",dishIncomeList:[]}},computed:{filter:function(){return function(t){return"1"!==t.printStatus}},servantImgRoot:function(){return this.$store.getters.rootUrl+c["a"].servantRoot},dishImgRoot:function(){return this.$store.getters.rootUrl+c["a"].dishImageRoot},salesData:function(){var t,e=[],i=[],a=[],n=Object(r["a"])(this.indexData.sevenDaysFoodDrinkIncome);try{for(n.s();!(t=n.n()).done;){var s=t.value,o=s.find((function(t){return"foods"===t.name.toLowerCase()})),c=s.find((function(t){return"drinks"===t.name.toLowerCase()}));e.push(o.dateDisplay),i.push(o.income),a.push(c.income)}}catch(l){n.e(l)}finally{n.f()}return{labels:e.reverse(),series:[i.reverse(),a.reverse()]}},thisMonthServantRank:function(){return this.indexData.thisMonthServantRank},todayInfo:function(){return this.indexData.todayInfo},tableUsageStatus:function(){return this.indexData.tableUsageStatus},tableRenew:function(){return this.indexData.thisMonthAverageTablesRenewRate},thisWeekMostPopularDishes:function(){return this.indexData.thisWeekMostPopularDishes},totalSales:function(){return this.sales.reduce((function(t,e){return t+e.salesInM}),0)}},created:function(){this.onceData(),this.reloadData()},methods:{changeDateToDay:function(){this.dishIncomeList=this.indexData.thisDayIncomePieChart},changeDateToMonth:function(){this.dishIncomeList=this.indexData.thisMonthIncomePieChart},reprint:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.model.reprint(t);case 2:l["b"].toast();case 3:case"end":return i.stop()}}),i)})))()},toZbon:function(){this.$router.push({path:"/Bills/zbonlist"})},toAllBills:function(){this.$router.push({path:"/Bills/history-bills"})},addDishes:function(){this.$router.push({path:"/dishes/dishes-manage"})},addCategories:function(){this.$router.push({path:"/dishes/labels-manage"})},dishStatistic:function(){this.$router.push({path:"/dishes/dish-statistics"})},dailyBill:function(){this.$router.push({path:"/Bills/today-bills"})},onceData:function(){var t=this;Object(o["o"])().then((function(e){var i=[];i=e.content[0].name.split("<BR>"),t.restaurantName=i.join(" ")}))},reloadData:function(){var t=this;Object(o["m"])().then((function(e){t.indexData=e,t.dishIncomeList=t.indexData.thisMonthIncomePieChart}))},beforeDestroy:function(){clearTimeout(this.timer1),clearTimeout(this.timer2),this.timer1=null,this.timer2=null},complete:function(t){this.list[t]=!this.list[t]}}},m=u,h=(i("674b"),i("2877")),p=i("6544"),v=i.n(p),f=i("8212"),g=i("8336"),b=i("b0af"),y=i("99d9"),x=i("62ad"),_=i("a523"),C=i("8fea"),w=i("ce7e"),k=i("132d"),D=i("adda"),I=i("8860"),$=i("da13"),S=i("5d23"),T=i("34c3"),R=i("0fd9"),L=i("71a3"),P=i("c671"),V=i("fe57"),M=i("71d9"),N=Object(h["a"])(m,a,n,!1,null,null,null);e["default"]=N.exports;v()(N,{VAvatar:f["a"],VBtn:g["a"],VCard:b["a"],VCardText:y["c"],VCardTitle:y["d"],VCol:x["a"],VContainer:_["a"],VDataTable:C["a"],VDivider:w["a"],VIcon:k["a"],VImg:D["a"],VList:I["a"],VListItem:$["a"],VListItemContent:S["a"],VListItemIcon:T["a"],VListItemTitle:S["c"],VRow:R["a"],VTab:L["a"],VTabItem:P["a"],VTabs:V["a"],VToolbar:M["a"]})},6306:function(t,e,i){"use strict";var a=i("5530"),n=(i("96cf"),i("1da1")),s=i("633c"),r={id:{type:s["a"].Types.Integer,displayName:"id",tableConfig:{align:"start"},form:!1},name:{displayName:"sectionName"},isSingleLinePrint:{type:s["a"].Types.Boolean,displayName:"isSingleLinePrint"},isSingleOrderPrint:{type:s["a"].Types.Boolean,displayName:"isSingleOrderPrint"},printerCount:{displayName:"printerCount",formConfig:{inEdit:!1,inNew:!1}}},o={load:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["e"].get("Printer.php",Object(a["a"])({op:"showPrinterGroups"},e));case 2:return t.abrupt("return",t.sent.content);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),add:function(t){return s["e"].postWithUploadFile("Printer.php?op=addPrinterGroups",t,{showLoading:!0})},edit:function(t){return s["e"].postWithUploadFile("Printer.php?op=updatePrinterGroups",t,{showLoading:!0})},remove:function(t){return s["e"].post("Printer.php?op=deletePrinterGroup",{id:t})}};e["a"]=s["a"].ModelFactory(r,o)},"674b":function(t,e,i){"use strict";var a=i("d1f7"),n=i.n(a);n.a},d1f7:function(t,e,i){},eff4:function(t,e,i){"use strict";var a=i("9225");e["a"]={list:[{id:0,name:a["a"].t("打印失败")},{id:1,name:a["a"].t("打印成功")},{id:2,name:a["a"].t("验证错误")},{id:3,name:a["a"].t("单子格式不合规范")},{id:4,name:a["a"].t("正在打印")},{id:5,name:a["a"].t("网络错误")}],getList:function(){return this.list}}}}]);
//# sourceMappingURL=chunk-3bb6ee42.b7c6011a.js.map