(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d3c98"],{"5df9":function(t,e,n){"use strict";n.r(e),n.d(e,"previewZBonByTimeSpan",(function(){return m})),n.d(e,"getZbonRecordList",(function(){return d})),n.d(e,"reprintZbon",(function(){return f})),n.d(e,"generateAndPrintZbon",(function(){return h}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 2fr"}},[n("v-card",[n("v-list",[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",{staticClass:"font-weight-bold"},[t._v(" ZbonNr. ")])],1),n("v-list-item-action-text",{staticClass:"font-weight-bold"},[t._v(" ErstellenZeit ")])],1),n("v-list-item-group",{staticStyle:{"max-height":"calc(100vh - 64px)",overflow:"scroll"},attrs:{mandatory:""}},[n("v-list-item",{on:{click:function(e){t.currentZbonSelected=null}}},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"display-2"},[t._v(" 本日ZBon ")])],1),n("v-list-item-action-text",[t._v(" 还未生成 ")])],1),t._l(t.zbonRecordList,(function(e){return n("v-list-item",{key:e.zbonNumber,on:{click:function(n){t.currentZbonSelected=e}}},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"display-2"},[t._v(" "+t._s(e.zbonNumber)+" ")])],1),n("v-list-item-action-text",[t._v(" "+t._s(e.toTimestamp)+" ")])],1)}))],2)],1)],1),n("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr"}},[n("div",{staticClass:"pa-4"},[n("v-list",{attrs:{subheader:"","two-line-line":""}},[n("v-subheader",{staticClass:"display-2"},[t._v(" "+t._s(t.$t("Umsatz"))+" ")]),n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.$t("All")))]),n("v-list-item-subtitle",[t._v(t._s(t.$t("Umsatz"))+": "+t._s(t.billContent.fTotal))]),n("v-list-item-subtitle",[t._v(" "+t._s(t.$t("Netto"))+": "+t._s(t.billContent.fTotalTe)+" ")]),n("v-list-item-subtitle",[t._v(" "+t._s(t.$t("Steuer"))+":"+t._s(t.billContent.fTotalTax)+" ")])],1)],1),t._l(t.taxGroupInfo,(function(e,r){return[n("v-list-item",{key:e.taxRatePercentage+"-"+r},[n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(e.taxRatePercentage)+"% ")]),n("v-list-item-subtitle",[t._v(" "+t._s(t.$t("Umsatz"))+": "+t._s(e.groupTotal)+" ")]),n("v-list-item-subtitle",[t._v(" "+t._s(t.$t("Netto"))+": "+t._s(e.nettoumsatz)+" ")]),n("v-list-item-subtitle",[t._v(" "+t._s(t.$t("Steuer"))+":"+t._s(e.umsatzsteuer)+" ")])],1)],1)]}))],2)],1),n("div",{staticClass:"pa-4"},[n("div",{staticClass:"display-2 d-flex justify-space-between"},[n("div",[t._v("From:")]),n("div",[t._v(t._s(t.fromAndEnd.fromTimestamp))])]),n("div",{staticClass:"display-2 d-flex justify-space-between"},[n("div",[t._v("To:")]),n("div",[t._v(t._s(t.fromAndEnd.toTimestamp))])]),t.currentZbonSelected?n("v-btn",{staticClass:"mt-2",attrs:{block:"",color:"success"},on:{click:function(e){return t.reprintZbon(t.currentZbonSelected.zbonNumber)}}},[t._v(" 重新打印ZBon ")]):n("v-btn",{staticClass:"mt-2",attrs:{block:"",color:"primary"},on:{click:function(e){return t.printZbon()}}},[t._v(" 打印ZBon ")])],1)])],1)},i=[],a=(n("4de4"),n("96cf"),n("1da1")),s=n("9d8f"),o=n("5a0c"),c=n.n(o),u=n("641f"),l=n.n(u);function m(t,e){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["hillo"].get("ZBon.php?op=previewByTimeSpan",{startTime:e,endTime:n});case 2:return t.abrupt("return",t.sent.content);case 3:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function d(t,e){return v.apply(this,arguments)}function v(){return v=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["hillo"].get("ZBon.php?op=searchZbonCombinedRecord");case 2:return t.abrupt("return",t.sent.content);case 3:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}function f(t){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["hillo"].post("ZBon.php?op=printCombined",{zbonNumber:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function h(){return _.apply(this,arguments)}function _(){return _=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["hillo"].get("ZBon.php?op=generateAndPrintCombined");case 2:return t.abrupt("return",t.sent.content);case 3:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}var w={data:function(){return{zbonRecordList:[],currentZbonSelected:null,billData:{content:{taxInfos:[],fTotal:0,fTotalTax:0,fTotalTe:0}}}},computed:{taxGroupInfo:function(){var t;return null===(t=this.billContent.taxInfos)||void 0===t?void 0:t.filter((function(t){return"Total"===t.consumeTypeName}))},billContent:function(){return this.billData.content},fromAndEnd:function(){var t,e=null!==(t=this.currentZbonSelected)&&void 0!==t?t:{fromTimestamp:this.zbonRecordList[0].toTimestamp,toTimestamp:c()().format("YYYY-MM-DD HH:mm:ss")},n=e.fromTimestamp,r=e.toTimestamp;return{fromTimestamp:n,toTimestamp:r}}},watch:{currentZbonSelected:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadData();case 2:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return t.zbonRecordList=e.sent,console.log(t.zbonRecordList),e.next=6,t.loadData();case 6:case"end":return e.stop()}}),e)})))()},methods:{reprintZbon:f,printZbon:function(){var t=this;l.a.showConfirm("Bist du sicher?","该操作会打印ZBon，每天只能打印一张ZBon哦！！",Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return e.next=4,t.loadData();case 4:case"end":return e.stop()}}),e)}))))},loadData:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.fromAndEnd,r=n.fromTimestamp,i=n.toTimestamp,e.next=3,m(r,i);case 3:t.billData=e.sent;case 4:case"end":return e.stop()}}),e)})))()}}},x=w,g=n("2877"),T=n("6544"),y=n.n(T),Z=n("8336"),R=n("b0af"),C=n("8860"),k=n("da13"),S=n("5d23"),z=n("1baa"),B=n("e0c7"),L=Object(g["a"])(x,r,i,!1,null,null,null);e["default"]=L.exports;y()(L,{VBtn:Z["a"],VCard:R["a"],VList:C["a"],VListItem:k["a"],VListItemActionText:S["a"],VListItemContent:S["b"],VListItemGroup:z["a"],VListItemSubtitle:S["c"],VListItemTitle:S["d"],VSubheader:B["a"]})}}]);
//# sourceMappingURL=chunk-2d0d3c98.85fb918a.js.map